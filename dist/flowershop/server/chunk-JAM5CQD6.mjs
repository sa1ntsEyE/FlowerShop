import './polyfills.server.mjs';
import{a as A1,b as k1,c as R1,d as N1,e as F1,f as L1,i as B1,m as Fc,n as Lc,p as _i,q as mr,r as Hf}from"./chunk-A7LJWCTO.mjs";import{$b as xc,A as xf,Ab as q,Ac as Mn,B as d1,Ba as dn,Bb as N,C as as,Cb as Aa,D as h1,Da as Oc,Db as ka,E as Pa,Ea as Ge,Eb as Tn,Fa as He,Fb as ro,Gb as Gi,H as f1,Hb as hn,Ib as fn,J as qi,Ja as fi,Jb as pi,Jc as P1,Ka as eo,Kb as m,Kc as nn,L as Af,La as y1,Lb as Ve,Lc as On,M as p1,Mb as ge,Mc as I1,Nb as E1,Nc as Gf,O as m1,Ob as et,Oc as so,Pa as Pt,Pb as tt,Pc as kc,Qb as nt,Qc as Rc,Rb as ht,S as kf,Sa as y,Sb as Hi,T as Rf,Ta as $,Tb as Vf,Tc as Nc,U as Ia,Ua as v1,Ub as Uf,Uc as x1,V as hi,Va as Dc,Vb as zf,W as Nf,Wa as C1,Wb as jt,X as bt,Xa as b1,Xb as tn,Y as Mc,Ya as fr,Yb as M1,Z as Ff,Za as w1,Zb as mi,_ as ls,_a as Oe,_b as Ic,aa as Xt,ba as he,bb as qt,c as bn,ca as Z,cb as xa,ea as _e,f as Dt,fc as O1,g as wn,ga as le,gb as ie,h as s1,ha as U,hb as Sn,i as o1,ia as Zt,ib as L,ic as D1,j as a1,jb as ji,k as hr,kb as dt,l as ss,la as xe,lb as us,m as os,ma as de,mb as pr,n as di,na as ee,nb as to,nc as qf,o as l1,oa as Be,ob as no,oc as En,pa as g1,pb as io,qb as d,r as zt,ra as Lf,rb as h,s as Da,sb as I,ta as _1,tb as ds,tc as gi,ua as cs,ub as hs,uc as Wi,v as c1,va as H,vb as ue,vc as Ac,wa as W,wb as Bf,x as u1,xa as en,xb as Pc,xc as jf,y as zi,ya as un,yb as S1,z as If,za as Zs,zb as T1}from"./chunk-FNOXKKC2.mjs";import{a as V1,b as U1,c as Wf,d as z1,e as Ra,f as q1,g as Bc,h as j1,i as G1,j as gr,k as Na,l as $i,m as Vc,n as Fa,o as $f,p as H1,q as W1,r as La,s as Uc,t as It,u as NI,v as zc,w as Kf,x as Wn}from"./chunk-AYBPRRJC.mjs";import{a as Ie,b as cn,c as Me,f as w,h as Pf,j as T}from"./chunk-H6KHSOBK.mjs";var Se=w(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=An.DEFAULT_MAX_SEND_MESSAGE_LENGTH=An.Propagate=An.LogVerbosity=An.Status=void 0;var bw=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t}(bw||(An.Status=bw={})),ww=function(t){return t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.NONE=3]="NONE",t}(ww||(An.LogVerbosity=ww={})),Sw=function(t){return t[t.DEADLINE=1]="DEADLINE",t[t.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",t[t.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",t[t.CANCELLATION=8]="CANCELLATION",t[t.DEFAULTS=65535]="DEFAULTS",t}(Sw||(An.Propagate=Sw={}));An.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;An.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024});var cm=w((EH,aR)=>{aR.exports={name:"@grpc/grpc-js",version:"1.9.14",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:"^8.13.0 || >=10.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@types/gulp":"^4.0.6","@types/gulp-mocha":"0.0.32","@types/lodash":"^4.14.186","@types/mocha":"^5.2.6","@types/ncp":"^2.0.1","@types/pify":"^3.0.2","@types/semver":"^7.3.9","@typescript-eslint/eslint-plugin":"^5.59.11","@typescript-eslint/parser":"^5.59.11","@typescript-eslint/typescript-estree":"^5.59.11","clang-format":"^1.0.55",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.4",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.3.5","ts-node":"^10.9.1",typescript:"^5.1.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run generate-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs test/fixtures/ -O src/generated/ --grpcLib ../index channelz.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto"},dependencies:{"@grpc/proto-loader":"^0.7.8","@types/node":">=12.12.47"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/*.proto","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var Ye=w($t=>{"use strict";var um,dm,hm,fm;Object.defineProperty($t,"__esModule",{value:!0});$t.isTracerEnabled=$t.trace=$t.log=$t.setLoggerVerbosity=$t.setLogger=$t.getLogger=void 0;var wr=Se(),lR=Me("process"),cR=cm().version,uR={error:(t,...e)=>{console.error("E "+t,...e)},info:(t,...e)=>{console.error("I "+t,...e)},debug:(t,...e)=>{console.error("D "+t,...e)}},Ss=uR,_o=wr.LogVerbosity.ERROR,dR=(dm=(um=process.env.GRPC_NODE_VERBOSITY)!==null&&um!==void 0?um:process.env.GRPC_VERBOSITY)!==null&&dm!==void 0?dm:"";switch(dR.toUpperCase()){case"DEBUG":_o=wr.LogVerbosity.DEBUG;break;case"INFO":_o=wr.LogVerbosity.INFO;break;case"ERROR":_o=wr.LogVerbosity.ERROR;break;case"NONE":_o=wr.LogVerbosity.NONE;break;default:}var hR=()=>Ss;$t.getLogger=hR;var fR=t=>{Ss=t};$t.setLogger=fR;var pR=t=>{_o=t};$t.setLoggerVerbosity=pR;var mR=(t,...e)=>{let n;if(t>=_o){switch(t){case wr.LogVerbosity.DEBUG:n=Ss.debug;break;case wr.LogVerbosity.INFO:n=Ss.info;break;case wr.LogVerbosity.ERROR:n=Ss.error;break}n||(n=Ss.error),n&&n.bind(Ss)(...e)}};$t.log=mR;var gR=(fm=(hm=process.env.GRPC_NODE_TRACE)!==null&&hm!==void 0?hm:process.env.GRPC_TRACE)!==null&&fm!==void 0?fm:"",pm=new Set,Tw=new Set;for(let t of gR.split(","))t.startsWith("-")?Tw.add(t.substring(1)):pm.add(t);var _R=pm.has("all");function yR(t,e,n){Ew(e)&&(0,$t.log)(t,new Date().toISOString()+" | v"+cR+" "+lR.pid+" | "+e+" | "+n)}$t.trace=yR;function Ew(t){return!Tw.has(t)&&(_R||pm.has(t))}$t.isTracerEnabled=Ew});var Au=w(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.getErrorCode=yo.getErrorMessage=void 0;function vR(t){return t instanceof Error?t.message:String(t)}yo.getErrorMessage=vR;function CR(t){return typeof t=="object"&&t!==null&&"code"in t&&typeof t.code=="number"?t.code:null}yo.getErrorCode=CR});var Kt=w(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.Metadata=void 0;var bR=Ye(),wR=Se(),SR=Au(),TR=/^[0-9a-z_.-]+$/,ER=/^[ -~]*$/;function MR(t){return TR.test(t)}function OR(t){return ER.test(t)}function Ow(t){return t.endsWith("-bin")}function DR(t){return!t.startsWith("grpc-")}function ku(t){return t.toLowerCase()}function Mw(t,e){if(!MR(t))throw new Error('Metadata key "'+t+'" contains illegal characters');if(e!=null)if(Ow(t)){if(!Buffer.isBuffer(e))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(e))throw new Error("keys that don't end with '-bin' must have String values");if(!OR(e))throw new Error('Metadata string value "'+e+'" contains illegal characters')}}var mm=class t{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,n){e=ku(e),Mw(e,n),this.internalRepr.set(e,[n])}add(e,n){e=ku(e),Mw(e,n);let i=this.internalRepr.get(e);i===void 0?this.internalRepr.set(e,[n]):i.push(n)}remove(e){e=ku(e),this.internalRepr.delete(e)}get(e){return e=ku(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[n,i]of this.internalRepr)if(i.length>0){let r=i[0];e[n]=Buffer.isBuffer(r)?Buffer.from(r):r}return e}clone(){let e=new t(this.options),n=e.internalRepr;for(let[i,r]of this.internalRepr){let s=r.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);n.set(i,s)}return e}merge(e){for(let[n,i]of e.internalRepr){let r=(this.internalRepr.get(n)||[]).concat(i);this.internalRepr.set(n,r)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[n,i]of this.internalRepr)e[n]=i.map(PR);return e}toJSON(){let e={};for(let[n,i]of this.internalRepr)e[n]=i;return e}static fromHttp2Headers(e){let n=new t;for(let i of Object.keys(e)){if(i.charAt(0)===":")continue;let r=e[i];try{Ow(i)?Array.isArray(r)?r.forEach(s=>{n.add(i,Buffer.from(s,"base64"))}):r!==void 0&&(DR(i)?r.split(",").forEach(s=>{n.add(i,Buffer.from(s.trim(),"base64"))}):n.add(i,Buffer.from(r,"base64"))):Array.isArray(r)?r.forEach(s=>{n.add(i,s)}):r!==void 0&&n.add(i,r)}catch(s){let o=`Failed to add metadata entry ${i}: ${r}. ${(0,SR.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,bR.log)(wR.LogVerbosity.ERROR,o)}}return n}};Ru.Metadata=mm;var PR=t=>Buffer.isBuffer(t)?t.toString("base64"):t});var Cm=w(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.CallCredentials=void 0;var vm=Kt();function IR(t){return"getRequestHeaders"in t&&typeof t.getRequestHeaders=="function"}var vo=class t{static createFromMetadataGenerator(e){return new _m(e)}static createFromGoogleCredential(e){return t.createFromMetadataGenerator((n,i)=>{let r;IR(e)?r=e.getRequestHeaders(n.service_url):r=new Promise((s,o)=>{e.getRequestMetadata(n.service_url,(a,l)=>{if(a){o(a);return}if(!l){o(new Error("Headers not set by metadata plugin"));return}s(l)})}),r.then(s=>{let o=new vm.Metadata;for(let a of Object.keys(s))o.add(a,s[a]);i(null,o)},s=>{i(s)})})}static createEmpty(){return new ym}};Nu.CallCredentials=vo;var gm=class t extends vo{constructor(e){super(),this.creds=e}generateMetadata(e){return T(this,null,function*(){let n=new vm.Metadata,i=yield Promise.all(this.creds.map(r=>r.generateMetadata(e)));for(let r of i)n.merge(r);return n})}compose(e){return new t(this.creds.concat([e]))}_equals(e){return this===e?!0:e instanceof t?this.creds.every((n,i)=>n._equals(e.creds[i])):!1}},_m=class t extends vo{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((n,i)=>{this.metadataGenerator(e,(r,s)=>{s!==void 0?n(s):i(r)})})}compose(e){return new gm([this,e])}_equals(e){return this===e?!0:e instanceof t?this.metadataGenerator===e.metadataGenerator:!1}},ym=class t extends vo{generateMetadata(e){return Promise.resolve(new vm.Metadata)}compose(e){return e}_equals(e){return e instanceof t}}});var wm=w(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.getDefaultRootsData=Co.CIPHER_SUITES=void 0;var xR=Me("fs");Co.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var Dw=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,bm=null;function AR(){return Dw?(bm===null&&(bm=xR.readFileSync(Dw)),bm):null}Co.getDefaultRootsData=AR});var Bu=w(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.ChannelCredentials=void 0;var kR=Me("tls"),RR=Cm(),Pw=wm();function Sm(t,e){if(t&&!(t instanceof Buffer))throw new TypeError(`${e}, if provided, must be a Buffer.`)}var bo=class{constructor(e){this.callCredentials=e||RR.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,n,i,r){var s;if(Sm(e,"Root certificate"),Sm(n,"Private key"),Sm(i,"Certificate chain"),n&&!i)throw new Error("Private key must be given with accompanying certificate chain");if(!n&&i)throw new Error("Certificate chain must be given with accompanying private key");let o=(0,kR.createSecureContext)({ca:(s=e??(0,Pw.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,key:n??void 0,cert:i??void 0,ciphers:Pw.CIPHER_SUITES});return new Fu(o,r??{})}static createFromSecureContext(e,n){return new Fu(e,n??{})}static createInsecure(){return new Tm}};Lu.ChannelCredentials=bo;var Tm=class t extends bo{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof t}},Fu=class t extends bo{constructor(e,n){super(),this.secureContext=e,this.verifyOptions=n,this.connectionOptions={secureContext:e},n?.checkServerIdentity&&(this.connectionOptions.checkServerIdentity=n.checkServerIdentity)}compose(e){let n=this.callCredentials.compose(e);return new Em(this,n)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof t?this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity:!1}},Em=class t extends bo{constructor(e,n){super(n),this.channelCredentials=e}compose(e){let n=this.callCredentials.compose(e);return new t(this.channelCredentials,n)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof t?this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials):!1}}});var Tr=w(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.validateLoadBalancingConfig=kt.getFirstUsableConfig=kt.isLoadBalancerNameRegistered=kt.createLoadBalancer=kt.registerDefaultLoadBalancerType=kt.registerLoadBalancerType=kt.createChildChannelControlHelper=void 0;function NR(t,e){var n,i,r,s,o,a,l,c,u,f;return{createSubchannel:(i=(n=e.createSubchannel)===null||n===void 0?void 0:n.bind(e))!==null&&i!==void 0?i:t.createSubchannel.bind(t),updateState:(s=(r=e.updateState)===null||r===void 0?void 0:r.bind(e))!==null&&s!==void 0?s:t.updateState.bind(t),requestReresolution:(a=(o=e.requestReresolution)===null||o===void 0?void 0:o.bind(e))!==null&&a!==void 0?a:t.requestReresolution.bind(t),addChannelzChild:(c=(l=e.addChannelzChild)===null||l===void 0?void 0:l.bind(e))!==null&&c!==void 0?c:t.addChannelzChild.bind(t),removeChannelzChild:(f=(u=e.removeChannelzChild)===null||u===void 0?void 0:u.bind(e))!==null&&f!==void 0?f:t.removeChannelzChild.bind(t)}}kt.createChildChannelControlHelper=NR;var Sr={},Mm=null;function FR(t,e,n){Sr[t]={LoadBalancer:e,LoadBalancingConfig:n}}kt.registerLoadBalancerType=FR;function LR(t){Mm=t}kt.registerDefaultLoadBalancerType=LR;function BR(t,e){let n=t.getLoadBalancerName();return n in Sr?new Sr[n].LoadBalancer(e):null}kt.createLoadBalancer=BR;function VR(t){return t in Sr}kt.isLoadBalancerNameRegistered=VR;function UR(t,e=!1){for(let n of t)if(n.getLoadBalancerName()in Sr)return n;return e&&Mm?new Sr[Mm].LoadBalancingConfig:null}kt.getFirstUsableConfig=UR;function zR(t){if(!(t!==null&&typeof t=="object"))throw new Error("Load balancing config must be an object");let e=Object.keys(t);if(e.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let n=e[0];if(n in Sr)return Sr[n].LoadBalancingConfig.createFromJson(t[n]);throw new Error(`Unrecognized load balancing config name ${n}`)}kt.validateLoadBalancingConfig=zR});var Om=w(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.extractAndSelectServiceConfig=Er.validateServiceConfig=Er.validateRetryThrottling=void 0;var qR=Me("os"),Vu=Se(),jR=Tr(),Uu=/^\d+(\.\d{1,9})?s$/,GR="node";function HR(t){if("service"in t&&t.service!==""){if(typeof t.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof t.service}`);if("method"in t&&t.method!==""){if(typeof t.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof t.service}`);return{service:t.service,method:t.method}}else return{service:t.service}}else{if("method"in t&&t.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return{}}}function WR(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in t)||typeof t.initialBackoff!="string"||!Uu.test(t.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in t)||typeof t.maxBackoff!="string"||!Uu.test(t.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in t)||typeof t.backoffMultiplier!="number"||t.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in t&&Array.isArray(t.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(t.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let e of t.retryableStatusCodes)if(typeof e=="number"){if(!Object.values(Vu.Status).includes(e))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(Vu.Status).includes(e.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:t.maxAttempts,initialBackoff:t.initialBackoff,maxBackoff:t.maxBackoff,backoffMultiplier:t.backoffMultiplier,retryableStatusCodes:t.retryableStatusCodes}}function $R(t){if(!("maxAttempts"in t)||!Number.isInteger(t.maxAttempts)||t.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in t&&(typeof t.hedgingDelay!="string"||!Uu.test(t.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in t&&Array.isArray(t.nonFatalStatusCodes))for(let n of t.nonFatalStatusCodes)if(typeof n=="number"){if(!Object.values(Vu.Status).includes(n))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof n=="string"){if(!Object.values(Vu.Status).includes(n.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let e={maxAttempts:t.maxAttempts};return t.hedgingDelay&&(e.hedgingDelay=t.hedgingDelay),t.nonFatalStatusCodes&&(e.nonFatalStatusCodes=t.nonFatalStatusCodes),e}function KR(t){var e;let n={name:[]};if(!("name"in t)||!Array.isArray(t.name))throw new Error("Invalid method config: invalid name array");for(let i of t.name)n.name.push(HR(i));if("waitForReady"in t){if(typeof t.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");n.waitForReady=t.waitForReady}if("timeout"in t)if(typeof t.timeout=="object"){if(!("seconds"in t.timeout)||typeof t.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in t.timeout)||typeof t.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");n.timeout=t.timeout}else if(typeof t.timeout=="string"&&Uu.test(t.timeout)){let i=t.timeout.substring(0,t.timeout.length-1).split(".");n.timeout={seconds:i[0]|0,nanos:((e=i[1])!==null&&e!==void 0?e:0)|0}}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in t){if(typeof t.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");n.maxRequestBytes=t.maxRequestBytes}if("maxResponseBytes"in t){if(typeof t.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");n.maxResponseBytes=t.maxResponseBytes}if("retryPolicy"in t){if("hedgingPolicy"in t)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");n.retryPolicy=WR(t.retryPolicy)}else"hedgingPolicy"in t&&(n.hedgingPolicy=$R(t.hedgingPolicy));return n}function Iw(t){if(!("maxTokens"in t)||typeof t.maxTokens!="number"||t.maxTokens<=0||t.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in t)||typeof t.tokenRatio!="number"||t.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+t.maxTokens.toFixed(3),tokenRatio:+t.tokenRatio.toFixed(3)}}Er.validateRetryThrottling=Iw;function xw(t){let e={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in t)if(typeof t.loadBalancingPolicy=="string")e.loadBalancingPolicy=t.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in t)if(Array.isArray(t.loadBalancingConfig))for(let i of t.loadBalancingConfig)e.loadBalancingConfig.push((0,jR.validateLoadBalancingConfig)(i));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in t&&Array.isArray(t.methodConfig))for(let i of t.methodConfig)e.methodConfig.push(KR(i));"retryThrottling"in t&&(e.retryThrottling=Iw(t.retryThrottling));let n=[];for(let i of e.methodConfig)for(let r of i.name){for(let s of n)if(r.service===s.service&&r.method===s.method)throw new Error(`Invalid service config: duplicate name ${r.service}/${r.method}`);n.push(r)}return e}Er.validateServiceConfig=xw;function QR(t){if(!("serviceConfig"in t))throw new Error("Invalid service config choice: missing service config");let e={serviceConfig:xw(t.serviceConfig)};if("clientLanguage"in t)if(Array.isArray(t.clientLanguage)){e.clientLanguage=[];for(let i of t.clientLanguage)if(typeof i=="string")e.clientLanguage.push(i);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in t)if(Array.isArray(t.clientHostname)){e.clientHostname=[];for(let i of t.clientHostname)if(typeof i=="string")e.clientHostname.push(i);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in t)if(typeof t.percentage=="number"&&0<=t.percentage&&t.percentage<=100)e.percentage=t.percentage;else throw new Error("Invalid service config choice: invalid percentage");let n=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let i in t)if(!n.includes(i))throw new Error(`Invalid service config choice: unexpected field ${i}`);return e}function YR(t,e){if(!Array.isArray(t))throw new Error("Invalid service config list");for(let n of t){let i=QR(n);if(!(typeof i.percentage=="number"&&e>i.percentage)){if(Array.isArray(i.clientHostname)){let r=!1;for(let s of i.clientHostname)s===qR.hostname()&&(r=!0);if(!r)continue}if(Array.isArray(i.clientLanguage)){let r=!1;for(let s of i.clientLanguage)s===GR&&(r=!0);if(!r)continue}return i.serviceConfig}}throw new Error("No matching service config found")}function JR(t,e){for(let n of t)if(n.length>0&&n[0].startsWith("grpc_config=")){let i=n.join("").substring(12),r=JSON.parse(i);return YR(r,e)}return null}Er.extractAndSelectServiceConfig=JR});var kn=w(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.ConnectivityState=void 0;var Aw=function(t){return t[t.IDLE=0]="IDLE",t[t.CONNECTING=1]="CONNECTING",t[t.READY=2]="READY",t[t.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",t[t.SHUTDOWN=4]="SHUTDOWN",t}(Aw||(zu.ConnectivityState=Aw={}))});var gn=w(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.uriToString=Mr.splitHostPort=Mr.parseUri=void 0;var XR=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function ZR(t){let e=XR.exec(t);return e===null?null:{scheme:e[1],authority:e[2],path:e[3]}}Mr.parseUri=ZR;var kw=/^\d+$/;function e2(t){if(t.startsWith("[")){let e=t.indexOf("]");if(e===-1)return null;let n=t.substring(1,e);if(n.indexOf(":")===-1)return null;if(t.length>e+1)if(t[e+1]===":"){let i=t.substring(e+2);return kw.test(i)?{host:n,port:+i}:null}else return null;else return{host:n}}else{let e=t.split(":");return e.length===2?kw.test(e[1])?{host:e[0],port:+e[1]}:null:{host:t}}}Mr.splitHostPort=e2;function t2(t){let e="";return t.scheme!==void 0&&(e+=t.scheme+":"),t.authority!==void 0&&(e+="//"+t.authority+"/"),e+=t.path,e}Mr.uriToString=t2});var bi=w(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.mapUriDefaultScheme=Rn.getDefaultAuthority=Rn.createResolver=Rn.registerDefaultScheme=Rn.registerResolver=void 0;var Pm=gn(),wo={},Dm=null;function n2(t,e){wo[t]=e}Rn.registerResolver=n2;function i2(t){Dm=t}Rn.registerDefaultScheme=i2;function r2(t,e,n){if(t.scheme!==void 0&&t.scheme in wo)return new wo[t.scheme](t,e,n);throw new Error(`No resolver could be created for target ${(0,Pm.uriToString)(t)}`)}Rn.createResolver=r2;function s2(t){if(t.scheme!==void 0&&t.scheme in wo)return wo[t.scheme].getDefaultAuthority(t);throw new Error(`Invalid target ${(0,Pm.uriToString)(t)}`)}Rn.getDefaultAuthority=s2;function o2(t){return t.scheme===void 0||!(t.scheme in wo)?Dm!==null?{scheme:Dm,authority:void 0,path:(0,Pm.uriToString)(t)}:null:t}Rn.mapUriDefaultScheme=o2});var Dr=w(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.QueuePicker=Or.UnavailablePicker=Or.PickResultType=void 0;var a2=Kt(),l2=Se(),qu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.QUEUE=1]="QUEUE",t[t.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",t[t.DROP=3]="DROP",t}(qu||(Or.PickResultType=qu={})),Im=class{constructor(e){this.status=Object.assign({code:l2.Status.UNAVAILABLE,details:"No connection established",metadata:new a2.Metadata},e)}pick(e){return{pickResultType:qu.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};Or.UnavailablePicker=Im;var xm=class{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:qu.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};Or.QueuePicker=xm});var gl=w(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.BackoffTimeout=void 0;var c2=1e3,u2=1.6,d2=12e4,h2=.2;function f2(t,e){return Math.random()*(e-t)+t}var Am=class{constructor(e,n){this.callback=e,this.initialDelay=c2,this.multiplier=u2,this.maxDelay=d2,this.jitter=h2,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,n&&(n.initialDelay&&(this.initialDelay=n.initialDelay),n.multiplier&&(this.multiplier=n.multiplier),n.jitter&&(this.jitter=n.jitter),n.maxDelay&&(this.maxDelay=n.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var n,i;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||(i=(n=this.timerId).unref)===null||i===void 0||i.call(n)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),n=e*this.jitter;this.nextDelay=e+f2(-n,n)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,n=this.startTime;n.setMilliseconds(n.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<n?this.runTimer(n.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,n;this.hasRef=!0,(n=(e=this.timerId).ref)===null||n===void 0||n.call(e)}unref(){var e,n;this.hasRef=!1,(n=(e=this.timerId).unref)===null||n===void 0||n.call(e)}getEndTime(){return this.endTime}};ju.BackoffTimeout=Am});var Hu=w(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.ChildLoadBalancerHandler=void 0;var p2=Tr(),m2=kn(),g2="child_load_balancer_helper",km=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(n){this.parent=n,this.child=null}createSubchannel(n,i){return this.parent.channelControlHelper.createSubchannel(n,i)}updateState(n,i){var r;if(this.calledByPendingChild()){if(n===m2.ConnectivityState.CONNECTING)return;(r=this.parent.currentChild)===null||r===void 0||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(n,i)}requestReresolution(){var n;let i=(n=this.parent.pendingChild)!==null&&n!==void 0?n:this.parent.currentChild;this.child===i&&this.parent.channelControlHelper.requestReresolution()}setChild(n){this.child=n}addChannelzChild(n){this.parent.channelControlHelper.addChannelzChild(n)}removeChannelzChild(n){this.parent.channelControlHelper.removeChannelzChild(n)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,n){return e.getLoadBalancerName()!==n.getLoadBalancerName()}updateAddressList(e,n,i){let r;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,n)){let s=new this.ChildPolicyHelper(this),o=(0,p2.createLoadBalancer)(n,s);s.setChild(o),this.currentChild===null?(this.currentChild=o,r=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=o,r=this.pendingChild)}else this.pendingChild===null?r=this.currentChild:r=this.pendingChild;this.latestConfig=n,r.updateAddressList(e,n,i)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return g2}};Gu.ChildLoadBalancerHandler=km});var Nw=w(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.ResolvingLoadBalancer=void 0;var _2=Tr(),y2=Om(),sn=kn(),v2=bi(),So=Dr(),C2=gl(),Rm=Se(),b2=Kt(),w2=Ye(),S2=Se(),T2=gn(),E2=Hu(),M2="resolving_load_balancer";function Rw(t){w2.trace(S2.LogVerbosity.DEBUG,M2,t)}var O2=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function D2(t,e,n,i){for(let r of n.name)switch(i){case"EMPTY":if(!r.service&&!r.method)return!0;break;case"SERVICE":if(r.service===t&&!r.method)return!0;break;case"SERVICE_AND_METHOD":if(r.service===t&&r.method===e)return!0}return!1}function P2(t,e,n,i){for(let r of n)if(D2(t,e,r,i))return r;return null}function I2(t){return function(n,i){var r,s;let o=n.split("/").filter(c=>c.length>0),a=(r=o[0])!==null&&r!==void 0?r:"",l=(s=o[1])!==null&&s!==void 0?s:"";if(t&&t.methodConfig)for(let c of O2){let u=P2(a,l,t.methodConfig,c);if(u)return{methodConfig:u,pickInformation:{},status:Rm.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:Rm.Status.OK,dynamicFilterFactories:[]}}}var Nm=class{constructor(e,n,i,r,s){this.target=e,this.channelControlHelper=n,this.onSuccessfulResolution=r,this.onFailedResolution=s,this.latestChildState=sn.ConnectivityState.IDLE,this.latestChildPicker=new So.QueuePicker(this),this.currentState=sn.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,i["grpc.service_config"]?this.defaultServiceConfig=(0,y2.validateServiceConfig)(JSON.parse(i["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(sn.ConnectivityState.IDLE,new So.QueuePicker(this)),this.childLoadBalancer=new E2.ChildLoadBalancerHandler({createSubchannel:n.createSubchannel.bind(n),requestReresolution:()=>{this.backoffTimeout.isRunning()?(Rw("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(a,l)=>{this.latestChildState=a,this.latestChildPicker=l,this.updateState(a,l)},addChannelzChild:n.addChannelzChild.bind(n),removeChannelzChild:n.removeChannelzChild.bind(n)}),this.innerResolver=(0,v2.createResolver)(e,{onSuccessfulResolution:(a,l,c,u,f)=>{var g;this.backoffTimeout.stop(),this.backoffTimeout.reset();let _=null;l===null?c===null?(this.previousServiceConfig=null,_=this.defaultServiceConfig):this.previousServiceConfig===null?this.handleResolutionFailure(c):_=this.previousServiceConfig:(_=l,this.previousServiceConfig=l);let C=(g=_?.loadBalancingConfig)!==null&&g!==void 0?g:[],v=(0,_2.getFirstUsableConfig)(C,!0);if(v===null){this.handleResolutionFailure({code:Rm.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new b2.Metadata});return}this.childLoadBalancer.updateAddressList(a,v,f);let b=_??this.defaultServiceConfig;this.onSuccessfulResolution(b,u??I2(b))},onError:a=>{this.handleResolutionFailure(a)}},i);let o={initialDelay:i["grpc.initial_reconnect_backoff_ms"],maxDelay:i["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new C2.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},o),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===sn.ConnectivityState.IDLE&&this.updateState(sn.ConnectivityState.CONNECTING,new So.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,n){Rw((0,T2.uriToString)(this.target)+" "+sn.ConnectivityState[this.currentState]+" -> "+sn.ConnectivityState[e]),e===sn.ConnectivityState.IDLE&&(n=new So.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,n)}handleResolutionFailure(e){this.latestChildState===sn.ConnectivityState.IDLE&&(this.updateState(sn.ConnectivityState.TRANSIENT_FAILURE,new So.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===sn.ConnectivityState.IDLE||this.currentState===sn.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,n){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=sn.ConnectivityState.IDLE,this.latestChildPicker=new So.QueuePicker(this),this.currentState=sn.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}};Wu.ResolvingLoadBalancer=Nm});var Fw=w(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.channelOptionsEqual=To.recognizedOptions=void 0;To.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0};function x2(t,e){let n=Object.keys(t).sort(),i=Object.keys(e).sort();if(n.length!==i.length)return!1;for(let r=0;r<n.length;r+=1)if(n[r]!==i[r]||t[n[r]]!==e[i[r]])return!1;return!0}To.channelOptionsEqual=x2});var Si=w(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.stringToSubchannelAddress=wi.subchannelAddressToString=wi.subchannelAddressEqual=wi.isTcpSubchannelAddress=void 0;var A2=Me("net");function _l(t){return"port"in t}wi.isTcpSubchannelAddress=_l;function k2(t,e){return!t&&!e?!0:!t||!e?!1:_l(t)?_l(e)&&t.host===e.host&&t.port===e.port:!_l(e)&&t.path===e.path}wi.subchannelAddressEqual=k2;function R2(t){return _l(t)?t.host+":"+t.port:t.path}wi.subchannelAddressToString=R2;var N2=443;function F2(t,e){return(0,A2.isIP)(t)?{host:t,port:e??N2}:{path:t}}wi.stringToSubchannelAddress=F2});var $u=w(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.addAdminServicesToServer=Eo.registerAdminService=void 0;var Lw=[];function L2(t,e){Lw.push({getServiceDefinition:t,getHandlers:e})}Eo.registerAdminService=L2;function B2(t){for(let{getServiceDefinition:e,getHandlers:n}of Lw)t.addService(e(),n())}Eo.addAdminServicesToServer=B2});var Bw=w(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.ClientDuplexStreamImpl=Nn.ClientWritableStreamImpl=Nn.ClientReadableStreamImpl=Nn.ClientUnaryCallImpl=Nn.callErrorFromStatus=void 0;var V2=Me("events"),Um=Me("stream"),yl=Se();function U2(t,e){let n=`${t.code} ${yl.Status[t.code]}: ${t.details}`,r=`${new Error(n).stack}
for call at
${e}`;return Object.assign(new Error(n),t,{stack:r})}Nn.callErrorFromStatus=U2;var Fm=class extends V2.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(yl.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}};Nn.ClientUnaryCallImpl=Fm;var Lm=class extends Um.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(yl.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_read(e){var n;(n=this.call)===null||n===void 0||n.startRead()}};Nn.ClientReadableStreamImpl=Lm;var Bm=class extends Um.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(yl.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_write(e,n,i){var r;let s={callback:i},o=Number(n);Number.isNaN(o)||(s.flags=o),(r=this.call)===null||r===void 0||r.sendMessageWithContext(s,e)}_final(e){var n;(n=this.call)===null||n===void 0||n.halfClose(),e()}};Nn.ClientWritableStreamImpl=Bm;var Vm=class extends Um.Duplex{constructor(e,n){super({objectMode:!0}),this.serialize=e,this.deserialize=n}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(yl.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,n;return(n=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:"unknown"}_read(e){var n;(n=this.call)===null||n===void 0||n.startRead()}_write(e,n,i){var r;let s={callback:i},o=Number(n);Number.isNaN(o)||(s.flags=o),(r=this.call)===null||r===void 0||r.sendMessageWithContext(s,e)}_final(e){var n;(n=this.call)===null||n===void 0||n.halfClose(),e()}};Nn.ClientDuplexStreamImpl=Vm});var Vw=w(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.InterceptingListenerImpl=Mo.isInterceptingListener=void 0;function z2(t){return t.onReceiveMetadata!==void 0&&t.onReceiveMetadata.length===1}Mo.isInterceptingListener=z2;var zm=class{constructor(e,n){this.listener=e,this.nextListener=n,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,n=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(n),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,n=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=n,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(n),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,n=>{this.processingMetadata||this.processingMessage?this.pendingStatus=n:this.nextListener.onReceiveStatus(n)})}};Mo.InterceptingListenerImpl=zm});var Km=w(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.getInterceptingCall=Fn.InterceptingCall=Fn.RequesterBuilder=Fn.ListenerBuilder=Fn.InterceptorConfigurationError=void 0;var q2=Kt(),Uw=Vw(),zw=Se(),qw=Au(),Cl=class t extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,t)}};Fn.InterceptorConfigurationError=Cl;var jm=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};Fn.ListenerBuilder=jm;var Gm=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};Fn.RequesterBuilder=Gm;var qm={onReceiveMetadata:(t,e)=>{e(t)},onReceiveMessage:(t,e)=>{e(t)},onReceiveStatus:(t,e)=>{e(t)}},vl={start:(t,e,n)=>{n(t,e)},sendMessage:(t,e)=>{e(t)},halfClose:t=>{t()},cancel:t=>{t()}},Hm=class{constructor(e,n){var i,r,s,o;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,n?this.requester={start:(i=n.start)!==null&&i!==void 0?i:vl.start,sendMessage:(r=n.sendMessage)!==null&&r!==void 0?r:vl.sendMessage,halfClose:(s=n.halfClose)!==null&&s!==void 0?s:vl.halfClose,cancel:(o=n.cancel)!==null&&o!==void 0?o:vl.cancel}:this.requester=vl}cancelWithStatus(e,n){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,n)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,n){var i,r,s,o,a,l;let c={onReceiveMetadata:(r=(i=n?.onReceiveMetadata)===null||i===void 0?void 0:i.bind(n))!==null&&r!==void 0?r:u=>{},onReceiveMessage:(o=(s=n?.onReceiveMessage)===null||s===void 0?void 0:s.bind(n))!==null&&o!==void 0?o:u=>{},onReceiveStatus:(l=(a=n?.onReceiveStatus)===null||a===void 0?void 0:a.bind(n))!==null&&l!==void 0?l:u=>{}};this.processingMetadata=!0,this.requester.start(e,c,(u,f)=>{var g,_,C;this.processingMetadata=!1;let v;if((0,Uw.isInterceptingListener)(f))v=f;else{let b={onReceiveMetadata:(g=f.onReceiveMetadata)!==null&&g!==void 0?g:qm.onReceiveMetadata,onReceiveMessage:(_=f.onReceiveMessage)!==null&&_!==void 0?_:qm.onReceiveMessage,onReceiveStatus:(C=f.onReceiveStatus)!==null&&C!==void 0?C:qm.onReceiveStatus};v=new Uw.InterceptingListenerImpl(b,c)}this.nextCall.start(u,v),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,n){this.processingMessage=!0,this.requester.sendMessage(n,i=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=n):(this.nextCall.sendMessageWithContext(e,i),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}};Fn.InterceptingCall=Hm;function j2(t,e,n){var i,r;let s=(i=n.deadline)!==null&&i!==void 0?i:1/0,o=n.host,a=(r=n.parent)!==null&&r!==void 0?r:null,l=n.propagate_flags,c=n.credentials,u=t.createCall(e,s,o,a,l);return c&&u.setCredentials(c),u}var Ku=class{constructor(e,n){this.call=e,this.methodDefinition=n}cancelWithStatus(e,n){this.call.cancelWithStatus(e,n)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,n){let i;try{i=this.methodDefinition.requestSerialize(n)}catch(r){this.call.cancelWithStatus(zw.Status.INTERNAL,`Request message serialization failure: ${(0,qw.getErrorMessage)(r)}`);return}this.call.sendMessageWithContext(e,i)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,n){let i=null;this.call.start(e,{onReceiveMetadata:r=>{var s;(s=n?.onReceiveMetadata)===null||s===void 0||s.call(n,r)},onReceiveMessage:r=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(r)}catch(a){i={code:zw.Status.INTERNAL,details:`Response message parsing error: ${(0,qw.getErrorMessage)(a)}`,metadata:new q2.Metadata},this.call.cancelWithStatus(i.code,i.details);return}(s=n?.onReceiveMessage)===null||s===void 0||s.call(n,o)},onReceiveStatus:r=>{var s,o;i?(s=n?.onReceiveStatus)===null||s===void 0||s.call(n,i):(o=n?.onReceiveStatus)===null||o===void 0||o.call(n,r)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}},Wm=class extends Ku{constructor(e,n){super(e,n)}start(e,n){var i,r;let s=!1,o={onReceiveMetadata:(r=(i=n?.onReceiveMetadata)===null||i===void 0?void 0:i.bind(n))!==null&&r!==void 0?r:a=>{},onReceiveMessage:a=>{var l;s=!0,(l=n?.onReceiveMessage)===null||l===void 0||l.call(n,a)},onReceiveStatus:a=>{var l,c;s||(l=n?.onReceiveMessage)===null||l===void 0||l.call(n,null),(c=n?.onReceiveStatus)===null||c===void 0||c.call(n,a)}};super.start(e,o),this.call.startRead()}},$m=class extends Ku{};function G2(t,e,n){let i=j2(t,n.path,e);return n.responseStream?new $m(i,n):new Wm(i,n)}function H2(t,e,n,i){if(t.clientInterceptors.length>0&&t.clientInterceptorProviders.length>0)throw new Cl("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(t.callInterceptors.length>0&&t.callInterceptorProviders.length>0)throw new Cl("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let r=[];t.callInterceptors.length>0||t.callInterceptorProviders.length>0?r=[].concat(t.callInterceptors,t.callInterceptorProviders.map(a=>a(e))).filter(a=>a):r=[].concat(t.clientInterceptors,t.clientInterceptorProviders.map(a=>a(e))).filter(a=>a);let s=Object.assign({},n,{method_definition:e});return r.reduceRight((a,l)=>c=>l(c,a),a=>G2(i,a,e))(s)}Fn.getInterceptingCall=H2});var Jm=w(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.Client=void 0;var Ti=Bw(),W2=Xm(),$2=kn(),Pr=Se(),Oo=Kt(),Qu=Km(),Xn=Symbol(),Do=Symbol(),Po=Symbol(),Xi=Symbol();function Qm(t){return typeof t=="function"}function Io(t){return t.stack.split(`
`).slice(1).join(`
`)}var Ym=class{constructor(e,n,i={}){var r,s;if(i=Object.assign({},i),this[Do]=(r=i.interceptors)!==null&&r!==void 0?r:[],delete i.interceptors,this[Po]=(s=i.interceptor_providers)!==null&&s!==void 0?s:[],delete i.interceptor_providers,this[Do].length>0&&this[Po].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[Xi]=i.callInvocationTransformer,delete i.callInvocationTransformer,i.channelOverride)this[Xn]=i.channelOverride;else if(i.channelFactoryOverride){let o=i.channelFactoryOverride;delete i.channelFactoryOverride,this[Xn]=o(e,n,i)}else this[Xn]=new W2.ChannelImplementation(e,n,i)}close(){this[Xn].close()}getChannel(){return this[Xn]}waitForReady(e,n){let i=r=>{if(r){n(new Error("Failed to connect before the deadline"));return}let s;try{s=this[Xn].getConnectivityState(!0)}catch{n(new Error("The channel has been closed"));return}if(s===$2.ConnectivityState.READY)n();else try{this[Xn].watchConnectivityState(s,e,i)}catch{n(new Error("The channel has been closed"))}};setImmediate(i)}checkOptionalUnaryResponseArguments(e,n,i){if(Qm(e))return{metadata:new Oo.Metadata,options:{},callback:e};if(Qm(n))return e instanceof Oo.Metadata?{metadata:e,options:{},callback:n}:{metadata:new Oo.Metadata,options:e,callback:n};if(!(e instanceof Oo.Metadata&&n instanceof Object&&Qm(i)))throw new Error("Incorrect arguments passed");return{metadata:e,options:n,callback:i}}makeUnaryRequest(e,n,i,r,s,o,a){var l,c;let u=this.checkOptionalUnaryResponseArguments(s,o,a),f={path:e,requestStream:!1,responseStream:!1,requestSerialize:n,responseDeserialize:i},g={argument:r,metadata:u.metadata,call:new Ti.ClientUnaryCallImpl,channel:this[Xn],methodDefinition:f,callOptions:u.options,callback:u.callback};this[Xi]&&(g=this[Xi](g));let _=g.call,C={clientInterceptors:this[Do],clientInterceptorProviders:this[Po],callInterceptors:(l=g.callOptions.interceptors)!==null&&l!==void 0?l:[],callInterceptorProviders:(c=g.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},v=(0,Qu.getInterceptingCall)(C,g.methodDefinition,g.callOptions,g.channel);_.call=v;let b=null,A=!1,S=new Error;return v.start(g.metadata,{onReceiveMetadata:R=>{_.emit("metadata",R)},onReceiveMessage(R){b!==null&&v.cancelWithStatus(Pr.Status.INTERNAL,"Too many responses received"),b=R},onReceiveStatus(R){if(!A){if(A=!0,R.code===Pr.Status.OK)if(b===null){let k=Io(S);g.callback((0,Ti.callErrorFromStatus)({code:Pr.Status.INTERNAL,details:"No message received",metadata:R.metadata},k))}else g.callback(null,b);else{let k=Io(S);g.callback((0,Ti.callErrorFromStatus)(R,k))}S=null,_.emit("status",R)}}}),v.sendMessage(r),v.halfClose(),_}makeClientStreamRequest(e,n,i,r,s,o){var a,l;let c=this.checkOptionalUnaryResponseArguments(r,s,o),u={path:e,requestStream:!0,responseStream:!1,requestSerialize:n,responseDeserialize:i},f={metadata:c.metadata,call:new Ti.ClientWritableStreamImpl(n),channel:this[Xn],methodDefinition:u,callOptions:c.options,callback:c.callback};this[Xi]&&(f=this[Xi](f));let g=f.call,_={clientInterceptors:this[Do],clientInterceptorProviders:this[Po],callInterceptors:(a=f.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=f.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},C=(0,Qu.getInterceptingCall)(_,f.methodDefinition,f.callOptions,f.channel);g.call=C;let v=null,b=!1,A=new Error;return C.start(f.metadata,{onReceiveMetadata:S=>{g.emit("metadata",S)},onReceiveMessage(S){v!==null&&C.cancelWithStatus(Pr.Status.INTERNAL,"Too many responses received"),v=S},onReceiveStatus(S){if(!b){if(b=!0,S.code===Pr.Status.OK)if(v===null){let R=Io(A);f.callback((0,Ti.callErrorFromStatus)({code:Pr.Status.INTERNAL,details:"No message received",metadata:S.metadata},R))}else f.callback(null,v);else{let R=Io(A);f.callback((0,Ti.callErrorFromStatus)(S,R))}A=null,g.emit("status",S)}}}),g}checkMetadataAndOptions(e,n){let i,r;return e instanceof Oo.Metadata?(i=e,n?r=n:r={}):(e?r=e:r={},i=new Oo.Metadata),{metadata:i,options:r}}makeServerStreamRequest(e,n,i,r,s,o){var a,l;let c=this.checkMetadataAndOptions(s,o),u={path:e,requestStream:!1,responseStream:!0,requestSerialize:n,responseDeserialize:i},f={argument:r,metadata:c.metadata,call:new Ti.ClientReadableStreamImpl(i),channel:this[Xn],methodDefinition:u,callOptions:c.options};this[Xi]&&(f=this[Xi](f));let g=f.call,_={clientInterceptors:this[Do],clientInterceptorProviders:this[Po],callInterceptors:(a=f.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=f.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},C=(0,Qu.getInterceptingCall)(_,f.methodDefinition,f.callOptions,f.channel);g.call=C;let v=!1,b=new Error;return C.start(f.metadata,{onReceiveMetadata(A){g.emit("metadata",A)},onReceiveMessage(A){g.push(A)},onReceiveStatus(A){if(!v){if(v=!0,g.push(null),A.code!==Pr.Status.OK){let S=Io(b);g.emit("error",(0,Ti.callErrorFromStatus)(A,S))}b=null,g.emit("status",A)}}}),C.sendMessage(r),C.halfClose(),g}makeBidiStreamRequest(e,n,i,r,s){var o,a;let l=this.checkMetadataAndOptions(r,s),c={path:e,requestStream:!0,responseStream:!0,requestSerialize:n,responseDeserialize:i},u={metadata:l.metadata,call:new Ti.ClientDuplexStreamImpl(n,i),channel:this[Xn],methodDefinition:c,callOptions:l.options};this[Xi]&&(u=this[Xi](u));let f=u.call,g={clientInterceptors:this[Do],clientInterceptorProviders:this[Po],callInterceptors:(o=u.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(a=u.callOptions.interceptor_providers)!==null&&a!==void 0?a:[]},_=(0,Qu.getInterceptingCall)(g,u.methodDefinition,u.callOptions,u.channel);f.call=_;let C=!1,v=new Error;return _.start(u.metadata,{onReceiveMetadata(b){f.emit("metadata",b)},onReceiveMessage(b){f.push(b)},onReceiveStatus(b){if(!C){if(C=!0,f.push(null),b.code!==Pr.Status.OK){let A=Io(v);f.emit("error",(0,Ti.callErrorFromStatus)(b,A))}v=null,f.emit("status",b)}}}),f}};Yu.Client=Ym});var eg=w(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.loadPackageDefinition=xo.makeClientConstructor=void 0;var bl=Jm(),K2={unary:bl.Client.prototype.makeUnaryRequest,server_stream:bl.Client.prototype.makeServerStreamRequest,client_stream:bl.Client.prototype.makeClientStreamRequest,bidi:bl.Client.prototype.makeBidiStreamRequest};function Zm(t){return["__proto__","prototype","constructor"].includes(t)}function jw(t,e,n){n||(n={});class i extends bl.Client{}return Object.keys(t).forEach(r=>{if(Zm(r))return;let s=t[r],o;if(typeof r=="string"&&r.charAt(0)==="$")throw new Error("Method names cannot start with $");s.requestStream?s.responseStream?o="bidi":o="client_stream":s.responseStream?o="server_stream":o="unary";let a=s.requestSerialize,l=s.responseDeserialize,c=Q2(K2[o],s.path,a,l);i.prototype[r]=c,Object.assign(i.prototype[r],s),s.originalName&&!Zm(s.originalName)&&(i.prototype[s.originalName]=i.prototype[r])}),i.service=t,i.serviceName=e,i}xo.makeClientConstructor=jw;function Q2(t,e,n,i){return function(...r){return t.call(this,e,n,i,...r)}}function Y2(t){return"format"in t}function J2(t){let e={};for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let i=t[n],r=n.split(".");if(r.some(a=>Zm(a)))continue;let s=r[r.length-1],o=e;for(let a of r.slice(0,-1))o[a]||(o[a]={}),o=o[a];Y2(i)?o[s]=i:o[s]=jw(i,s,{})}return e}xo.loadPackageDefinition=J2});var pS=w((JH,fS)=>{"use strict";var X2=1/0,Z2="[object Symbol]",eN=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tN=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xu="\\ud800-\\udfff",Jw="\\u0300-\\u036f\\ufe20-\\ufe23",Xw="\\u20d0-\\u20f0",Zw="\\u2700-\\u27bf",eS="a-z\\xdf-\\xf6\\xf8-\\xff",nN="\\xac\\xb1\\xd7\\xf7",iN="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rN="\\u2000-\\u206f",sN=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tS="A-Z\\xc0-\\xd6\\xd8-\\xde",nS="\\ufe0e\\ufe0f",iS=nN+iN+rN+sN,ng="['\u2019]",oN="["+Xu+"]",Gw="["+iS+"]",Ju="["+Jw+Xw+"]",rS="\\d+",aN="["+Zw+"]",sS="["+eS+"]",oS="[^"+Xu+iS+rS+Zw+eS+tS+"]",tg="\\ud83c[\\udffb-\\udfff]",lN="(?:"+Ju+"|"+tg+")",aS="[^"+Xu+"]",ig="(?:\\ud83c[\\udde6-\\uddff]){2}",rg="[\\ud800-\\udbff][\\udc00-\\udfff]",Ao="["+tS+"]",lS="\\u200d",Hw="(?:"+sS+"|"+oS+")",cN="(?:"+Ao+"|"+oS+")",Ww="(?:"+ng+"(?:d|ll|m|re|s|t|ve))?",$w="(?:"+ng+"(?:D|LL|M|RE|S|T|VE))?",cS=lN+"?",uS="["+nS+"]?",uN="(?:"+lS+"(?:"+[aS,ig,rg].join("|")+")"+uS+cS+")*",dS=uS+cS+uN,dN="(?:"+[aN,ig,rg].join("|")+")"+dS,hN="(?:"+[aS+Ju+"?",Ju,ig,rg,oN].join("|")+")",fN=RegExp(ng,"g"),pN=RegExp(Ju,"g"),mN=RegExp(tg+"(?="+tg+")|"+hN+dS,"g"),gN=RegExp([Ao+"?"+sS+"+"+Ww+"(?="+[Gw,Ao,"$"].join("|")+")",cN+"+"+$w+"(?="+[Gw,Ao+Hw,"$"].join("|")+")",Ao+"?"+Hw+"+"+Ww,Ao+"+"+$w,rS,dN].join("|"),"g"),_N=RegExp("["+lS+Xu+Jw+Xw+nS+"]"),yN=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vN={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},CN=typeof global=="object"&&global&&global.Object===Object&&global,bN=typeof self=="object"&&self&&self.Object===Object&&self,wN=CN||bN||Function("return this")();function SN(t,e,n,i){var r=-1,s=t?t.length:0;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function TN(t){return t.split("")}function EN(t){return t.match(eN)||[]}function MN(t){return function(e){return t?.[e]}}var ON=MN(vN);function hS(t){return _N.test(t)}function DN(t){return yN.test(t)}function PN(t){return hS(t)?IN(t):TN(t)}function IN(t){return t.match(mN)||[]}function xN(t){return t.match(gN)||[]}var AN=Object.prototype,kN=AN.toString,Kw=wN.Symbol,Qw=Kw?Kw.prototype:void 0,Yw=Qw?Qw.toString:void 0;function RN(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}function NN(t){if(typeof t=="string")return t;if(UN(t))return Yw?Yw.call(t):"";var e=t+"";return e=="0"&&1/t==-X2?"-0":e}function FN(t,e,n){var i=t.length;return n=n===void 0?i:n,!e&&n>=i?t:RN(t,e,n)}function LN(t){return function(e){e=Zu(e);var n=hS(e)?PN(e):void 0,i=n?n[0]:e.charAt(0),r=n?FN(n,1).join(""):e.slice(1);return i[t]()+r}}function BN(t){return function(e){return SN(HN(jN(e).replace(fN,"")),t,"")}}function VN(t){return!!t&&typeof t=="object"}function UN(t){return typeof t=="symbol"||VN(t)&&kN.call(t)==Z2}function Zu(t){return t==null?"":NN(t)}var zN=BN(function(t,e,n){return e=e.toLowerCase(),t+(n?qN(e):e)});function qN(t){return GN(Zu(t).toLowerCase())}function jN(t){return t=Zu(t),t&&t.replace(tN,ON).replace(pN,"")}var GN=LN("toUpperCase");function HN(t,e,n){return t=Zu(t),e=n?void 0:e,e===void 0?DN(t)?xN(t):EN(t):t.match(e)||[]}fS.exports=zN});var sg=w((XH,mS)=>{"use strict";mS.exports=WN;function WN(t,e){for(var n=new Array(arguments.length-1),i=0,r=2,s=!0;r<arguments.length;)n[i++]=arguments[r++];return new Promise(function(a,l){n[i]=function(u){if(s)if(s=!1,u)l(u);else{for(var f=new Array(arguments.length-1),g=0;g<f.length;)f[g++]=arguments[g];a.apply(null,f)}};try{t.apply(e||null,n)}catch(c){s&&(s=!1,l(c))}})}});var vS=w(yS=>{"use strict";var ed=yS;ed.length=function(e){var n=e.length;if(!n)return 0;for(var i=0;--n%4>1&&e.charAt(n)==="=";)++i;return Math.ceil(e.length*3)/4-i};var ko=new Array(64),_S=new Array(123);for(Zn=0;Zn<64;)_S[ko[Zn]=Zn<26?Zn+65:Zn<52?Zn+71:Zn<62?Zn-4:Zn-59|43]=Zn++;var Zn;ed.encode=function(e,n,i){for(var r=null,s=[],o=0,a=0,l;n<i;){var c=e[n++];switch(a){case 0:s[o++]=ko[c>>2],l=(c&3)<<4,a=1;break;case 1:s[o++]=ko[l|c>>4],l=(c&15)<<2,a=2;break;case 2:s[o++]=ko[l|c>>6],s[o++]=ko[c&63],a=0;break}o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=ko[l],s[o++]=61,a===1&&(s[o++]=61)),r?(o&&r.push(String.fromCharCode.apply(String,s.slice(0,o))),r.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var gS="invalid encoding";ed.decode=function(e,n,i){for(var r=i,s=0,o,a=0;a<e.length;){var l=e.charCodeAt(a++);if(l===61&&s>1)break;if((l=_S[l])===void 0)throw Error(gS);switch(s){case 0:o=l,s=1;break;case 1:n[i++]=o<<2|(l&48)>>4,o=l,s=2;break;case 2:n[i++]=(o&15)<<4|(l&60)>>2,o=l,s=3;break;case 3:n[i++]=(o&3)<<6|l,s=0;break}}if(s===1)throw Error(gS);return i-r};ed.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var bS=w((eW,CS)=>{"use strict";CS.exports=td;function td(){this._listeners={}}td.prototype.on=function(e,n,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:n,ctx:i||this}),this};td.prototype.off=function(e,n){if(e===void 0)this._listeners={};else if(n===void 0)this._listeners[e]=[];else for(var i=this._listeners[e],r=0;r<i.length;)i[r].fn===n?i.splice(r,1):++r;return this};td.prototype.emit=function(e){var n=this._listeners[e];if(n){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<n.length;)n[r].fn.apply(n[r++].ctx,i)}return this}});var DS=w((tW,OS)=>{"use strict";OS.exports=wS(wS);function wS(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),i=n[3]===128;function r(l,c,u){e[0]=l,c[u]=n[0],c[u+1]=n[1],c[u+2]=n[2],c[u+3]=n[3]}function s(l,c,u){e[0]=l,c[u]=n[3],c[u+1]=n[2],c[u+2]=n[1],c[u+3]=n[0]}t.writeFloatLE=i?r:s,t.writeFloatBE=i?s:r;function o(l,c){return n[0]=l[c],n[1]=l[c+1],n[2]=l[c+2],n[3]=l[c+3],e[0]}function a(l,c){return n[3]=l[c],n[2]=l[c+1],n[1]=l[c+2],n[0]=l[c+3],e[0]}t.readFloatLE=i?o:a,t.readFloatBE=i?a:o}():function(){function e(i,r,s,o){var a=r<0?1:0;if(a&&(r=-r),r===0)i(1/r>0?0:2147483648,s,o);else if(isNaN(r))i(2143289344,s,o);else if(r>34028234663852886e22)i((a<<31|2139095040)>>>0,s,o);else if(r<11754943508222875e-54)i((a<<31|Math.round(r/1401298464324817e-60))>>>0,s,o);else{var l=Math.floor(Math.log(r)/Math.LN2),c=Math.round(r*Math.pow(2,-l)*8388608)&8388607;i((a<<31|l+127<<23|c)>>>0,s,o)}}t.writeFloatLE=e.bind(null,SS),t.writeFloatBE=e.bind(null,TS);function n(i,r,s){var o=i(r,s),a=(o>>31)*2+1,l=o>>>23&255,c=o&8388607;return l===255?c?NaN:a*(1/0):l===0?a*1401298464324817e-60*c:a*Math.pow(2,l-150)*(c+8388608)}t.readFloatLE=n.bind(null,ES),t.readFloatBE=n.bind(null,MS)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),i=n[7]===128;function r(l,c,u){e[0]=l,c[u]=n[0],c[u+1]=n[1],c[u+2]=n[2],c[u+3]=n[3],c[u+4]=n[4],c[u+5]=n[5],c[u+6]=n[6],c[u+7]=n[7]}function s(l,c,u){e[0]=l,c[u]=n[7],c[u+1]=n[6],c[u+2]=n[5],c[u+3]=n[4],c[u+4]=n[3],c[u+5]=n[2],c[u+6]=n[1],c[u+7]=n[0]}t.writeDoubleLE=i?r:s,t.writeDoubleBE=i?s:r;function o(l,c){return n[0]=l[c],n[1]=l[c+1],n[2]=l[c+2],n[3]=l[c+3],n[4]=l[c+4],n[5]=l[c+5],n[6]=l[c+6],n[7]=l[c+7],e[0]}function a(l,c){return n[7]=l[c],n[6]=l[c+1],n[5]=l[c+2],n[4]=l[c+3],n[3]=l[c+4],n[2]=l[c+5],n[1]=l[c+6],n[0]=l[c+7],e[0]}t.readDoubleLE=i?o:a,t.readDoubleBE=i?a:o}():function(){function e(i,r,s,o,a,l){var c=o<0?1:0;if(c&&(o=-o),o===0)i(0,a,l+r),i(1/o>0?0:2147483648,a,l+s);else if(isNaN(o))i(0,a,l+r),i(2146959360,a,l+s);else if(o>17976931348623157e292)i(0,a,l+r),i((c<<31|2146435072)>>>0,a,l+s);else{var u;if(o<22250738585072014e-324)u=o/5e-324,i(u>>>0,a,l+r),i((c<<31|u/4294967296)>>>0,a,l+s);else{var f=Math.floor(Math.log(o)/Math.LN2);f===1024&&(f=1023),u=o*Math.pow(2,-f),i(u*4503599627370496>>>0,a,l+r),i((c<<31|f+1023<<20|u*1048576&1048575)>>>0,a,l+s)}}}t.writeDoubleLE=e.bind(null,SS,0,4),t.writeDoubleBE=e.bind(null,TS,4,0);function n(i,r,s,o,a){var l=i(o,a+r),c=i(o,a+s),u=(c>>31)*2+1,f=c>>>20&2047,g=4294967296*(c&1048575)+l;return f===2047?g?NaN:u*(1/0):f===0?u*5e-324*g:u*Math.pow(2,f-1075)*(g+4503599627370496)}t.readDoubleLE=n.bind(null,ES,0,4),t.readDoubleBE=n.bind(null,MS,4,0)}(),t}function SS(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function TS(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=t&255}function ES(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function MS(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var og=w((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var IS=w(PS=>{"use strict";var ag=PS;ag.length=function(e){for(var n=0,i=0,r=0;r<e.length;++r)i=e.charCodeAt(r),i<128?n+=1:i<2048?n+=2:(i&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320?(++r,n+=4):n+=3;return n};ag.read=function(e,n,i){var r=i-n;if(r<1)return"";for(var s=null,o=[],a=0,l;n<i;)l=e[n++],l<128?o[a++]=l:l>191&&l<224?o[a++]=(l&31)<<6|e[n++]&63:l>239&&l<365?(l=((l&7)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,o[a++]=55296+(l>>10),o[a++]=56320+(l&1023)):o[a++]=(l&15)<<12|(e[n++]&63)<<6|e[n++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};ag.write=function(e,n,i){for(var r=i,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?n[i++]=s:s<2048?(n[i++]=s>>6|192,n[i++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,n[i++]=s>>18|240,n[i++]=s>>12&63|128,n[i++]=s>>6&63|128,n[i++]=s&63|128):(n[i++]=s>>12|224,n[i++]=s>>6&63|128,n[i++]=s&63|128);return i-r}});var AS=w((iW,xS)=>{"use strict";xS.exports=$N;function $N(t,e,n){var i=n||8192,r=i>>>1,s=null,o=i;return function(l){if(l<1||l>r)return t(l);o+l>i&&(s=t(i),o=0);var c=e.call(s,o,o+=l);return o&7&&(o=(o|7)+1),c}}});var RS=w((rW,kS)=>{"use strict";kS.exports=mt;var wl=Ei();function mt(t,e){this.lo=t>>>0,this.hi=e>>>0}var Ts=mt.zero=new mt(0,0);Ts.toNumber=function(){return 0};Ts.zzEncode=Ts.zzDecode=function(){return this};Ts.length=function(){return 1};var KN=mt.zeroHash="\0\0\0\0\0\0\0\0";mt.fromNumber=function(e){if(e===0)return Ts;var n=e<0;n&&(e=-e);var i=e>>>0,r=(e-i)/4294967296>>>0;return n&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new mt(i,r)};mt.from=function(e){if(typeof e=="number")return mt.fromNumber(e);if(wl.isString(e))if(wl.Long)e=wl.Long.fromString(e);else return mt.fromNumber(parseInt(e,10));return e.low||e.high?new mt(e.low>>>0,e.high>>>0):Ts};mt.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var n=~this.lo+1>>>0,i=~this.hi>>>0;return n||(i=i+1>>>0),-(n+i*4294967296)}return this.lo+this.hi*4294967296};mt.prototype.toLong=function(e){return wl.Long?new wl.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var Ir=String.prototype.charCodeAt;mt.fromHash=function(e){return e===KN?Ts:new mt((Ir.call(e,0)|Ir.call(e,1)<<8|Ir.call(e,2)<<16|Ir.call(e,3)<<24)>>>0,(Ir.call(e,4)|Ir.call(e,5)<<8|Ir.call(e,6)<<16|Ir.call(e,7)<<24)>>>0)};mt.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};mt.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};mt.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};mt.prototype.length=function(){var e=this.lo,n=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?n===0?e<16384?e<128?1:2:e<2097152?3:4:n<16384?n<128?5:6:n<2097152?7:8:i<128?9:10}});var Ei=w(lg=>{"use strict";var K=lg;K.asPromise=sg();K.base64=vS();K.EventEmitter=bS();K.float=DS();K.inquire=og();K.utf8=IS();K.pool=AS();K.LongBits=RS();K.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);K.global=K.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||lg;K.emptyArray=Object.freeze?Object.freeze([]):[];K.emptyObject=Object.freeze?Object.freeze({}):{};K.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};K.isString=function(e){return typeof e=="string"||e instanceof String};K.isObject=function(e){return e&&typeof e=="object"};K.isset=K.isSet=function(e,n){var i=e[n];return i!=null&&e.hasOwnProperty(n)?typeof i!="object"||(Array.isArray(i)?i.length:Object.keys(i).length)>0:!1};K.Buffer=function(){try{var t=K.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();K._Buffer_from=null;K._Buffer_allocUnsafe=null;K.newBuffer=function(e){return typeof e=="number"?K.Buffer?K._Buffer_allocUnsafe(e):new K.Array(e):K.Buffer?K._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};K.Array=typeof Uint8Array<"u"?Uint8Array:Array;K.Long=K.global.dcodeIO&&K.global.dcodeIO.Long||K.global.Long||K.inquire("long");K.key2Re=/^true|false|0|1$/;K.key32Re=/^-?(?:0|[1-9][0-9]*)$/;K.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;K.longToHash=function(e){return e?K.LongBits.from(e).toHash():K.LongBits.zeroHash};K.longFromHash=function(e,n){var i=K.LongBits.fromHash(e);return K.Long?K.Long.fromBits(i.lo,i.hi,n):i.toNumber(!!n)};function NS(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;++r)(t[i[r]]===void 0||!n)&&(t[i[r]]=e[i[r]]);return t}K.merge=NS;K.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function FS(t){function e(n,i){if(!(this instanceof e))return new e(n,i);Object.defineProperty(this,"message",{get:function(){return n}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),i&&NS(this,i)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}K.newError=FS;K.ProtocolError=FS("ProtocolError");K.oneOfGetter=function(e){for(var n={},i=0;i<e.length;++i)n[e[i]]=1;return function(){for(var r=Object.keys(this),s=r.length-1;s>-1;--s)if(n[r[s]]===1&&this[r[s]]!==void 0&&this[r[s]]!==null)return r[s]}};K.oneOfSetter=function(e){return function(n){for(var i=0;i<e.length;++i)e[i]!==n&&delete this[e[i]]}};K.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};K._configure=function(){var t=K.Buffer;if(!t){K._Buffer_from=K._Buffer_allocUnsafe=null;return}K._Buffer_from=t.from!==Uint8Array.from&&t.from||function(n,i){return new t(n,i)},K._Buffer_allocUnsafe=t.allocUnsafe||function(n){return new t(n)}}});var id=w((oW,US)=>{"use strict";US.exports=we;var Ln=Ei(),cg,nd=Ln.LongBits,LS=Ln.base64,BS=Ln.utf8;function Sl(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function dg(){}function QN(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function we(){this.len=0,this.head=new Sl(dg,0,0),this.tail=this.head,this.states=null}var VS=function(){return Ln.Buffer?function(){return(we.create=function(){return new cg})()}:function(){return new we}};we.create=VS();we.alloc=function(e){return new Ln.Array(e)};Ln.Array!==Array&&(we.alloc=Ln.pool(we.alloc,Ln.Array.prototype.subarray));we.prototype._push=function(e,n,i){return this.tail=this.tail.next=new Sl(e,n,i),this.len+=n,this};function hg(t,e,n){e[n]=t&255}function YN(t,e,n){for(;t>127;)e[n++]=t&127|128,t>>>=7;e[n]=t}function fg(t,e){this.len=t,this.next=void 0,this.val=e}fg.prototype=Object.create(Sl.prototype);fg.prototype.fn=YN;we.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new fg((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};we.prototype.int32=function(e){return e<0?this._push(pg,10,nd.fromNumber(e)):this.uint32(e)};we.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function pg(t,e,n){for(;t.hi;)e[n++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=t.lo&127|128,t.lo=t.lo>>>7;e[n++]=t.lo}we.prototype.uint64=function(e){var n=nd.from(e);return this._push(pg,n.length(),n)};we.prototype.int64=we.prototype.uint64;we.prototype.sint64=function(e){var n=nd.from(e).zzEncode();return this._push(pg,n.length(),n)};we.prototype.bool=function(e){return this._push(hg,1,e?1:0)};function ug(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}we.prototype.fixed32=function(e){return this._push(ug,4,e>>>0)};we.prototype.sfixed32=we.prototype.fixed32;we.prototype.fixed64=function(e){var n=nd.from(e);return this._push(ug,4,n.lo)._push(ug,4,n.hi)};we.prototype.sfixed64=we.prototype.fixed64;we.prototype.float=function(e){return this._push(Ln.float.writeFloatLE,4,e)};we.prototype.double=function(e){return this._push(Ln.float.writeDoubleLE,8,e)};var JN=Ln.Array.prototype.set?function(e,n,i){n.set(e,i)}:function(e,n,i){for(var r=0;r<e.length;++r)n[i+r]=e[r]};we.prototype.bytes=function(e){var n=e.length>>>0;if(!n)return this._push(hg,1,0);if(Ln.isString(e)){var i=we.alloc(n=LS.length(e));LS.decode(e,i,0),e=i}return this.uint32(n)._push(JN,n,e)};we.prototype.string=function(e){var n=BS.length(e);return n?this.uint32(n)._push(BS.write,n,e):this._push(hg,1,0)};we.prototype.fork=function(){return this.states=new QN(this),this.head=this.tail=new Sl(dg,0,0),this.len=0,this};we.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Sl(dg,0,0),this.len=0),this};we.prototype.ldelim=function(){var e=this.head,n=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=n,this.len+=i),this};we.prototype.finish=function(){for(var e=this.head.next,n=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,n,i),i+=e.len,e=e.next;return n};we._configure=function(t){cg=t,we.create=VS(),cg._configure()}});var jS=w((aW,qS)=>{"use strict";qS.exports=Mi;var zS=id();(Mi.prototype=Object.create(zS.prototype)).constructor=Mi;var xr=Ei();function Mi(){zS.call(this)}Mi._configure=function(){Mi.alloc=xr._Buffer_allocUnsafe,Mi.writeBytesBuffer=xr.Buffer&&xr.Buffer.prototype instanceof Uint8Array&&xr.Buffer.prototype.set.name==="set"?function(e,n,i){n.set(e,i)}:function(e,n,i){if(e.copy)e.copy(n,i,0,e.length);else for(var r=0;r<e.length;)n[i++]=e[r++]}};Mi.prototype.bytes=function(e){xr.isString(e)&&(e=xr._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(Mi.writeBytesBuffer,n,e),this};function XN(t,e,n){t.length<40?xr.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}Mi.prototype.string=function(e){var n=xr.Buffer.byteLength(e);return this.uint32(n),n&&this._push(XN,n,e),this};Mi._configure()});var sd=w((lW,KS)=>{"use strict";KS.exports=it;var ei=Ei(),gg,WS=ei.LongBits,ZN=ei.utf8;function ti(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function it(t){this.buf=t,this.pos=0,this.len=t.length}var GS=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new it(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new it(e);throw Error("illegal buffer")},$S=function(){return ei.Buffer?function(n){return(it.create=function(r){return ei.Buffer.isBuffer(r)?new gg(r):GS(r)})(n)}:GS};it.create=$S();it.prototype._slice=ei.Array.prototype.subarray||ei.Array.prototype.slice;it.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,ti(this,10);return e}}();it.prototype.int32=function(){return this.uint32()|0};it.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function mg(){var t=new WS(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw ti(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw ti(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}it.prototype.bool=function(){return this.uint32()!==0};function rd(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}it.prototype.fixed32=function(){if(this.pos+4>this.len)throw ti(this,4);return rd(this.buf,this.pos+=4)};it.prototype.sfixed32=function(){if(this.pos+4>this.len)throw ti(this,4);return rd(this.buf,this.pos+=4)|0};function HS(){if(this.pos+8>this.len)throw ti(this,8);return new WS(rd(this.buf,this.pos+=4),rd(this.buf,this.pos+=4))}it.prototype.float=function(){if(this.pos+4>this.len)throw ti(this,4);var e=ei.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};it.prototype.double=function(){if(this.pos+8>this.len)throw ti(this,4);var e=ei.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};it.prototype.bytes=function(){var e=this.uint32(),n=this.pos,i=this.pos+e;if(i>this.len)throw ti(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(n,i);if(n===i){var r=ei.Buffer;return r?r.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,n,i)};it.prototype.string=function(){var e=this.bytes();return ZN.read(e,0,e.length)};it.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw ti(this,e);this.pos+=e}else do if(this.pos>=this.len)throw ti(this);while(this.buf[this.pos++]&128);return this};it.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};it._configure=function(t){gg=t,it.create=$S(),gg._configure();var e=ei.Long?"toLong":"toNumber";ei.merge(it.prototype,{int64:function(){return mg.call(this)[e](!1)},uint64:function(){return mg.call(this)[e](!0)},sint64:function(){return mg.call(this).zzDecode()[e](!1)},fixed64:function(){return HS.call(this)[e](!0)},sfixed64:function(){return HS.call(this)[e](!1)}})}});var XS=w((cW,JS)=>{"use strict";JS.exports=Es;var YS=sd();(Es.prototype=Object.create(YS.prototype)).constructor=Es;var QS=Ei();function Es(t){YS.call(this,t)}Es._configure=function(){QS.Buffer&&(Es.prototype._slice=QS.Buffer.prototype.slice)};Es.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};Es._configure()});var eT=w((uW,ZS)=>{"use strict";ZS.exports=Tl;var _g=Ei();(Tl.prototype=Object.create(_g.EventEmitter.prototype)).constructor=Tl;function Tl(t,e,n){if(typeof t!="function")throw TypeError("rpcImpl must be a function");_g.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!n}Tl.prototype.rpcCall=function t(e,n,i,r,s){if(!r)throw TypeError("request must be specified");var o=this;if(!s)return _g.asPromise(t,o,e,n,i,r);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,n[o.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(l,c){if(l)return o.emit("error",l,e),s(l);if(c===null){o.end(!0);return}if(!(c instanceof i))try{c=i[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(u){return o.emit("error",u,e),s(u)}return o.emit("data",c,e),s(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};Tl.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var yg=w(tT=>{"use strict";var eF=tT;eF.Service=eT()});var vg=w((hW,nT)=>{"use strict";nT.exports={}});var sT=w(rT=>{"use strict";var on=rT;on.build="minimal";on.Writer=id();on.BufferWriter=jS();on.Reader=sd();on.BufferReader=XS();on.util=Ei();on.rpc=yg();on.roots=vg();on.configure=iT;function iT(){on.util._configure(),on.Writer._configure(on.BufferWriter),on.Reader._configure(on.BufferReader)}iT()});var aT=w((pW,oT)=>{"use strict";oT.exports=Cg;function Cg(t,e){typeof t=="string"&&(e=t,t=void 0);var n=[];function i(s){if(typeof s!="string"){var o=r();if(Cg.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),l=new Array(a.length+1),c=new Array(a.length),u=0;u<a.length;)l[u]=a[u],c[u]=s[a[u++]];return l[u]=o,Function.apply(null,l).apply(null,c)}return Function(o)()}for(var f=new Array(arguments.length-1),g=0;g<f.length;)f[g]=arguments[++g];if(g=0,s=s.replace(/%([%dfijs])/g,function(C,v){var b=f[g++];switch(v){case"d":case"f":return String(Number(b));case"i":return String(Math.floor(b));case"j":return JSON.stringify(b);case"s":return String(b)}return"%"}),g!==f.length)throw Error("parameter count mismatch");return n.push(s),i}function r(s){return"function "+(s||e||"")+"("+(t&&t.join(",")||"")+`){
  `+n.join(`
  `)+`
}`}return i.toString=r,i}Cg.verbose=!1});var cT=w((mW,lT)=>{"use strict";lT.exports=El;var tF=sg(),nF=og(),bg=nF("fs");function El(t,e,n){return typeof e=="function"?(n=e,e={}):e||(e={}),n?!e.xhr&&bg&&bg.readFile?bg.readFile(t,function(r,s){return r&&typeof XMLHttpRequest<"u"?El.xhr(t,e,n):r?n(r):n(null,e.binary?s:s.toString("utf8"))}):El.xhr(t,e,n):tF(El,this,t,e)}El.xhr=function(e,n,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4){if(r.status!==0&&r.status!==200)return i(Error("status "+r.status));if(n.binary){var o=r.response;if(!o){o=[];for(var a=0;a<r.responseText.length;++a)o.push(r.responseText.charCodeAt(a)&255)}return i(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return i(null,r.responseText)}},n.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}});var hT=w(dT=>{"use strict";var Sg=dT,uT=Sg.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},wg=Sg.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var n=e.split("/"),i=uT(e),r="";i&&(r=n.shift()+"/");for(var s=0;s<n.length;)n[s]===".."?s>0&&n[s-1]!==".."?n.splice(--s,2):i?n.splice(s,1):++s:n[s]==="."?n.splice(s,1):++s;return r+n.join("/")};Sg.resolve=function(e,n,i){return i||(n=wg(n)),uT(n)?n:(i||(e=wg(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?wg(e+"/"+n):n)}});var Ms=w(fT=>{"use strict";var Ml=fT,iF=gt(),rF=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Ol(t,e){var n=0,i={};for(e|=0;n<t.length;)i[rF[n+e]]=t[n++];return i}Ml.basic=Ol([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Ml.defaults=Ol([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",iF.emptyArray,null]);Ml.long=Ol([0,0,0,1,1],7);Ml.mapKey=Ol([0,0,0,5,5,0,0,0,1,1,0,2],2);Ml.packed=Ol([1,5,0,0,0,5,5,0,0,0,1,1,0])});var Ar=w((yW,gT)=>{"use strict";gT.exports=Bn;var od=Os();((Bn.prototype=Object.create(od.prototype)).constructor=Bn).className="Field";var pT=ni(),mT=Ms(),at=gt(),Tg,sF=/^required|optional|repeated$/;Bn.fromJSON=function(e,n){return new Bn(e,n.id,n.type,n.rule,n.extend,n.options,n.comment)};function Bn(t,e,n,i,r,s,o){if(at.isObject(i)?(o=r,s=i,i=r=void 0):at.isObject(r)&&(o=s,s=r,r=void 0),od.call(this,t,s),!at.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!at.isString(n))throw TypeError("type must be a string");if(i!==void 0&&!sF.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(r!==void 0&&!at.isString(r))throw TypeError("extend must be a string");i==="proto3_optional"&&(i="optional"),this.rule=i&&i!=="optional"?i:void 0,this.type=n,this.id=e,this.extend=r||void 0,this.required=i==="required",this.optional=!this.required,this.repeated=i==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=at.Long?mT.long[n]!==void 0:!1,this.bytes=n==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=o}Object.defineProperty(Bn.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}});Bn.prototype.setOption=function(e,n,i){return e==="packed"&&(this._packed=null),od.prototype.setOption.call(this,e,n,i)};Bn.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return at.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:void 0])};Bn.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=mT.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Tg?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof pT&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof pT))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=at.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;at.base64.test(this.typeDefault)?at.base64.decode(this.typeDefault,e=at.newBuffer(at.base64.length(this.typeDefault)),0):at.utf8.write(this.typeDefault,e=at.newBuffer(at.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=at.emptyObject:this.repeated?this.defaultValue=at.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Tg&&(this.parent.ctor.prototype[this.name]=this.defaultValue),od.prototype.resolve.call(this)};Bn.d=function(e,n,i,r){return typeof n=="function"?n=at.decorateType(n).name:n&&typeof n=="object"&&(n=at.decorateEnum(n).name),function(o,a){at.decorateType(o.constructor).add(new Bn(a,e,n,i,{default:r}))}};Bn._configure=function(e){Tg=e}});var Ro=w((vW,vT)=>{"use strict";vT.exports=Vn;var ld=Os();((Vn.prototype=Object.create(ld.prototype)).constructor=Vn).className="OneOf";var _T=Ar(),ad=gt();function Vn(t,e,n,i){if(Array.isArray(e)||(n=e,e=void 0),ld.call(this,t,n),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=i}Vn.fromJSON=function(e,n){return new Vn(e,n.oneof,n.options,n.comment)};Vn.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return ad.toObject(["options",this.options,"oneof",this.oneof,"comment",n?this.comment:void 0])};function yT(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}Vn.prototype.add=function(e){if(!(e instanceof _T))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,yT(this),this};Vn.prototype.remove=function(e){if(!(e instanceof _T))throw TypeError("field must be a Field");var n=this.fieldsArray.indexOf(e);if(n<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(n,1),n=this.oneof.indexOf(e.name),n>-1&&this.oneof.splice(n,1),e.partOf=null,this};Vn.prototype.onAdd=function(e){ld.prototype.onAdd.call(this,e);for(var n=this,i=0;i<this.oneof.length;++i){var r=e.get(this.oneof[i]);r&&!r.partOf&&(r.partOf=n,n.fieldsArray.push(r))}yT(this)};Vn.prototype.onRemove=function(e){for(var n=0,i;n<this.fieldsArray.length;++n)(i=this.fieldsArray[n]).parent&&i.parent.remove(i);ld.prototype.onRemove.call(this,e)};Vn.d=function(){for(var e=new Array(arguments.length),n=0;n<arguments.length;)e[n]=arguments[n++];return function(r,s){ad.decorateType(r.constructor).add(new Vn(s,e)),Object.defineProperty(r,s,{get:ad.oneOfGetter(e),set:ad.oneOfSetter(e)})}}});var Lo=w((CW,ST)=>{"use strict";ST.exports=Te;var Eg=Os();((Te.prototype=Object.create(Eg.prototype)).constructor=Te).className="Namespace";var CT=Ar(),cd=gt(),oF=Ro(),No,Dl,Fo;Te.fromJSON=function(e,n){return new Te(e,n.options).addJSON(n.nested)};function bT(t,e){if(t&&t.length){for(var n={},i=0;i<t.length;++i)n[t[i].name]=t[i].toJSON(e);return n}}Te.arrayToJSON=bT;Te.isReservedId=function(e,n){if(e){for(var i=0;i<e.length;++i)if(typeof e[i]!="string"&&e[i][0]<=n&&e[i][1]>n)return!0}return!1};Te.isReservedName=function(e,n){if(e){for(var i=0;i<e.length;++i)if(e[i]===n)return!0}return!1};function Te(t,e){Eg.call(this,t,e),this.nested=void 0,this._nestedArray=null}function wT(t){return t._nestedArray=null,t}Object.defineProperty(Te.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=cd.toArray(this.nested))}});Te.prototype.toJSON=function(e){return cd.toObject(["options",this.options,"nested",bT(this.nestedArray,e)])};Te.prototype.addJSON=function(e){var n=this;if(e)for(var i=Object.keys(e),r=0,s;r<i.length;++r)s=e[i[r]],n.add((s.fields!==void 0?No.fromJSON:s.values!==void 0?Fo.fromJSON:s.methods!==void 0?Dl.fromJSON:s.id!==void 0?CT.fromJSON:Te.fromJSON)(i[r],s));return this};Te.prototype.get=function(e){return this.nested&&this.nested[e]||null};Te.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof Fo)return this.nested[e].values;throw Error("no such enum: "+e)};Te.prototype.add=function(e){if(!(e instanceof CT&&e.extend!==void 0||e instanceof No||e instanceof oF||e instanceof Fo||e instanceof Dl||e instanceof Te))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var n=this.get(e.name);if(n)if(n instanceof Te&&e instanceof Te&&!(n instanceof No||n instanceof Dl)){for(var i=n.nestedArray,r=0;r<i.length;++r)e.add(i[r]);this.remove(n),this.nested||(this.nested={}),e.setOptions(n.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}return this.nested[e.name]=e,e.onAdd(this),wT(this)};Te.prototype.remove=function(e){if(!(e instanceof Eg))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),wT(this)};Te.prototype.define=function(e,n){if(cd.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var i=this;e.length>0;){var r=e.shift();if(i.nested&&i.nested[r]){if(i=i.nested[r],!(i instanceof Te))throw Error("path conflicts with non-namespace objects")}else i.add(i=new Te(r))}return n&&i.addJSON(n),i};Te.prototype.resolveAll=function(){for(var e=this.nestedArray,n=0;n<e.length;)e[n]instanceof Te?e[n++].resolveAll():e[n++].resolve();return this.resolve()};Te.prototype.lookup=function(e,n,i){if(typeof n=="boolean"?(i=n,n=void 0):n&&!Array.isArray(n)&&(n=[n]),cd.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),n);var r=this.get(e[0]);if(r){if(e.length===1){if(!n||n.indexOf(r.constructor)>-1)return r}else if(r instanceof Te&&(r=r.lookup(e.slice(1),n,!0)))return r}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof Te&&(r=this._nestedArray[s].lookup(e,n,!0)))return r;return this.parent===null||i?null:this.parent.lookup(e,n)};Te.prototype.lookupType=function(e){var n=this.lookup(e,[No]);if(!n)throw Error("no such type: "+e);return n};Te.prototype.lookupEnum=function(e){var n=this.lookup(e,[Fo]);if(!n)throw Error("no such Enum '"+e+"' in "+this);return n};Te.prototype.lookupTypeOrEnum=function(e){var n=this.lookup(e,[No,Fo]);if(!n)throw Error("no such Type or Enum '"+e+"' in "+this);return n};Te.prototype.lookupService=function(e){var n=this.lookup(e,[Dl]);if(!n)throw Error("no such Service '"+e+"' in "+this);return n};Te._configure=function(t,e,n){No=t,Dl=e,Fo=n}});var ud=w((bW,TT)=>{"use strict";TT.exports=Zi;var Mg=Ar();((Zi.prototype=Object.create(Mg.prototype)).constructor=Zi).className="MapField";var aF=Ms(),Pl=gt();function Zi(t,e,n,i,r,s){if(Mg.call(this,t,e,i,void 0,void 0,r,s),!Pl.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}Zi.fromJSON=function(e,n){return new Zi(e,n.id,n.keyType,n.type,n.options,n.comment)};Zi.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return Pl.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",n?this.comment:void 0])};Zi.prototype.resolve=function(){if(this.resolved)return this;if(aF.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return Mg.prototype.resolve.call(this)};Zi.d=function(e,n,i){return typeof i=="function"?i=Pl.decorateType(i).name:i&&typeof i=="object"&&(i=Pl.decorateEnum(i).name),function(s,o){Pl.decorateType(s.constructor).add(new Zi(o,e,n,i))}}});var dd=w((wW,ET)=>{"use strict";ET.exports=Ds;var Og=Os();((Ds.prototype=Object.create(Og.prototype)).constructor=Ds).className="Method";var Bo=gt();function Ds(t,e,n,i,r,s,o,a,l){if(Bo.isObject(r)?(o=r,r=s=void 0):Bo.isObject(s)&&(o=s,s=void 0),!(e===void 0||Bo.isString(e)))throw TypeError("type must be a string");if(!Bo.isString(n))throw TypeError("requestType must be a string");if(!Bo.isString(i))throw TypeError("responseType must be a string");Og.call(this,t,o),this.type=e||"rpc",this.requestType=n,this.requestStream=r?!0:void 0,this.responseType=i,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=l}Ds.fromJSON=function(e,n){return new Ds(e,n.type,n.requestType,n.responseType,n.requestStream,n.responseStream,n.options,n.comment,n.parsedOptions)};Ds.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return Bo.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",n?this.comment:void 0,"parsedOptions",this.parsedOptions])};Ds.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Og.prototype.resolve.call(this))}});var hd=w((SW,OT)=>{"use strict";OT.exports=Un;var kr=Lo();((Un.prototype=Object.create(kr.prototype)).constructor=Un).className="Service";var Dg=dd(),Il=gt(),lF=yg();function Un(t,e){kr.call(this,t,e),this.methods={},this._methodsArray=null}Un.fromJSON=function(e,n){var i=new Un(e,n.options);if(n.methods)for(var r=Object.keys(n.methods),s=0;s<r.length;++s)i.add(Dg.fromJSON(r[s],n.methods[r[s]]));return n.nested&&i.addJSON(n.nested),i.comment=n.comment,i};Un.prototype.toJSON=function(e){var n=kr.prototype.toJSON.call(this,e),i=e?!!e.keepComments:!1;return Il.toObject(["options",n&&n.options||void 0,"methods",kr.arrayToJSON(this.methodsArray,e)||{},"nested",n&&n.nested||void 0,"comment",i?this.comment:void 0])};Object.defineProperty(Un.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Il.toArray(this.methods))}});function MT(t){return t._methodsArray=null,t}Un.prototype.get=function(e){return this.methods[e]||kr.prototype.get.call(this,e)};Un.prototype.resolveAll=function(){for(var e=this.methodsArray,n=0;n<e.length;++n)e[n].resolve();return kr.prototype.resolve.call(this)};Un.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof Dg?(this.methods[e.name]=e,e.parent=this,MT(this)):kr.prototype.add.call(this,e)};Un.prototype.remove=function(e){if(e instanceof Dg){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,MT(this)}return kr.prototype.remove.call(this,e)};Un.prototype.create=function(e,n,i){for(var r=new lF.Service(e,n,i),s=0,o;s<this.methodsArray.length;++s){var a=Il.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");r[a]=Il.codegen(["r","c"],Il.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return r}});var fd=w((TW,DT)=>{"use strict";DT.exports=Oi;var cF=Ei();function Oi(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)this[e[n]]=t[e[n]]}Oi.create=function(e){return this.$type.create(e)};Oi.encode=function(e,n){return this.$type.encode(e,n)};Oi.encodeDelimited=function(e,n){return this.$type.encodeDelimited(e,n)};Oi.decode=function(e){return this.$type.decode(e)};Oi.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};Oi.verify=function(e){return this.$type.verify(e)};Oi.fromObject=function(e){return this.$type.fromObject(e)};Oi.toObject=function(e,n){return this.$type.toObject(e,n)};Oi.prototype.toJSON=function(){return this.$type.toObject(this,cF.toJSONOptions)}});var Pg=w((EW,IT)=>{"use strict";IT.exports=hF;var uF=ni(),er=Ms(),PT=gt();function dF(t){return"missing required '"+t.name+"'"}function hF(t){var e=PT.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var n=0;n<t.fieldsArray.length;++n){var i=t._fieldsArray[n].resolve(),r=i.resolvedType instanceof uF?"int32":i.type,s="m"+PT.safeProp(i.name);e("case %i: {",i.id),i.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),er.defaults[i.keyType]!==void 0?e("k=%j",er.defaults[i.keyType]):e("k=null"),er.defaults[r]!==void 0?e("value=%j",er.defaults[r]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",i.keyType)("case 2:"),er.basic[r]===void 0?e("value=types[%i].decode(r,r.uint32())",n):e("value=r.%s()",r),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),er.long[i.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):i.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),er.packed[r]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,r)("}else"),er.basic[r]===void 0?e(i.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",s,n):e("%s.push(r.%s())",s,r)):er.basic[r]===void 0?e(i.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",s,n):e("%s=r.%s()",s,r),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<t._fieldsArray.length;++n){var o=t._fieldsArray[n];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",dF(o))}return e("return m")}});var Ag=w((MW,xT)=>{"use strict";xT.exports=mF;var fF=ni(),Ig=gt();function zn(t,e){return t.name+": "+e+(t.repeated&&e!=="array"?"[]":t.map&&e!=="object"?"{k:"+t.keyType+"}":"")+" expected"}function xg(t,e,n,i){if(e.resolvedType)if(e.resolvedType instanceof fF){t("switch(%s){",i)("default:")("return%j",zn(e,"enum value"));for(var r=Object.keys(e.resolvedType.values),s=0;s<r.length;++s)t("case %i:",e.resolvedType.values[r[s]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",i)("return%j",zn(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",zn(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',i)("return%j",zn(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',i)("return%j",zn(e,"boolean"));break;case"string":t("if(!util.isString(%s))",i)("return%j",zn(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",zn(e,"buffer"));break}return t}function pF(t,e,n){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",n)("return%j",zn(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",n)("return%j",zn(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",n)("return%j",zn(e,"boolean key"));break}return t}function mF(t){var e=Ig.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=t.oneofsArray,i={};n.length&&e("var p={}");for(var r=0;r<t.fieldsArray.length;++r){var s=t._fieldsArray[r].resolve(),o="m"+Ig.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)e("if(!util.isObject(%s))",o)("return%j",zn(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),pF(e,s,"k[i]"),xg(e,s,r,o+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",o)("return%j",zn(s,"array"))("for(var i=0;i<%s.length;++i){",o),xg(e,s,r,o+"[i]")("}");else{if(s.partOf){var a=Ig.safeProp(s.partOf.name);i[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),i[s.partOf.name]=1,e("p%s=1",a)}xg(e,s,r,o)}s.optional&&e("}")}return e("return null")}});var Ng=w(kT=>{"use strict";var AT=kT,xl=ni(),Di=gt();function kg(t,e,n,i){var r=!1;if(e.resolvedType)if(e.resolvedType instanceof xl){t("switch(d%s){",i);for(var s=e.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===e.typeDefault&&!r&&(t("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',i,i,i),e.repeated||t("break"),r=!0),t("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",i,s[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',i)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,n,i);else{var l=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",i,i);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,l)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,l?"true":"");break;case"bytes":t('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length >= 0)",i)("m%s=d%s",i,i);break;case"string":t("m%s=String(d%s)",i,i);break;case"bool":t("m%s=Boolean(d%s)",i,i);break}}return t}AT.fromObject=function(e){var n=e.fieldsArray,i=Di.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!n.length)return i("return new this.ctor");i("var m=new this.ctor");for(var r=0;r<n.length;++r){var s=n[r].resolve(),o=Di.safeProp(s.name);s.map?(i("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),kg(i,s,r,o+"[ks[i]]")("}")("}")):s.repeated?(i("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),kg(i,s,r,o+"[i]")("}")("}")):(s.resolvedType instanceof xl||i("if(d%s!=null){",o),kg(i,s,r,o),s.resolvedType instanceof xl||i("}"))}return i("return m")};function Rg(t,e,n,i){if(e.resolvedType)e.resolvedType instanceof xl?t("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",i,n,i,i,n,i,i):t("d%s=types[%i].toObject(m%s,o)",i,n,i);else{var r=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,r?"true":"",i);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:t("d%s=m%s",i,i);break}}return t}AT.toObject=function(e){var n=e.fieldsArray.slice().sort(Di.compareFieldsById);if(!n.length)return Di.codegen()("return {}");for(var i=Di.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],o=[],a=0;a<n.length;++a)n[a].partOf||(n[a].resolve().repeated?r:n[a].map?s:o).push(n[a]);if(r.length){for(i("if(o.arrays||o.defaults){"),a=0;a<r.length;++a)i("d%s=[]",Di.safeProp(r[a].name));i("}")}if(s.length){for(i("if(o.objects||o.defaults){"),a=0;a<s.length;++a)i("d%s={}",Di.safeProp(s[a].name));i("}")}if(o.length){for(i("if(o.defaults){"),a=0;a<o.length;++a){var l=o[a],c=Di.safeProp(l.name);if(l.resolvedType instanceof xl)i("d%s=o.enums===String?%j:%j",c,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var u="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",c,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")}else i("d%s=%j",c,l.typeDefault)}i("}")}var f=!1;for(a=0;a<n.length;++a){var l=n[a],g=e._fieldsArray.indexOf(l),c=Di.safeProp(l.name);l.map?(f||(f=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),Rg(i,l,g,c+"[ks2[j]]")("}")):l.repeated?(i("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),Rg(i,l,g,c+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",c,l.name),Rg(i,l,g,c),l.partOf&&i("if(o.oneofs)")("d%s=%j",Di.safeProp(l.partOf.name),l.name)),i("}")}return i("return d")}});var Fg=w(RT=>{"use strict";var gF=RT,_F=fd();gF[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),n=this.lookup(e);if(n){var i=t["@type"].charAt(0)==="."?t["@type"].slice(1):t["@type"];return i.indexOf("/")===-1&&(i="/"+i),this.create({type_url:i,value:n.encode(n.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var n="type.googleapis.com/",i="",r="";if(e&&e.json&&t.type_url&&t.value){r=t.type_url.substring(t.type_url.lastIndexOf("/")+1),i=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var s=this.lookup(r);s&&(t=s.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof _F){var o=t.$type.toObject(t,e),a=t.$type.fullName[0]==="."?t.$type.fullName.slice(1):t.$type.fullName;return i===""&&(i=n),r=i+a,o["@type"]=r,o}return this.toObject(t,e)}}});var gd=w((PW,FT)=>{"use strict";FT.exports=Re;var ii=Lo();((Re.prototype=Object.create(ii.prototype)).constructor=Re).className="Type";var yF=ni(),Vg=Ro(),pd=Ar(),vF=ud(),CF=hd(),Lg=fd(),Bg=sd(),bF=id(),Rt=gt(),wF=Ug(),SF=Pg(),TF=Ag(),NT=Ng(),EF=Fg();function Re(t,e){ii.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(Re.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var n=this.fields[t[e]],i=n.id;if(this._fieldsById[i])throw Error("duplicate id "+i+" in "+this);this._fieldsById[i]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Rt.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Rt.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Re.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof Lg||((t.prototype=new Lg).constructor=t,Rt.merge(t.prototype,e)),t.$type=t.prototype.$type=this,Rt.merge(t,Lg,!0),this._ctor=t;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var i={};for(n=0;n<this.oneofsArray.length;++n)i[this._oneofsArray[n].resolve().name]={get:Rt.oneOfGetter(this._oneofsArray[n].oneof),set:Rt.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(t.prototype,i)}}});Re.generateConstructor=function(e){for(var n=Rt.codegen(["p"],e.name),i=0,r;i<e.fieldsArray.length;++i)(r=e._fieldsArray[i]).map?n("this%s={}",Rt.safeProp(r.name)):r.repeated&&n("this%s=[]",Rt.safeProp(r.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function md(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}Re.fromJSON=function(e,n){var i=new Re(e,n.options);i.extensions=n.extensions,i.reserved=n.reserved;for(var r=Object.keys(n.fields),s=0;s<r.length;++s)i.add((typeof n.fields[r[s]].keyType<"u"?vF.fromJSON:pd.fromJSON)(r[s],n.fields[r[s]]));if(n.oneofs)for(r=Object.keys(n.oneofs),s=0;s<r.length;++s)i.add(Vg.fromJSON(r[s],n.oneofs[r[s]]));if(n.nested)for(r=Object.keys(n.nested),s=0;s<r.length;++s){var o=n.nested[r[s]];i.add((o.id!==void 0?pd.fromJSON:o.fields!==void 0?Re.fromJSON:o.values!==void 0?yF.fromJSON:o.methods!==void 0?CF.fromJSON:ii.fromJSON)(r[s],o))}return n.extensions&&n.extensions.length&&(i.extensions=n.extensions),n.reserved&&n.reserved.length&&(i.reserved=n.reserved),n.group&&(i.group=!0),n.comment&&(i.comment=n.comment),i};Re.prototype.toJSON=function(e){var n=ii.prototype.toJSON.call(this,e),i=e?!!e.keepComments:!1;return Rt.toObject(["options",n&&n.options||void 0,"oneofs",ii.arrayToJSON(this.oneofsArray,e),"fields",ii.arrayToJSON(this.fieldsArray.filter(function(r){return!r.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",n&&n.nested||void 0,"comment",i?this.comment:void 0])};Re.prototype.resolveAll=function(){for(var e=this.fieldsArray,n=0;n<e.length;)e[n++].resolve();var i=this.oneofsArray;for(n=0;n<i.length;)i[n++].resolve();return ii.prototype.resolveAll.call(this)};Re.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};Re.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof pd&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),md(this)}return e instanceof Vg?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),md(this)):ii.prototype.add.call(this,e)};Re.prototype.remove=function(e){if(e instanceof pd&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),md(this)}if(e instanceof Vg){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),md(this)}return ii.prototype.remove.call(this,e)};Re.prototype.isReservedId=function(e){return ii.isReservedId(this.reserved,e)};Re.prototype.isReservedName=function(e){return ii.isReservedName(this.reserved,e)};Re.prototype.create=function(e){return new this.ctor(e)};Re.prototype.setup=function(){for(var e=this.fullName,n=[],i=0;i<this.fieldsArray.length;++i)n.push(this._fieldsArray[i].resolve().resolvedType);this.encode=wF(this)({Writer:bF,types:n,util:Rt}),this.decode=SF(this)({Reader:Bg,types:n,util:Rt}),this.verify=TF(this)({types:n,util:Rt}),this.fromObject=NT.fromObject(this)({types:n,util:Rt}),this.toObject=NT.toObject(this)({types:n,util:Rt});var r=EF[e];if(r){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(s),s.toObject=this.toObject,this.toObject=r.toObject.bind(s)}return this};Re.prototype.encode=function(e,n){return this.setup().encode(e,n)};Re.prototype.encodeDelimited=function(e,n){return this.encode(e,n&&n.len?n.fork():n).ldelim()};Re.prototype.decode=function(e,n){return this.setup().decode(e,n)};Re.prototype.decodeDelimited=function(e){return e instanceof Bg||(e=Bg.create(e)),this.decode(e,e.uint32())};Re.prototype.verify=function(e){return this.setup().verify(e)};Re.prototype.fromObject=function(e){return this.setup().fromObject(e)};Re.prototype.toObject=function(e,n){return this.setup().toObject(e,n)};Re.d=function(e){return function(i){Rt.decorateType(i,e)}}});var vd=w((IW,zT)=>{"use strict";zT.exports=_n;var yd=Lo();((_n.prototype=Object.create(yd.prototype)).constructor=_n).className="Root";var qg=Ar(),BT=ni(),MF=Ro(),Rr=gt(),VT,zg,Al;function _n(t){yd.call(this,"",t),this.deferred=[],this.files=[]}_n.fromJSON=function(e,n){return n||(n=new _n),e.options&&n.setOptions(e.options),n.addJSON(e.nested)};_n.prototype.resolvePath=Rr.path.resolve;_n.prototype.fetch=Rr.fetch;function UT(){}_n.prototype.load=function t(e,n,i){typeof n=="function"&&(i=n,n=void 0);var r=this;if(!i)return Rr.asPromise(t,r,e,n);var s=i===UT;function o(_,C){if(i){if(s)throw _;var v=i;i=null,v(_,C)}}function a(_){var C=_.lastIndexOf("google/protobuf/");if(C>-1){var v=_.substring(C);if(v in Al)return v}return null}function l(_,C){try{if(Rr.isString(C)&&C.charAt(0)==="{"&&(C=JSON.parse(C)),!Rr.isString(C))r.setOptions(C.options).addJSON(C.nested);else{zg.filename=_;var v=zg(C,r,n),b,A=0;if(v.imports)for(;A<v.imports.length;++A)(b=a(v.imports[A])||r.resolvePath(_,v.imports[A]))&&c(b);if(v.weakImports)for(A=0;A<v.weakImports.length;++A)(b=a(v.weakImports[A])||r.resolvePath(_,v.weakImports[A]))&&c(b,!0)}}catch(S){o(S)}!s&&!u&&o(null,r)}function c(_,C){if(_=a(_)||_,!(r.files.indexOf(_)>-1)){if(r.files.push(_),_ in Al){s?l(_,Al[_]):(++u,setTimeout(function(){--u,l(_,Al[_])}));return}if(s){var v;try{v=Rr.fs.readFileSync(_).toString("utf8")}catch(b){C||o(b);return}l(_,v)}else++u,r.fetch(_,function(b,A){if(--u,!!i){if(b){C?u||o(null,r):o(b);return}l(_,A)}})}}var u=0;Rr.isString(e)&&(e=[e]);for(var f=0,g;f<e.length;++f)(g=r.resolvePath("",e[f]))&&c(g);if(s)return r;u||o(null,r)};_n.prototype.loadSync=function(e,n){if(!Rr.isNode)throw Error("not supported");return this.load(e,n,UT)};_n.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return yd.prototype.resolveAll.call(this)};var _d=/^[A-Z]/;function LT(t,e){var n=e.parent.lookup(e.extend);if(n){var i=new qg(e.fullName,e.id,e.type,e.rule,void 0,e.options);return n.get(i.name)||(i.declaringField=e,e.extensionField=i,n.add(i)),!0}return!1}_n.prototype._handleAdd=function(e){if(e instanceof qg)e.extend!==void 0&&!e.extensionField&&(LT(this,e)||this.deferred.push(e));else if(e instanceof BT)_d.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof MF)){if(e instanceof VT)for(var n=0;n<this.deferred.length;)LT(this,this.deferred[n])?this.deferred.splice(n,1):++n;for(var i=0;i<e.nestedArray.length;++i)this._handleAdd(e._nestedArray[i]);_d.test(e.name)&&(e.parent[e.name]=e)}};_n.prototype._handleRemove=function(e){if(e instanceof qg){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var n=this.deferred.indexOf(e);n>-1&&this.deferred.splice(n,1)}}else if(e instanceof BT)_d.test(e.name)&&delete e.parent[e.name];else if(e instanceof yd){for(var i=0;i<e.nestedArray.length;++i)this._handleRemove(e._nestedArray[i]);_d.test(e.name)&&delete e.parent[e.name]}};_n._configure=function(t,e,n){VT=t,zg=e,Al=n}});var gt=w((xW,jT)=>{"use strict";var rt=jT.exports=Ei(),qT=vg(),jg,Gg;rt.codegen=aT();rt.fetch=cT();rt.path=hT();rt.fs=rt.inquire("fs");rt.toArray=function(e){if(e){for(var n=Object.keys(e),i=new Array(n.length),r=0;r<n.length;)i[r]=e[n[r++]];return i}return[]};rt.toObject=function(e){for(var n={},i=0;i<e.length;){var r=e[i++],s=e[i++];s!==void 0&&(n[r]=s)}return n};var OF=/\\/g,DF=/"/g;rt.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};rt.safeProp=function(e){return!/^[$\w_]+$/.test(e)||rt.isReserved(e)?'["'+e.replace(OF,"\\\\").replace(DF,'\\"')+'"]':"."+e};rt.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var PF=/_([a-z])/g;rt.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(PF,function(n,i){return i.toUpperCase()})};rt.compareFieldsById=function(e,n){return e.id-n.id};rt.decorateType=function(e,n){if(e.$type)return n&&e.$type.name!==n&&(rt.decorateRoot.remove(e.$type),e.$type.name=n,rt.decorateRoot.add(e.$type)),e.$type;jg||(jg=gd());var i=new jg(n||e.name);return rt.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var IF=0;rt.decorateEnum=function(e){if(e.$type)return e.$type;Gg||(Gg=ni());var n=new Gg("Enum"+IF++,e);return rt.decorateRoot.add(n),Object.defineProperty(e,"$type",{value:n,enumerable:!1}),n};rt.setProperty=function(e,n,i){function r(s,o,a){var l=o.shift();if(l==="__proto__"||l==="prototype")return s;if(o.length>0)s[l]=r(s[l]||{},o,a);else{var c=s[l];c&&(a=[].concat(c).concat(a)),s[l]=a}return s}if(typeof e!="object")throw TypeError("dst must be an object");if(!n)throw TypeError("path must be specified");return n=n.split("."),r(e,n,i)};Object.defineProperty(rt,"decorateRoot",{get:function(){return qT.decorated||(qT.decorated=new(vd()))}})});var Os=w((AW,GT)=>{"use strict";GT.exports=yn;yn.className="ReflectionObject";var Cd=gt(),bd;function yn(t,e){if(!Cd.isString(t))throw TypeError("name must be a string");if(e&&!Cd.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(yn.prototype,{root:{get:function(){for(var t=this;t.parent!==null;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}});yn.prototype.toJSON=function(){throw Error()};yn.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var n=e.root;n instanceof bd&&n._handleAdd(this)};yn.prototype.onRemove=function(e){var n=e.root;n instanceof bd&&n._handleRemove(this),this.parent=null,this.resolved=!1};yn.prototype.resolve=function(){return this.resolved?this:(this.root instanceof bd&&(this.resolved=!0),this)};yn.prototype.getOption=function(e){if(this.options)return this.options[e]};yn.prototype.setOption=function(e,n,i){return(!i||!this.options||this.options[e]===void 0)&&((this.options||(this.options={}))[e]=n),this};yn.prototype.setParsedOption=function(e,n,i){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(i){var s=r.find(function(l){return Object.prototype.hasOwnProperty.call(l,e)});if(s){var o=s[e];Cd.setProperty(o,i,n)}else s={},s[e]=Cd.setProperty({},i,n),r.push(s)}else{var a={};a[e]=n,r.push(a)}return this};yn.prototype.setOptions=function(e,n){if(e)for(var i=Object.keys(e),r=0;r<i.length;++r)this.setOption(i[r],e[i[r]],n);return this};yn.prototype.toString=function(){var e=this.constructor.className,n=this.fullName;return n.length?e+" "+n:e};yn._configure=function(t){bd=t}});var ni=w((kW,$T)=>{"use strict";$T.exports=Pi;var HT=Os();((Pi.prototype=Object.create(HT.prototype)).constructor=Pi).className="Enum";var WT=Lo(),wd=gt();function Pi(t,e,n,i,r,s){if(HT.call(this,t,n),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=r||{},this.valuesOptions=s,this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)typeof e[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}Pi.fromJSON=function(e,n){var i=new Pi(e,n.values,n.options,n.comment,n.comments);return i.reserved=n.reserved,i};Pi.prototype.toJSON=function(e){var n=e?!!e.keepComments:!1;return wd.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",n?this.comment:void 0,"comments",n?this.comments:void 0])};Pi.prototype.add=function(e,n,i,r){if(!wd.isString(e))throw TypeError("name must be a string");if(!wd.isInteger(n))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(n))throw Error("id "+n+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[n]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+n+" in "+this);this.values[e]=n}else this.valuesById[this.values[e]=n]=e;return r&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=r||null),this.comments[e]=i||null,this};Pi.prototype.remove=function(e){if(!wd.isString(e))throw TypeError("name must be a string");var n=this.values[e];if(n==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[n],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};Pi.prototype.isReservedId=function(e){return WT.isReservedId(this.reserved,e)};Pi.prototype.isReservedName=function(e){return WT.isReservedName(this.reserved,e)}});var Ug=w((RW,QT)=>{"use strict";QT.exports=AF;var xF=ni(),Hg=Ms(),Wg=gt();function KT(t,e,n,i){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,i,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,i,(e.id<<3|2)>>>0)}function AF(t){for(var e=Wg.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),n,i,r=t.fieldsArray.slice().sort(Wg.compareFieldsById),n=0;n<r.length;++n){var s=r[n].resolve(),o=t._fieldsArray.indexOf(s),a=s.resolvedType instanceof xF?"int32":s.type,l=Hg.basic[a];i="m"+Wg.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",i,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|Hg.mapKey[s.keyType],s.keyType),l===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,i):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,a,i),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",i,i),s.packed&&Hg.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",a,i)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",i),l===void 0?KT(e,s,o,i+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|l)>>>0,a,i)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",i,s.name),l===void 0?KT(e,s,o,i):e("w.uint32(%i).%s(%s)",(s.id<<3|l)>>>0,a,i))}return e("return w")}});var JT=w((NW,YT)=>{"use strict";var Ce=YT.exports=sT();Ce.build="light";function kF(t,e,n){return typeof e=="function"?(n=e,e=new Ce.Root):e||(e=new Ce.Root),e.load(t,n)}Ce.load=kF;function RF(t,e){return e||(e=new Ce.Root),e.loadSync(t)}Ce.loadSync=RF;Ce.encoder=Ug();Ce.decoder=Pg();Ce.verifier=Ag();Ce.converter=Ng();Ce.ReflectionObject=Os();Ce.Namespace=Lo();Ce.Root=vd();Ce.Enum=ni();Ce.Type=gd();Ce.Field=Ar();Ce.OneOf=Ro();Ce.MapField=ud();Ce.Service=hd();Ce.Method=dd();Ce.Message=fd();Ce.wrappers=Fg();Ce.types=Ms();Ce.util=gt();Ce.ReflectionObject._configure(Ce.Root);Ce.Namespace._configure(Ce.Type,Ce.Service,Ce.Enum);Ce.Root._configure(Ce.Type);Ce.Field._configure(Ce.Type)});var Kg=w((FW,eE)=>{"use strict";eE.exports=ZT;var $g=/[\s{}=;:[\],'"()<>]/g,NF=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,FF=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,LF=/^ *[*/]+ */,BF=/^\s*\*?\/*/,VF=/\n/g,UF=/\s/,zF=/\\(.?)/g,qF={0:"\0",r:"\r",n:`
`,t:"	"};function XT(t){return t.replace(zF,function(e,n){switch(n){case"\\":case"":return n;default:return qF[n]||""}})}ZT.unescape=XT;function ZT(t,e){t=t.toString();var n=0,i=t.length,r=1,s=0,o={},a=[],l=null;function c(k){return Error("illegal "+k+" (line "+r+")")}function u(){var k=l==="'"?FF:NF;k.lastIndex=n-1;var J=k.exec(t);if(!J)throw c("string");return n=k.lastIndex,b(l),l=null,XT(J[1])}function f(k){return t.charAt(k)}function g(k,J,se){var ve={type:t.charAt(k++),lineEmpty:!1,leading:se},ut;e?ut=2:ut=3;var Et=k-ut,ke;do if(--Et<0||(ke=t.charAt(Et))===`
`){ve.lineEmpty=!0;break}while(ke===" "||ke==="	");for(var E=t.substring(k,J).split(VF),$e=0;$e<E.length;++$e)E[$e]=E[$e].replace(e?BF:LF,"").trim();ve.text=E.join(`
`).trim(),o[r]=ve,s=r}function _(k){var J=C(k),se=t.substring(k,J),ve=/^\s*\/\//.test(se);return ve}function C(k){for(var J=k;J<i&&f(J)!==`
`;)J++;return J}function v(){if(a.length>0)return a.shift();if(l)return u();var k,J,se,ve,ut,Et=n===0;do{if(n===i)return null;for(k=!1;UF.test(se=f(n));)if(se===`
`&&(Et=!0,++r),++n===i)return null;if(f(n)==="/"){if(++n===i)throw c("comment");if(f(n)==="/")if(e){if(ve=n,ut=!1,_(n-1)){ut=!0;do if(n=C(n),n===i||(n++,!Et))break;while(_(n))}else n=Math.min(i,C(n)+1);ut&&(g(ve,n,Et),Et=!0),r++,k=!0}else{for(ut=f(ve=n+1)==="/";f(++n)!==`
`;)if(n===i)return null;++n,ut&&(g(ve,n-1,Et),Et=!0),++r,k=!0}else if((se=f(n))==="*"){ve=n+1,ut=e||f(ve)==="*";do{if(se===`
`&&++r,++n===i)throw c("comment");J=se,se=f(n)}while(J!=="*"||se!=="/");++n,ut&&(g(ve,n-2,Et),Et=!0),k=!0}else return"/"}}while(k);var ke=n;$g.lastIndex=0;var E=$g.test(f(ke++));if(!E)for(;ke<i&&!$g.test(f(ke));)++ke;var $e=t.substring(n,n=ke);return($e==='"'||$e==="'")&&(l=$e),$e}function b(k){a.push(k)}function A(){if(!a.length){var k=v();if(k===null)return null;b(k)}return a[0]}function S(k,J){var se=A(),ve=se===k;if(ve)return v(),!0;if(!J)throw c("token '"+se+"', '"+k+"' expected");return!1}function R(k){var J=null,se;return k===void 0?(se=o[r-1],delete o[r-1],se&&(e||se.type==="*"||se.lineEmpty)&&(J=se.leading?se.text:null)):(s<k&&A(),se=o[k],delete o[k],se&&!se.lineEmpty&&(e||se.type==="/")&&(J=se.leading?null:se.text)),J}return Object.defineProperty({next:v,peek:A,push:b,skip:S,cmnt:R},"line",{get:function(){return r}})}});var oE=w((LW,sE)=>{"use strict";sE.exports=tr;tr.filename=null;tr.defaults={keepCase:!1};var jF=Kg(),tE=vd(),nE=gd(),iE=Ar(),GF=ud(),rE=Ro(),HF=ni(),WF=hd(),$F=dd(),Qg=Ms(),Yg=gt(),KF=/^[1-9][0-9]*$/,QF=/^-?[1-9][0-9]*$/,YF=/^0[x][0-9a-fA-F]+$/,JF=/^-?0[x][0-9a-fA-F]+$/,XF=/^0[0-7]+$/,ZF=/^-?0[0-7]+$/,e3=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,Ii=/^[a-zA-Z_][a-zA-Z_0-9]*$/,xi=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,t3=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function tr(t,e,n){e instanceof tE||(n=e,e=new tE),n||(n=tr.defaults);var i=n.preferTrailingComment||!1,r=jF(t,n.alternateCommentMode||!1),s=r.next,o=r.push,a=r.peek,l=r.skip,c=r.cmnt,u=!0,f,g,_,C,v=!1,b=e,A=n.keepCase?function(D){return D}:Yg.camelCase;function S(D,P,F){var Y=tr.filename;return F||(tr.filename=null),Error("illegal "+(P||"token")+" '"+D+"' ("+(Y?Y+", ":"")+"line "+r.line+")")}function R(){var D=[],P;do{if((P=s())!=='"'&&P!=="'")throw S(P);D.push(s()),l(P),P=a()}while(P==='"'||P==="'");return D.join("")}function k(D){var P=s();switch(P){case"'":case'"':return o(P),R();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return se(P,!0)}catch{if(D&&xi.test(P))return P;throw S(P,"value")}}function J(D,P){var F,Y;do P&&((F=a())==='"'||F==="'")?D.push(R()):D.push([Y=ve(s()),l("to",!0)?ve(s()):Y]);while(l(",",!0));l(";")}function se(D,P){var F=1;switch(D.charAt(0)==="-"&&(F=-1,D=D.substring(1)),D){case"inf":case"INF":case"Inf":return F*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(KF.test(D))return F*parseInt(D,10);if(YF.test(D))return F*parseInt(D,16);if(XF.test(D))return F*parseInt(D,8);if(e3.test(D))return F*parseFloat(D);throw S(D,"number",P)}function ve(D,P){switch(D){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!P&&D.charAt(0)==="-")throw S(D,"id");if(QF.test(D))return parseInt(D,10);if(JF.test(D))return parseInt(D,16);if(ZF.test(D))return parseInt(D,8);throw S(D,"id")}function ut(){if(f!==void 0)throw S("package");if(f=s(),!xi.test(f))throw S(f,"name");b=b.define(f),l(";")}function Et(){var D=a(),P;switch(D){case"weak":P=_||(_=[]),s();break;case"public":s();default:P=g||(g=[]);break}D=R(),l(";"),P.push(D)}function ke(){if(l("="),C=R(),v=C==="proto3",!v&&C!=="proto2")throw S(C,"syntax");l(";")}function E(D,P){switch(P){case"option":return Le(D,P),l(";"),!0;case"message":return M(D,P),!0;case"enum":return Pe(D,P),!0;case"service":return ot(D,P),!0;case"extend":return Xs(D,P),!0}return!1}function $e(D,P,F){var Y=r.line;if(D&&(typeof D.comment!="string"&&(D.comment=c()),D.filename=tr.filename),l("{",!0)){for(var Q;(Q=s())!=="}";)P(Q);l(";",!0)}else F&&F(),l(";"),D&&(typeof D.comment!="string"||i)&&(D.comment=c(Y)||D.comment)}function M(D,P){if(!Ii.test(P=s()))throw S(P,"type name");var F=new nE(P);$e(F,function(Q){if(!E(F,Q))switch(Q){case"map":be(F,Q);break;case"required":case"repeated":p(F,Q);break;case"optional":v?p(F,"proto3_optional"):p(F,"optional");break;case"oneof":ze(F,Q);break;case"extensions":J(F.extensions||(F.extensions=[]));break;case"reserved":J(F.reserved||(F.reserved=[]),!0);break;default:if(!v||!xi.test(Q))throw S(Q);o(Q),p(F,"optional");break}}),D.add(F)}function p(D,P,F){var Y=s();if(Y==="group"){V(D,P);return}for(;Y.endsWith(".")||a().startsWith(".");)Y+=s();if(!xi.test(Y))throw S(Y,"type");var Q=s();if(!Ii.test(Q))throw S(Q,"name");Q=A(Q),l("=");var me=new iE(Q,ve(s()),Y,P,F);if($e(me,function(ln){if(ln==="option")Le(me,ln),l(";");else throw S(ln)},function(){Mt(me)}),P==="proto3_optional"){var Ct=new rE("_"+Q);me.setOption("proto3_optional",!0),Ct.add(me),D.add(Ct)}else D.add(me);!v&&me.repeated&&(Qg.packed[Y]!==void 0||Qg.basic[Y]===void 0)&&me.setOption("packed",!1,!0)}function V(D,P){var F=s();if(!Ii.test(F))throw S(F,"name");var Y=Yg.lcFirst(F);F===Y&&(F=Yg.ucFirst(F)),l("=");var Q=ve(s()),me=new nE(F);me.group=!0;var Ct=new iE(Y,Q,F,P);Ct.filename=tr.filename,$e(me,function(ln){switch(ln){case"option":Le(me,ln),l(";");break;case"required":case"repeated":p(me,ln);break;case"optional":v?p(me,"proto3_optional"):p(me,"optional");break;case"message":M(me,ln);break;case"enum":Pe(me,ln);break;default:throw S(ln)}}),D.add(me).add(Ct)}function be(D){l("<");var P=s();if(Qg.mapKey[P]===void 0)throw S(P,"type");l(",");var F=s();if(!xi.test(F))throw S(F,"type");l(">");var Y=s();if(!Ii.test(Y))throw S(Y,"name");l("=");var Q=new GF(A(Y),ve(s()),P,F);$e(Q,function(Ct){if(Ct==="option")Le(Q,Ct),l(";");else throw S(Ct)},function(){Mt(Q)}),D.add(Q)}function ze(D,P){if(!Ii.test(P=s()))throw S(P,"name");var F=new rE(A(P));$e(F,function(Q){Q==="option"?(Le(F,Q),l(";")):(o(Q),p(F,"optional"))}),D.add(F)}function Pe(D,P){if(!Ii.test(P=s()))throw S(P,"name");var F=new HF(P);$e(F,function(Q){switch(Q){case"option":Le(F,Q),l(";");break;case"reserved":J(F.reserved||(F.reserved=[]),!0);break;default:Ze(F,Q)}}),D.add(F)}function Ze(D,P){if(!Ii.test(P))throw S(P,"name");l("=");var F=ve(s(),!0),Y={options:void 0};Y.setOption=function(Q,me){this.options===void 0&&(this.options={}),this.options[Q]=me},$e(Y,function(me){if(me==="option")Le(Y,me),l(";");else throw S(me)},function(){Mt(Y)}),D.add(P,F,Y.comment,Y.options)}function Le(D,P){var F=l("(",!0);if(!xi.test(P=s()))throw S(P,"name");var Y=P,Q=Y,me;F&&(l(")"),Y="("+Y+")",Q=Y,P=a(),t3.test(P)&&(me=P.slice(1),Y+=P,s())),l("=");var Ct=Vt(D,Y);Ke(D,Q,Ct,me)}function Vt(D,P){if(l("{",!0)){for(var F={};!l("}",!0);){if(!Ii.test(Ot=s()))throw S(Ot,"name");if(Ot===null)throw S(Ot,"end of input");var Y,Q=Ot;if(l(":",!0),a()==="{")Y=Vt(D,P+"."+Ot);else if(a()==="["){Y=[];var me;if(l("[",!0)){do me=k(!0),Y.push(me);while(l(",",!0));l("]"),typeof me<"u"&&st(D,P+"."+Ot,me)}}else Y=k(!0),st(D,P+"."+Ot,Y);var Ct=F[Q];Ct&&(Y=[].concat(Ct).concat(Y)),F[Q]=Y,l(",",!0),l(";",!0)}return F}var dr=k(!0);return st(D,P,dr),dr}function st(D,P,F){D.setOption&&D.setOption(P,F)}function Ke(D,P,F,Y){D.setParsedOption&&D.setParsedOption(P,F,Y)}function Mt(D){if(l("[",!0)){do Le(D,"option");while(l(",",!0));l("]")}return D}function ot(D,P){if(!Ii.test(P=s()))throw S(P,"service name");var F=new WF(P);$e(F,function(Q){if(!E(F,Q))if(Q==="rpc")Ut(F,Q);else throw S(Q)}),D.add(F)}function Ut(D,P){var F=c(),Y=P;if(!Ii.test(P=s()))throw S(P,"name");var Q=P,me,Ct,dr,ln;if(l("("),l("stream",!0)&&(Ct=!0),!xi.test(P=s())||(me=P,l(")"),l("returns"),l("("),l("stream",!0)&&(ln=!0),!xi.test(P=s())))throw S(P);dr=P,l(")");var Ec=new $F(Q,Y,me,dr,Ct,ln);Ec.comment=F,$e(Ec,function(Df){if(Df==="option")Le(Ec,Df),l(";");else throw S(Df)}),D.add(Ec)}function Xs(D,P){if(!xi.test(P=s()))throw S(P,"reference");var F=P;$e(null,function(Q){switch(Q){case"required":case"repeated":p(D,Q,F);break;case"optional":v?p(D,"proto3_optional",F):p(D,"optional",F);break;default:if(!v||!xi.test(Q))throw S(Q);o(Q),p(D,"optional",F);break}})}for(var Ot;(Ot=s())!==null;)switch(Ot){case"package":if(!u)throw S(Ot);ut();break;case"import":if(!u)throw S(Ot);Et();break;case"syntax":if(!u)throw S(Ot);ke();break;case"option":Le(b,Ot),l(";");break;default:if(E(b,Ot)){u=!1;continue}throw S(Ot)}return tr.filename=null,{package:f,imports:g,weakImports:_,syntax:C,root:e}}});var cE=w((BW,lE)=>{"use strict";lE.exports=ri;var n3=/\/|\./;function ri(t,e){n3.test(t)||(t="google/protobuf/"+t+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),ri[t]=e}ri("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var aE;ri("duration",{Duration:aE={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});ri("timestamp",{Timestamp:aE});ri("empty",{Empty:{fields:{}}});ri("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});ri("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});ri("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});ri.get=function(e){return ri[e]||null}});var dE=w((VW,uE)=>{"use strict";var Nr=uE.exports=JT();Nr.build="full";Nr.tokenize=Kg();Nr.parse=oE();Nr.common=cE();Nr.Root._configure(Nr.Type,Nr.parse,Nr.common)});var Sd=w((UW,hE)=>{"use strict";hE.exports=dE()});var Jg=w((zW,i3)=>{i3.exports={nested:{google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}}}});var _E=w((pe,gE)=>{"use strict";var Qt=Sd();gE.exports=pe=Qt.descriptor=Qt.Root.fromJSON(Jg()).lookup(".google.protobuf");var fE=Qt.Namespace,kl=Qt.Root,nr=Qt.Enum,Fr=Qt.Type,Lr=Qt.Field,r3=Qt.MapField,Td=Qt.OneOf,Rl=Qt.Service,Ed=Qt.Method;kl.fromDescriptor=function(e){typeof e.length=="number"&&(e=pe.FileDescriptorSet.decode(e));var n=new kl;if(e.file)for(var i,r,s=0,o;s<e.file.length;++s){if(r=n,(i=e.file[s]).package&&i.package.length&&(r=n.define(i.package)),i.name&&i.name.length&&n.files.push(r.filename=i.name),i.messageType)for(o=0;o<i.messageType.length;++o)r.add(Fr.fromDescriptor(i.messageType[o],i.syntax));if(i.enumType)for(o=0;o<i.enumType.length;++o)r.add(nr.fromDescriptor(i.enumType[o]));if(i.extension)for(o=0;o<i.extension.length;++o)r.add(Lr.fromDescriptor(i.extension[o]));if(i.service)for(o=0;o<i.service.length;++o)r.add(Rl.fromDescriptor(i.service[o]));var a=Vo(i.options,pe.FileOptions);if(a){var l=Object.keys(a);for(o=0;o<l.length;++o)r.setOption(l[o],a[l[o]])}}return n};kl.prototype.toDescriptor=function(e){var n=pe.FileDescriptorSet.create();return pE(this,n.file,e),n};function pE(t,e,n){var i=pe.FileDescriptorProto.create({name:t.filename||(t.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(i.syntax=n),t instanceof kl||(i.package=t.fullName.substring(1));for(var r=0,s;r<t.nestedArray.length;++r)(s=t._nestedArray[r])instanceof Fr?i.messageType.push(s.toDescriptor(n)):s instanceof nr?i.enumType.push(s.toDescriptor()):s instanceof Lr?i.extension.push(s.toDescriptor(n)):s instanceof Rl?i.service.push(s.toDescriptor()):s instanceof fE&&pE(s,e,n);i.options=Uo(t.options,pe.FileOptions),i.messageType.length+i.enumType.length+i.extension.length+i.service.length&&e.push(i)}var s3=0;Fr.fromDescriptor=function(e,n){typeof e.length=="number"&&(e=pe.DescriptorProto.decode(e));var i=new Fr(e.name.length?e.name:"Type"+s3++,Vo(e.options,pe.MessageOptions)),r;if(e.oneofDecl)for(r=0;r<e.oneofDecl.length;++r)i.add(Td.fromDescriptor(e.oneofDecl[r]));if(e.field)for(r=0;r<e.field.length;++r){var s=Lr.fromDescriptor(e.field[r],n);i.add(s),e.field[r].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[r].oneofIndex].add(s)}if(e.extension)for(r=0;r<e.extension.length;++r)i.add(Lr.fromDescriptor(e.extension[r],n));if(e.nestedType)for(r=0;r<e.nestedType.length;++r)i.add(Fr.fromDescriptor(e.nestedType[r],n)),e.nestedType[r].options&&e.nestedType[r].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(r=0;r<e.enumType.length;++r)i.add(nr.fromDescriptor(e.enumType[r]));if(e.extensionRange&&e.extensionRange.length)for(i.extensions=[],r=0;r<e.extensionRange.length;++r)i.extensions.push([e.extensionRange[r].start,e.extensionRange[r].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(r=0;r<e.reservedRange.length;++r)i.reserved.push([e.reservedRange[r].start,e.reservedRange[r].end]);if(e.reservedName)for(r=0;r<e.reservedName.length;++r)i.reserved.push(e.reservedName[r])}return i};Fr.prototype.toDescriptor=function(e){var n=pe.DescriptorProto.create({name:this.name}),i;for(i=0;i<this.fieldsArray.length;++i){var r;if(n.field.push(r=this._fieldsArray[i].toDescriptor(e)),this._fieldsArray[i]instanceof r3){var s=Xg(this._fieldsArray[i].keyType,this._fieldsArray[i].resolvedKeyType),o=Xg(this._fieldsArray[i].type,this._fieldsArray[i].resolvedType),a=o===11||o===14?this._fieldsArray[i].resolvedType&&mE(this.parent,this._fieldsArray[i].resolvedType)||this._fieldsArray[i].type:void 0;n.nestedType.push(pe.DescriptorProto.create({name:r.typeName,field:[pe.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),pe.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:a})],options:pe.MessageOptions.create({mapEntry:!0})}))}}for(i=0;i<this.oneofsArray.length;++i)n.oneofDecl.push(this._oneofsArray[i].toDescriptor());for(i=0;i<this.nestedArray.length;++i)this._nestedArray[i]instanceof Lr?n.field.push(this._nestedArray[i].toDescriptor(e)):this._nestedArray[i]instanceof Fr?n.nestedType.push(this._nestedArray[i].toDescriptor(e)):this._nestedArray[i]instanceof nr&&n.enumType.push(this._nestedArray[i].toDescriptor());if(this.extensions)for(i=0;i<this.extensions.length;++i)n.extensionRange.push(pe.DescriptorProto.ExtensionRange.create({start:this.extensions[i][0],end:this.extensions[i][1]}));if(this.reserved)for(i=0;i<this.reserved.length;++i)typeof this.reserved[i]=="string"?n.reservedName.push(this.reserved[i]):n.reservedRange.push(pe.DescriptorProto.ReservedRange.create({start:this.reserved[i][0],end:this.reserved[i][1]}));return n.options=Uo(this.options,pe.MessageOptions),n};var o3=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;Lr.fromDescriptor=function(e,n){if(typeof e.length=="number"&&(e=pe.DescriptorProto.decode(e)),typeof e.number!="number")throw Error("missing field id");var i;e.typeName&&e.typeName.length?i=e.typeName:i=d3(e.type);var r;switch(e.label){case 1:r=void 0;break;case 2:r="required";break;case 3:r="repeated";break;default:throw Error("illegal label: "+e.label)}var s=e.extendee;e.extendee!==void 0&&(s=s.length?s:void 0);var o=new Lr(e.name.length?e.name:"field"+e.number,e.number,i,r,s);if(o.options=Vo(e.options,pe.FieldOptions),e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:var l=o3.exec(a);l&&(a=parseInt(a));break}o.setOption("default",a)}return h3(e.type)&&(n==="proto3"?e.options&&!e.options.packed&&o.setOption("packed",!1):e.options&&e.options.packed||o.setOption("packed",!1)),o};Lr.prototype.toDescriptor=function(e){var n=pe.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)n.type=11,n.typeName=Qt.util.ucFirst(this.name),n.label=3;else{switch(n.type=Xg(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:n.typeName=this.resolvedType?mE(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":n.label=3;break;case"required":n.label=2;break;default:n.label=1;break}}if(n.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(n.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(n.options=Uo(this.options,pe.FieldOptions),this.options.default!=null&&(n.defaultValue=String(this.options.default))),e==="proto3"?this.packed||((n.options||(n.options=pe.FieldOptions.create())).packed=!1):this.packed&&((n.options||(n.options=pe.FieldOptions.create())).packed=!0),n};var a3=0;nr.fromDescriptor=function(e){typeof e.length=="number"&&(e=pe.EnumDescriptorProto.decode(e));var n={};if(e.value)for(var i=0;i<e.value.length;++i){var r=e.value[i].name,s=e.value[i].number||0;n[r&&r.length?r:"NAME"+s]=s}return new nr(e.name&&e.name.length?e.name:"Enum"+a3++,n,Vo(e.options,pe.EnumOptions))};nr.prototype.toDescriptor=function(){for(var e=[],n=0,i=Object.keys(this.values);n<i.length;++n)e.push(pe.EnumValueDescriptorProto.create({name:i[n],number:this.values[i[n]]}));return pe.EnumDescriptorProto.create({name:this.name,value:e,options:Uo(this.options,pe.EnumOptions)})};var l3=0;Td.fromDescriptor=function(e){return typeof e.length=="number"&&(e=pe.OneofDescriptorProto.decode(e)),new Td(e.name&&e.name.length?e.name:"oneof"+l3++)};Td.prototype.toDescriptor=function(){return pe.OneofDescriptorProto.create({name:this.name})};var c3=0;Rl.fromDescriptor=function(e){typeof e.length=="number"&&(e=pe.ServiceDescriptorProto.decode(e));var n=new Rl(e.name&&e.name.length?e.name:"Service"+c3++,Vo(e.options,pe.ServiceOptions));if(e.method)for(var i=0;i<e.method.length;++i)n.add(Ed.fromDescriptor(e.method[i]));return n};Rl.prototype.toDescriptor=function(){for(var e=[],n=0;n<this.methodsArray.length;++n)e.push(this._methodsArray[n].toDescriptor());return pe.ServiceDescriptorProto.create({name:this.name,method:e,options:Uo(this.options,pe.ServiceOptions)})};var u3=0;Ed.fromDescriptor=function(e){return typeof e.length=="number"&&(e=pe.MethodDescriptorProto.decode(e)),new Ed(e.name&&e.name.length?e.name:"Method"+u3++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,Vo(e.options,pe.MethodOptions))};Ed.prototype.toDescriptor=function(){return pe.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:Uo(this.options,pe.MethodOptions)})};function d3(t){switch(t){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+t)}function h3(t){switch(t){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function Xg(t,e){switch(t){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(e instanceof nr)return 14;if(e instanceof Fr)return e.group?10:11;throw Error("illegal type: "+t)}function Vo(t,e){if(t){for(var n=[],i=0,r,s,o;i<e.fieldsArray.length;++i)(s=(r=e._fieldsArray[i]).name)!=="uninterpretedOption"&&t.hasOwnProperty(s)&&(o=t[s],r.resolvedType instanceof nr&&typeof o=="number"&&r.resolvedType.valuesById[o]!==void 0&&(o=r.resolvedType.valuesById[o]),n.push(f3(s),o));return n.length?Qt.util.toObject(n):void 0}}function Uo(t,e){if(t){for(var n=[],i=0,r=Object.keys(t),s,o;i<r.length;++i)if(o=t[s=r[i]],s!=="default"){var a=e.fields[s];!a&&!(a=e.fields[s=Qt.util.camelCase(s)])||n.push(s,o)}return n.length?e.fromObject(Qt.util.toObject(n)):void 0}}function mE(t,e){var n=t.fullName.split("."),i=e.fullName.split("."),r=0,s=0,o=i.length-1;if(!(t instanceof kl)&&e instanceof fE)for(;r<n.length&&s<o&&n[r]===i[s];){var a=e.lookup(n[r++],!0);if(a!==null&&a!==e)break;++s}else for(;r<n.length&&s<o&&n[r]===i[s];++r,++s);return i.slice(s).join(".")}function f3(t){return t.substring(0,1)+t.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,n){return"_"+n.toLowerCase()})}});var yE=w((qW,p3)=>{p3.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}}});var vE=w((jW,m3)=>{m3.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var CE=w((GW,g3)=>{g3.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var TE=w(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.addCommonProtos=Br.loadProtosWithOptionsSync=Br.loadProtosWithOptions=void 0;var bE=Me("fs"),wE=Me("path"),zo=Sd();function SE(t,e){let n=t.resolvePath;t.resolvePath=(i,r)=>{if(wE.isAbsolute(r))return r;for(let s of e){let o=wE.join(s,r);try{return bE.accessSync(o,bE.constants.R_OK),o}catch{continue}}return process.emitWarning(`${r} not found in any of the include paths ${e}`),n(i,r)}}function _3(t,e){return T(this,null,function*(){let n=new zo.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));SE(n,e.includeDirs)}let i=yield n.load(t,e);return i.resolveAll(),i})}Br.loadProtosWithOptions=_3;function y3(t,e){let n=new zo.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");SE(n,e.includeDirs)}let i=n.loadSync(t,e);return i.resolveAll(),i}Br.loadProtosWithOptionsSync=y3;function v3(){let t=yE(),e=Jg(),n=vE(),i=CE();zo.common("api",t.nested.google.nested.protobuf.nested),zo.common("descriptor",e.nested.google.nested.protobuf.nested),zo.common("source_context",n.nested.google.nested.protobuf.nested),zo.common("type",i.nested.google.nested.protobuf.nested)}Br.addCommonProtos=v3});var OE=w((ME,Zg)=>{"use strict";var EE=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function n(M,p,V){this.low=M|0,this.high=p|0,this.unsigned=!!V}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0});function i(M){return(M&&M.__isLong__)===!0}function r(M){var p=Math.clz32(M&-M);return M?31-p:p}n.isLong=i;var s={},o={};function a(M,p){var V,be,ze;return p?(M>>>=0,(ze=0<=M&&M<256)&&(be=o[M],be)?be:(V=c(M,0,!0),ze&&(o[M]=V),V)):(M|=0,(ze=-128<=M&&M<128)&&(be=s[M],be)?be:(V=c(M,M<0?-1:0,!1),ze&&(s[M]=V),V))}n.fromInt=a;function l(M,p){if(isNaN(M))return p?k:R;if(p){if(M<0)return k;if(M>=b)return Et}else{if(M<=-A)return ke;if(M+1>=A)return ut}return M<0?l(-M,p).neg():c(M%v|0,M/v|0,p)}n.fromNumber=l;function c(M,p,V){return new n(M,p,V)}n.fromBits=c;var u=Math.pow;function f(M,p,V){if(M.length===0)throw Error("empty string");if(typeof p=="number"?(V=p,p=!1):p=!!p,M==="NaN"||M==="Infinity"||M==="+Infinity"||M==="-Infinity")return p?k:R;if(V=V||10,V<2||36<V)throw RangeError("radix");var be;if((be=M.indexOf("-"))>0)throw Error("interior hyphen");if(be===0)return f(M.substring(1),p,V).neg();for(var ze=l(u(V,8)),Pe=R,Ze=0;Ze<M.length;Ze+=8){var Le=Math.min(8,M.length-Ze),Vt=parseInt(M.substring(Ze,Ze+Le),V);if(Le<8){var st=l(u(V,Le));Pe=Pe.mul(st).add(l(Vt))}else Pe=Pe.mul(ze),Pe=Pe.add(l(Vt))}return Pe.unsigned=p,Pe}n.fromString=f;function g(M,p){return typeof M=="number"?l(M,p):typeof M=="string"?f(M,p):c(M.low,M.high,typeof p=="boolean"?p:M.unsigned)}n.fromValue=g;var _=65536,C=1<<24,v=_*_,b=v*v,A=b/2,S=a(C),R=a(0);n.ZERO=R;var k=a(0,!0);n.UZERO=k;var J=a(1);n.ONE=J;var se=a(1,!0);n.UONE=se;var ve=a(-1);n.NEG_ONE=ve;var ut=c(-1,2147483647,!1);n.MAX_VALUE=ut;var Et=c(-1,-1,!0);n.MAX_UNSIGNED_VALUE=Et;var ke=c(0,-2147483648,!1);n.MIN_VALUE=ke;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*v+(this.low>>>0):this.high*v+(this.low>>>0)},E.toString=function(p){if(p=p||10,p<2||36<p)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(ke)){var V=l(p),be=this.div(V),ze=be.mul(V).sub(this);return be.toString(p)+ze.toInt().toString(p)}else return"-"+this.neg().toString(p);for(var Pe=l(u(p,6),this.unsigned),Ze=this,Le="";;){var Vt=Ze.div(Pe),st=Ze.sub(Vt.mul(Pe)).toInt()>>>0,Ke=st.toString(p);if(Ze=Vt,Ze.isZero())return Ke+Le;for(;Ke.length<6;)Ke="0"+Ke;Le=""+Ke+Le}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ke)?64:this.neg().getNumBitsAbs();for(var p=this.high!=0?this.high:this.low,V=31;V>0&&!(p&1<<V);V--);return this.high!=0?V+33:V+1},E.isZero=function(){return this.high===0&&this.low===0},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return(this.low&1)===1},E.isEven=function(){return(this.low&1)===0},E.equals=function(p){return i(p)||(p=g(p)),this.unsigned!==p.unsigned&&this.high>>>31===1&&p.high>>>31===1?!1:this.high===p.high&&this.low===p.low},E.eq=E.equals,E.notEquals=function(p){return!this.eq(p)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(p){return this.comp(p)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(p){return this.comp(p)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(p){return this.comp(p)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(p){return this.comp(p)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(p){if(i(p)||(p=g(p)),this.eq(p))return 0;var V=this.isNegative(),be=p.isNegative();return V&&!be?-1:!V&&be?1:this.unsigned?p.high>>>0>this.high>>>0||p.high===this.high&&p.low>>>0>this.low>>>0?-1:1:this.sub(p).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(ke)?ke:this.not().add(J)},E.neg=E.negate,E.add=function(p){i(p)||(p=g(p));var V=this.high>>>16,be=this.high&65535,ze=this.low>>>16,Pe=this.low&65535,Ze=p.high>>>16,Le=p.high&65535,Vt=p.low>>>16,st=p.low&65535,Ke=0,Mt=0,ot=0,Ut=0;return Ut+=Pe+st,ot+=Ut>>>16,Ut&=65535,ot+=ze+Vt,Mt+=ot>>>16,ot&=65535,Mt+=be+Le,Ke+=Mt>>>16,Mt&=65535,Ke+=V+Ze,Ke&=65535,c(ot<<16|Ut,Ke<<16|Mt,this.unsigned)},E.subtract=function(p){return i(p)||(p=g(p)),this.add(p.neg())},E.sub=E.subtract,E.multiply=function(p){if(this.isZero())return this;if(i(p)||(p=g(p)),e){var V=e.mul(this.low,this.high,p.low,p.high);return c(V,e.get_high(),this.unsigned)}if(p.isZero())return this.unsigned?k:R;if(this.eq(ke))return p.isOdd()?ke:R;if(p.eq(ke))return this.isOdd()?ke:R;if(this.isNegative())return p.isNegative()?this.neg().mul(p.neg()):this.neg().mul(p).neg();if(p.isNegative())return this.mul(p.neg()).neg();if(this.lt(S)&&p.lt(S))return l(this.toNumber()*p.toNumber(),this.unsigned);var be=this.high>>>16,ze=this.high&65535,Pe=this.low>>>16,Ze=this.low&65535,Le=p.high>>>16,Vt=p.high&65535,st=p.low>>>16,Ke=p.low&65535,Mt=0,ot=0,Ut=0,Xs=0;return Xs+=Ze*Ke,Ut+=Xs>>>16,Xs&=65535,Ut+=Pe*Ke,ot+=Ut>>>16,Ut&=65535,Ut+=Ze*st,ot+=Ut>>>16,Ut&=65535,ot+=ze*Ke,Mt+=ot>>>16,ot&=65535,ot+=Pe*st,Mt+=ot>>>16,ot&=65535,ot+=Ze*Vt,Mt+=ot>>>16,ot&=65535,Mt+=be*Ke+ze*st+Pe*Vt+Ze*Le,Mt&=65535,c(Ut<<16|Xs,Mt<<16|ot,this.unsigned)},E.mul=E.multiply,E.divide=function(p){if(i(p)||(p=g(p)),p.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&p.low===-1&&p.high===-1)return this;var V=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,p.low,p.high);return c(V,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?k:R;var be,ze,Pe;if(this.unsigned){if(p.unsigned||(p=p.toUnsigned()),p.gt(this))return k;if(p.gt(this.shru(1)))return se;Pe=k}else{if(this.eq(ke)){if(p.eq(J)||p.eq(ve))return ke;if(p.eq(ke))return J;var Ze=this.shr(1);return be=Ze.div(p).shl(1),be.eq(R)?p.isNegative()?J:ve:(ze=this.sub(p.mul(be)),Pe=be.add(ze.div(p)),Pe)}else if(p.eq(ke))return this.unsigned?k:R;if(this.isNegative())return p.isNegative()?this.neg().div(p.neg()):this.neg().div(p).neg();if(p.isNegative())return this.div(p.neg()).neg();Pe=R}for(ze=this;ze.gte(p);){be=Math.max(1,Math.floor(ze.toNumber()/p.toNumber()));for(var Le=Math.ceil(Math.log(be)/Math.LN2),Vt=Le<=48?1:u(2,Le-48),st=l(be),Ke=st.mul(p);Ke.isNegative()||Ke.gt(ze);)be-=Vt,st=l(be,this.unsigned),Ke=st.mul(p);st.isZero()&&(st=J),Pe=Pe.add(st),ze=ze.sub(Ke)}return Pe},E.div=E.divide,E.modulo=function(p){if(i(p)||(p=g(p)),e){var V=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,p.low,p.high);return c(V,e.get_high(),this.unsigned)}return this.sub(this.div(p).mul(p))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return c(~this.low,~this.high,this.unsigned)},E.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},E.clz=E.countLeadingZeros,E.countTrailingZeros=function(){return this.low?r(this.low):r(this.high)+32},E.ctz=E.countTrailingZeros,E.and=function(p){return i(p)||(p=g(p)),c(this.low&p.low,this.high&p.high,this.unsigned)},E.or=function(p){return i(p)||(p=g(p)),c(this.low|p.low,this.high|p.high,this.unsigned)},E.xor=function(p){return i(p)||(p=g(p)),c(this.low^p.low,this.high^p.high,this.unsigned)},E.shiftLeft=function(p){return i(p)&&(p=p.toInt()),(p&=63)===0?this:p<32?c(this.low<<p,this.high<<p|this.low>>>32-p,this.unsigned):c(0,this.low<<p-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(p){return i(p)&&(p=p.toInt()),(p&=63)===0?this:p<32?c(this.low>>>p|this.high<<32-p,this.high>>p,this.unsigned):c(this.high>>p-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(p){return i(p)&&(p=p.toInt()),(p&=63)===0?this:p<32?c(this.low>>>p|this.high<<32-p,this.high>>>p,this.unsigned):p===32?c(this.high,0,this.unsigned):c(this.high>>>p-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.rotateLeft=function(p){var V;return i(p)&&(p=p.toInt()),(p&=63)===0?this:p===32?c(this.high,this.low,this.unsigned):p<32?(V=32-p,c(this.low<<p|this.high>>>V,this.high<<p|this.low>>>V,this.unsigned)):(p-=32,V=32-p,c(this.high<<p|this.low>>>V,this.low<<p|this.high>>>V,this.unsigned))},E.rotl=E.rotateLeft,E.rotateRight=function(p){var V;return i(p)&&(p=p.toInt()),(p&=63)===0?this:p===32?c(this.high,this.low,this.unsigned):p<32?(V=32-p,c(this.high<<V|this.low>>>p,this.low<<V|this.high>>>p,this.unsigned)):(p-=32,V=32-p,c(this.low<<V|this.high>>>p,this.high<<V|this.low>>>p,this.unsigned))},E.rotr=E.rotateRight,E.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},E.toBytes=function(p){return p?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var p=this.high,V=this.low;return[V&255,V>>>8&255,V>>>16&255,V>>>24,p&255,p>>>8&255,p>>>16&255,p>>>24]},E.toBytesBE=function(){var p=this.high,V=this.low;return[p>>>24,p>>>16&255,p>>>8&255,p&255,V>>>24,V>>>16&255,V>>>8&255,V&255]},n.fromBytes=function(p,V,be){return be?n.fromBytesLE(p,V):n.fromBytesBE(p,V)},n.fromBytesLE=function(p,V){return new n(p[0]|p[1]<<8|p[2]<<16|p[3]<<24,p[4]|p[5]<<8|p[6]<<16|p[7]<<24,V)},n.fromBytesBE=function(p,V){return new n(p[4]<<24|p[5]<<16|p[6]<<8|p[7],p[0]<<24|p[1]<<16|p[2]<<8|p[3],V)};var $e=n;return t.default=$e,"default"in t?t.default:t}({});typeof define=="function"&&define.amd?define([],function(){return EE}):typeof Zg=="object"&&typeof ME=="object"&&(Zg.exports=EE)});var i_=w(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.loadFileDescriptorSetFromObject=Nt.loadFileDescriptorSetFromBuffer=Nt.fromJSON=Nt.loadSync=Nt.load=Nt.isAnyExtension=Nt.Long=void 0;var C3=pS(),Ai=Sd(),t_=_E(),n_=TE(),b3=OE();Nt.Long=b3;function w3(t){return"@type"in t&&typeof t["@type"]=="string"}Nt.isAnyExtension=w3;var IE={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function S3(t,e){return t===""?e:t+"."+e}function T3(t){return t instanceof Ai.Service||t instanceof Ai.Type||t instanceof Ai.Enum}function E3(t){return t instanceof Ai.Namespace||t instanceof Ai.Root}function xE(t,e){let n=S3(e,t.name);return T3(t)?[[n,t]]:E3(t)&&typeof t.nested<"u"?Object.keys(t.nested).map(i=>xE(t.nested[i],n)).reduce((i,r)=>i.concat(r),[]):[]}function DE(t,e){return function(i){return t.toObject(t.decode(i),e)}}function PE(t){return function(n){if(Array.isArray(n))throw new Error(`Failed to serialize message: expected object with ${t.name} structure, got array instead`);let i=t.fromObject(n);return t.encode(i).finish()}}function M3(t,e,n,i){let r=t.resolvedRequestType,s=t.resolvedResponseType;return{path:"/"+e+"/"+t.name,requestStream:!!t.requestStream,responseStream:!!t.responseStream,requestSerialize:PE(r),requestDeserialize:DE(r,n),responseSerialize:PE(s),responseDeserialize:DE(s,n),originalName:C3(t.name),requestType:e_(r,i),responseType:e_(s,i)}}function O3(t,e,n,i){let r={};for(let s of t.methodsArray)r[s.name]=M3(s,e,n,i);return r}function e_(t,e){let n=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:n.$type.toObject(n,IE),fileDescriptorProtos:e}}function D3(t,e){let n=t.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:n.$type.toObject(n,IE),fileDescriptorProtos:e}}function P3(t,e,n,i){if(t instanceof Ai.Service)return O3(t,e,n,i);if(t instanceof Ai.Type)return e_(t,i);if(t instanceof Ai.Enum)return D3(t,i);throw new Error("Type mismatch in reflection object handling")}function Md(t,e){let n={};t.resolveAll();let r=t.toDescriptor("proto3").file.map(s=>Buffer.from(t_.FileDescriptorProto.encode(s).finish()));for(let[s,o]of xE(t,""))n[s]=P3(o,s,e,r);return n}function AE(t,e){e=e||{};let n=Ai.Root.fromDescriptor(t);return n.resolveAll(),Md(n,e)}function I3(t,e){return(0,n_.loadProtosWithOptions)(t,e).then(n=>Md(n,e))}Nt.load=I3;function x3(t,e){let n=(0,n_.loadProtosWithOptionsSync)(t,e);return Md(n,e)}Nt.loadSync=x3;function A3(t,e){e=e||{};let n=Ai.Root.fromJSON(t);return n.resolveAll(),Md(n,e)}Nt.fromJSON=A3;function k3(t,e){let n=t_.FileDescriptorSet.decode(t);return AE(n,e)}Nt.loadFileDescriptorSetFromBuffer=k3;function R3(t,e){let n=t_.FileDescriptorSet.fromObject(t);return AE(n,e)}Nt.loadFileDescriptorSetFromObject=R3;(0,n_.addCommonProtos)()});var Ps=w(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.setup=qe.getChannelzServiceDefinition=qe.getChannelzHandlers=qe.unregisterChannelzRef=qe.registerChannelzSocket=qe.registerChannelzServer=qe.registerChannelzSubchannel=qe.registerChannelzChannel=qe.ChannelzCallTracker=qe.ChannelzChildrenTracker=qe.ChannelzTrace=void 0;var kE=Me("net"),Nl=kn(),Ll=Se(),N3=Si(),F3=$u(),L3=eg();function r_(t){return{channel_id:t.id,name:t.name}}function l_(t){return{subchannel_id:t.id,name:t.name}}function B3(t){return{server_id:t.id}}function Dd(t){return{socket_id:t.id,name:t.name}}var RE=32,s_=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,n,i){let r=new Date;this.events.push({description:n,severity:e,timestamp:r,childChannel:i?.kind==="channel"?i:void 0,childSubchannel:i?.kind==="subchannel"?i:void 0}),this.events.length>=RE*2&&(this.events=this.events.slice(RE)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:ir(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:ir(e.timestamp),channel_ref:e.childChannel?r_(e.childChannel):null,subchannel_ref:e.childSubchannel?l_(e.childSubchannel):null}))}}};qe.ChannelzTrace=s_;var o_=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var n,i,r;switch(e.kind){case"channel":{let s=(n=this.channelChildren.get(e.id))!==null&&n!==void 0?n:{ref:e,count:0};s.count+=1,this.channelChildren.set(e.id,s);break}case"subchannel":{let s=(i=this.subchannelChildren.get(e.id))!==null&&i!==void 0?i:{ref:e,count:0};s.count+=1,this.subchannelChildren.set(e.id,s);break}case"socket":{let s=(r=this.socketChildren.get(e.id))!==null&&r!==void 0?r:{ref:e,count:0};s.count+=1,this.socketChildren.set(e.id,s);break}}}unrefChild(e){switch(e.kind){case"channel":{let n=this.channelChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,n));break}case"subchannel":{let n=this.subchannelChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,n));break}case"socket":{let n=this.socketChildren.get(e.id);n!==void 0&&(n.count-=1,n.count===0?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,n));break}}}getChildLists(){let e=[];for(let{ref:r}of this.channelChildren.values())e.push(r);let n=[];for(let{ref:r}of this.subchannelChildren.values())n.push(r);let i=[];for(let{ref:r}of this.socketChildren.values())i.push(r);return{channels:e,subchannels:n,sockets:i}}};qe.ChannelzChildrenTracker=o_;var a_=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};qe.ChannelzCallTracker=a_;var V3=1;function Pd(){return V3++}var Fl=[],c_=[],Vr=[],u_=[];function U3(t,e,n){let i=Pd(),r={id:i,name:t,kind:"channel"};return n&&(Fl[i]={ref:r,getInfo:e}),r}qe.registerChannelzChannel=U3;function z3(t,e,n){let i=Pd(),r={id:i,name:t,kind:"subchannel"};return n&&(c_[i]={ref:r,getInfo:e}),r}qe.registerChannelzSubchannel=z3;function q3(t,e){let n=Pd(),i={id:n,kind:"server"};return e&&(Vr[n]={ref:i,getInfo:t}),i}qe.registerChannelzServer=q3;function j3(t,e,n){let i=Pd(),r={id:i,name:t,kind:"socket"};return n&&(u_[i]={ref:r,getInfo:e}),r}qe.registerChannelzSocket=j3;function G3(t){switch(t.kind){case"channel":delete Fl[t.id];return;case"subchannel":delete c_[t.id];return;case"server":delete Vr[t.id];return;case"socket":delete u_[t.id];return}}qe.unregisterChannelzRef=G3;function H3(t){let e=Number.parseInt(t,16);return[e/256|0,e%256]}function NE(t){if(t==="")return[];let e=t.split(":").map(i=>H3(i));return[].concat(...e)}function W3(t){if((0,kE.isIPv4)(t))return Buffer.from(Uint8Array.from(t.split(".").map(e=>Number.parseInt(e))));if((0,kE.isIPv6)(t)){let e,n,i=t.indexOf("::");i===-1?(e=t,n=""):(e=t.substring(0,i),n=t.substring(i+2));let r=Buffer.from(NE(e)),s=Buffer.from(NE(n)),o=Buffer.alloc(16-r.length-s.length,0);return Buffer.concat([r,o,s])}else return null}function LE(t){switch(t){case Nl.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case Nl.ConnectivityState.IDLE:return{state:"IDLE"};case Nl.ConnectivityState.READY:return{state:"READY"};case Nl.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case Nl.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function ir(t){if(!t)return null;let e=t.getTime();return{seconds:e/1e3|0,nanos:e%1e3*1e6}}function BE(t){let e=t.getInfo();return{ref:r_(t.ref),data:{target:e.target,state:LE(e.state),calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:ir(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},channel_ref:e.children.channels.map(n=>r_(n)),subchannel_ref:e.children.subchannels.map(n=>l_(n))}}function $3(t,e){let n=Number.parseInt(t.request.channel_id),i=Fl[n];if(i===void 0){e({code:Ll.Status.NOT_FOUND,details:"No channel data found for id "+n});return}e(null,{channel:BE(i)})}function K3(t,e){let n=Number.parseInt(t.request.max_results),i=[],r=Number.parseInt(t.request.start_channel_id);for(;r<Fl.length;r++){let s=Fl[r];if(s!==void 0&&(i.push(BE(s)),i.length>=n))break}e(null,{channel:i,end:r>=Vr.length})}function VE(t){let e=t.getInfo();return{ref:B3(t.ref),data:{calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:ir(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},listen_socket:e.listenerChildren.sockets.map(n=>Dd(n))}}function Q3(t,e){let n=Number.parseInt(t.request.server_id),i=Vr[n];if(i===void 0){e({code:Ll.Status.NOT_FOUND,details:"No server data found for id "+n});return}e(null,{server:VE(i)})}function Y3(t,e){let n=Number.parseInt(t.request.max_results),i=[],r=Number.parseInt(t.request.start_server_id);for(;r<Vr.length;r++){let s=Vr[r];if(s!==void 0&&(i.push(VE(s)),i.length>=n))break}e(null,{server:i,end:r>=Vr.length})}function J3(t,e){let n=Number.parseInt(t.request.subchannel_id),i=c_[n];if(i===void 0){e({code:Ll.Status.NOT_FOUND,details:"No subchannel data found for id "+n});return}let r=i.getInfo(),s={ref:l_(i.ref),data:{target:r.target,state:LE(r.state),calls_started:r.callTracker.callsStarted,calls_succeeded:r.callTracker.callsSucceeded,calls_failed:r.callTracker.callsFailed,last_call_started_timestamp:ir(r.callTracker.lastCallStartedTimestamp),trace:r.trace.getTraceMessage()},socket_ref:r.children.sockets.map(o=>Dd(o))};e(null,{subchannel:s})}function FE(t){var e;return(0,N3.isTcpSubchannelAddress)(t)?{address:"tcpip_address",tcpip_address:{ip_address:(e=W3(t.host))!==null&&e!==void 0?e:void 0,port:t.port}}:{address:"uds_address",uds_address:{filename:t.path}}}function X3(t,e){var n,i,r,s,o;let a=Number.parseInt(t.request.socket_id),l=u_[a];if(l===void 0){e({code:Ll.Status.NOT_FOUND,details:"No socket data found for id "+a});return}let c=l.getInfo(),u=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(n=c.security.cipherSuiteStandardName)!==null&&n!==void 0?n:void 0,other_name:(i=c.security.cipherSuiteOtherName)!==null&&i!==void 0?i:void 0,local_certificate:(r=c.security.localCertificate)!==null&&r!==void 0?r:void 0,remote_certificate:(s=c.security.remoteCertificate)!==null&&s!==void 0?s:void 0}}:null,f={ref:Dd(l.ref),local:c.localAddress?FE(c.localAddress):null,remote:c.remoteAddress?FE(c.remoteAddress):null,remote_name:(o=c.remoteName)!==null&&o!==void 0?o:void 0,security:u,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:ir(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:ir(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:ir(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:ir(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}};e(null,{socket:f})}function Z3(t,e){let n=Number.parseInt(t.request.server_id),i=Vr[n];if(i===void 0){e({code:Ll.Status.NOT_FOUND,details:"No server data found for id "+n});return}let r=Number.parseInt(t.request.start_socket_id),s=Number.parseInt(t.request.max_results),a=i.getInfo().sessionChildren.sockets.sort((u,f)=>u.id-f.id),l=[],c=0;for(;c<a.length&&!(a[c].id>=r&&(l.push(Dd(a[c])),l.length>=s));c++);e(null,{socket_ref:l,end:c>=a.length})}function UE(){return{GetChannel:$3,GetTopChannels:K3,GetServer:Q3,GetServers:Y3,GetSubchannel:J3,GetSocket:X3,GetServerSockets:Z3}}qe.getChannelzHandlers=UE;var Od=null;function zE(){if(Od)return Od;let t=i_().loadSync,e=t("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return Od=(0,L3.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service,Od}qe.getChannelzServiceDefinition=zE;function eL(){(0,F3.registerAdminService)(zE,UE)}qe.setup=eL});var qE=w(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.Subchannel=void 0;var Ne=kn(),tL=gl(),d_=Ye(),Id=Se(),nL=gn(),iL=Si(),qo=Ps(),rL="subchannel",sL=~(1<<31),h_=class{constructor(e,n,i,r,s){var o;this.channelTarget=e,this.subchannelAddress=n,this.options=i,this.credentials=r,this.connector=s,this.connectivityState=Ne.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new qo.ChannelzCallTracker,this.childrenTracker=new qo.ChannelzChildrenTracker,this.streamTracker=new qo.ChannelzCallTracker;let a={initialDelay:i["grpc.initial_reconnect_backoff_ms"],maxDelay:i["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new tL.BackoffTimeout(()=>{this.handleBackoffTimer()},a),this.backoffTimeout.unref(),this.subchannelAddressString=(0,iL.subchannelAddressToString)(n),this.keepaliveTime=(o=i["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,i["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new qo.ChannelzTrace,this.channelzRef=(0,qo.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(i,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){d_.trace(Id.LogVerbosity.DEBUG,rL,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){d_.trace(Id.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([Ne.ConnectivityState.TRANSIENT_FAILURE],Ne.ConnectivityState.CONNECTING):this.transitionToState([Ne.ConnectivityState.TRANSIENT_FAILURE],Ne.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let n=Math.min(this.keepaliveTime,sL);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":n})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(n=>{this.transitionToState([Ne.ConnectivityState.CONNECTING],Ne.ConnectivityState.READY)?(this.transport=n,this.channelzEnabled&&this.childrenTracker.refChild(n.getChannelzRef()),n.addDisconnectListener(i=>{this.transitionToState([Ne.ConnectivityState.READY],Ne.ConnectivityState.IDLE),i&&this.keepaliveTime>0&&(this.keepaliveTime*=2,d_.log(Id.LogVerbosity.ERROR,`Connection to ${(0,nL.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):n.shutdown()},n=>{this.transitionToState([Ne.ConnectivityState.CONNECTING],Ne.ConnectivityState.TRANSIENT_FAILURE,`${n}`)})}transitionToState(e,n,i){var r,s;if(e.indexOf(this.connectivityState)===-1)return!1;this.trace(Ne.ConnectivityState[this.connectivityState]+" -> "+Ne.ConnectivityState[n]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+Ne.ConnectivityState[n]);let o=this.connectivityState;switch(this.connectivityState=n,n){case Ne.ConnectivityState.READY:this.stopBackoff();break;case Ne.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case Ne.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(r=this.transport)===null||r===void 0||r.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case Ne.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${n}`)}for(let a of this.stateListeners)a(this,o,n,this.keepaliveTime,i);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,qo.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([Ne.ConnectivityState.CONNECTING,Ne.ConnectivityState.READY],Ne.ConnectivityState.IDLE)}))}unrefIfOneRef(){return this.refcount===1?(this.unref(),!0):!1}createCall(e,n,i,r){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:o=>{o.code===Id.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,n,i,r,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([Ne.ConnectivityState.IDLE],Ne.ConnectivityState.CONNECTING)||this.connectivityState===Ne.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([Ne.ConnectivityState.TRANSIENT_FAILURE],Ne.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}};xd.Subchannel=h_});var g_=w(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.setup=qr.DEFAULT_PORT=void 0;var jE=bi(),HE=Me("dns"),WE=Me("util"),oL=Om(),f_=Se(),p_=Kt(),aL=Ye(),lL=Se(),Ur=gn(),GE=Me("net"),cL=gl(),uL="dns_resolver";function zr(t){aL.trace(lL.LogVerbosity.DEBUG,uL,t)}qr.DEFAULT_PORT=443;var dL=3e4,hL=WE.promisify(HE.resolveTxt),fL=WE.promisify(HE.lookup);function pL(...t){let e=[];for(let n=0;n<Math.max.apply(null,t.map(i=>i.length));n++)for(let i of t)n<i.length&&e.push(i[n]);return e}var m_=class{constructor(e,n,i){var r,s,o;this.target=e,this.listener=n,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,zr("Resolver constructed for target "+(0,Ur.uriToString)(e));let a=(0,Ur.splitHostPort)(e.path);a===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,GE.isIPv4)(a.host)||(0,GE.isIPv6)(a.host)?(this.ipResult=[{host:a.host,port:(r=a.port)!==null&&r!==void 0?r:qr.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=a.host,this.port=(s=a.port)!==null&&s!==void 0?s:qr.DEFAULT_PORT),this.percentage=Math.random()*100,i["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:f_.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,Ur.uriToString)(this.target)}`,metadata:new p_.Metadata};let l={initialDelay:i["grpc.initial_reconnect_backoff_ms"],maxDelay:i["grpc.max_reconnect_backoff_ms"]};this.backoff=new cL.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},l),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=i["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:dL,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(zr("Returning IP address for target "+(0,Ur.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)zr("Failed to parse DNS address "+(0,Ur.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:f_.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,Ur.uriToString)(this.target)}`,metadata:new p_.Metadata})}),this.stopNextResolutionTimer();else{if(this.pendingLookupPromise!==null)return;zr("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=fL(e,{all:!0}),this.pendingLookupPromise.then(n=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let i=n.filter(o=>o.family===4),r=n.filter(o=>o.family===6);this.latestLookupResult=pL(r,i).map(o=>({host:o.address,port:+this.port}));let s="["+this.latestLookupResult.map(o=>o.host+":"+o.port).join(",")+"]";if(zr("Resolved addresses for target "+(0,Ur.uriToString)(this.target)+": "+s),this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},n=>{this.pendingLookupPromise!==null&&(zr("Resolution error for target "+(0,Ur.uriToString)(this.target)+": "+n.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=hL(e),this.pendingTxtPromise.then(n=>{if(this.pendingTxtPromise!==null){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,oL.extractAndSelectServiceConfig)(n,this.percentage)}catch(i){this.latestServiceConfigError={code:f_.Status.UNAVAILABLE,details:`Parsing service config failed with error ${i.message}`,metadata:new p_.Metadata}}this.latestLookupResult!==null&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},n=>{}))}}startNextResolutionTimer(){var e,n;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=(n=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)===null||n===void 0?void 0:n.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?zr('resolution update delayed by "min time between resolutions" rate limit'):zr("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}};function mL(){(0,jE.registerResolver)("dns",m_),(0,jE.registerDefaultScheme)("dns")}qr.setup=mL});var __=w(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.getProxiedConnection=Ho.mapProxyName=void 0;var Bl=Ye(),jo=Se(),gL=bi(),_L=Me("http"),yL=Me("tls"),vL=Ye(),$E=Si(),Go=gn(),CL=Me("url"),bL=g_(),wL="proxy";function jr(t){vL.trace(jo.LogVerbosity.DEBUG,wL,t)}function SL(){let t="",e="";if(process.env.grpc_proxy)e="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)e="https_proxy",t=process.env.https_proxy;else if(process.env.http_proxy)e="http_proxy",t=process.env.http_proxy;else return{};let n;try{n=new CL.URL(t)}catch{return(0,Bl.log)(jo.LogVerbosity.ERROR,`cannot parse value of "${e}" env var`),{}}if(n.protocol!=="http:")return(0,Bl.log)(jo.LogVerbosity.ERROR,`"${n.protocol}" scheme not supported in proxy URI`),{};let i=null;n.username&&(n.password?((0,Bl.log)(jo.LogVerbosity.INFO,"userinfo found in proxy URI"),i=`${n.username}:${n.password}`):i=n.username);let r=n.hostname,s=n.port;s===""&&(s="80");let o={address:`${r}:${s}`};return i&&(o.creds=i),jr("Proxy server "+o.address+" set by environment variable "+e),o}function TL(){let t=process.env.no_grpc_proxy,e="no_grpc_proxy";return t||(t=process.env.no_proxy,e="no_proxy"),t?(jr("No proxy server list set by environment variable "+e),t.split(",")):[]}function EL(t,e){var n;let i={target:t,extraOptions:{}};if(((n=e["grpc.enable_http_proxy"])!==null&&n!==void 0?n:1)===0||t.scheme==="unix")return i;let r=SL();if(!r.address)return i;let s=(0,Go.splitHostPort)(t.path);if(!s)return i;let o=s.host;for(let l of TL())if(l===o)return jr("Not using proxy for target in no_proxy list: "+(0,Go.uriToString)(t)),i;let a={"grpc.http_connect_target":(0,Go.uriToString)(t)};return r.creds&&(a["grpc.http_connect_creds"]=r.creds),{target:{scheme:"dns",path:r.address},extraOptions:a}}Ho.mapProxyName=EL;function ML(t,e,n){var i;if(!("grpc.http_connect_target"in e))return Promise.resolve({});let r=e["grpc.http_connect_target"],s=(0,Go.parseUri)(r);if(s===null)return Promise.resolve({});let o=(0,Go.splitHostPort)(s.path);if(o===null)return Promise.resolve({});let a=`${o.host}:${(i=o.port)!==null&&i!==void 0?i:bL.DEFAULT_PORT}`,l={method:"CONNECT",path:a},c={Host:a};(0,$E.isTcpSubchannelAddress)(t)?(l.host=t.host,l.port=t.port):l.socketPath=t.path,"grpc.http_connect_creds"in e&&(c["Proxy-Authorization"]="Basic "+Buffer.from(e["grpc.http_connect_creds"]).toString("base64")),l.headers=c;let u=(0,$E.subchannelAddressToString)(t);return jr("Using proxy "+u+" to connect to "+l.path),new Promise((f,g)=>{let _=_L.request(l);_.once("connect",(C,v,b)=>{var A;if(_.removeAllListeners(),v.removeAllListeners(),C.statusCode===200)if(jr("Successfully connected to "+l.path+" through proxy "+u),"secureContext"in n){let S=(0,gL.getDefaultAuthority)(s),R=(0,Go.splitHostPort)(S),k=(A=R?.host)!==null&&A!==void 0?A:S,J=yL.connect(Object.assign({host:k,servername:k,socket:v},n),()=>{jr("Successfully established a TLS connection to "+l.path+" through proxy "+u),f({socket:J,realTarget:s})});J.on("error",se=>{jr("Failed to establish a TLS connection to "+l.path+" through proxy "+u+" with error "+se.message),g()})}else jr("Successfully established a plaintext connection to "+l.path+" through proxy "+u),f({socket:v,realTarget:s});else(0,Bl.log)(jo.LogVerbosity.ERROR,"Failed to connect to "+l.path+" through proxy "+u+" with status "+C.statusCode),g()}),_.once("error",C=>{_.removeAllListeners(),(0,Bl.log)(jo.LogVerbosity.ERROR,"Failed to connect to proxy "+u+" with error "+C.message),g()}),_.end()})}Ho.getProxiedConnection=ML});var v_=w(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.StreamDecoder=void 0;var rr=function(t){return t[t.NO_DATA=0]="NO_DATA",t[t.READING_SIZE=1]="READING_SIZE",t[t.READING_MESSAGE=2]="READING_MESSAGE",t}(rr||{}),y_=class{constructor(){this.readState=rr.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let n=0,i,r=[];for(;n<e.length;)switch(this.readState){case rr.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=rr.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case rr.READING_SIZE:if(i=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+i),this.readSizeRemaining-=i,n+=i,this.readSizeRemaining===0)if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=rr.READING_MESSAGE;else{let s=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=rr.NO_DATA,r.push(s)}break;case rr.READING_MESSAGE:if(i=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+i)),this.readMessageRemaining-=i,n+=i,this.readMessageRemaining===0){let s=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(s,this.readMessageSize+5);this.readState=rr.NO_DATA,r.push(o)}break;default:throw new Error("Unexpected read state")}return r}};Ad.StreamDecoder=y_});var KE=w(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.Http2SubchannelCall=void 0;var sr=Me("http2"),OL=Me("os"),Ae=Se(),Gr=Kt(),DL=v_(),PL=Ye(),IL=Se(),xL="subchannel_call";function AL(t){for(let[e,n]of Object.entries(OL.constants.errno))if(n===t)return e;return"Unknown system error "+t}var C_=class{constructor(e,n,i,r,s){this.http2Stream=e,this.callEventTracker=n,this.listener=i,this.transport=r,this.callId=s,this.decoder=new DL.StreamDecoder,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=Ae.Status.UNKNOWN,this.finalStatus=null,this.internalError=null,e.on("response",(o,a)=>{let l="";for(let c of Object.keys(o))l+="		"+c+": "+o[c]+`
`;switch(this.trace(`Received server headers:
`+l),o[":status"]){case 400:this.mappedStatusCode=Ae.Status.INTERNAL;break;case 401:this.mappedStatusCode=Ae.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=Ae.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=Ae.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=Ae.Status.UNAVAILABLE;break;default:this.mappedStatusCode=Ae.Status.UNKNOWN}if(a&sr.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(o);else{let c;try{c=Gr.Metadata.fromHttp2Headers(o)}catch(u){this.endCall({code:Ae.Status.UNKNOWN,details:u.message,metadata:new Gr.Metadata});return}this.listener.onReceiveMetadata(c)}}),e.on("trailers",o=>{this.handleTrailers(o)}),e.on("data",o=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+o.length);let a=this.decoder.write(o);for(let l of a)this.trace("parsed message of length "+l.length),this.callEventTracker.addMessageReceived(),this.tryPush(l)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var o;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),((o=this.finalStatus)===null||o===void 0?void 0:o.code)===Ae.Status.OK)return;let a,l="";switch(e.rstCode){case sr.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;a=Ae.Status.INTERNAL,l=`Received RST_STREAM with code ${e.rstCode}`;break;case sr.constants.NGHTTP2_REFUSED_STREAM:a=Ae.Status.UNAVAILABLE,l="Stream refused by server";break;case sr.constants.NGHTTP2_CANCEL:a=Ae.Status.CANCELLED,l="Call cancelled";break;case sr.constants.NGHTTP2_ENHANCE_YOUR_CALM:a=Ae.Status.RESOURCE_EXHAUSTED,l="Bandwidth exhausted or memory limit exceeded";break;case sr.constants.NGHTTP2_INADEQUATE_SECURITY:a=Ae.Status.PERMISSION_DENIED,l="Protocol not secure enough";break;case sr.constants.NGHTTP2_INTERNAL_ERROR:a=Ae.Status.INTERNAL,this.internalError===null?l=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(a=Ae.Status.UNAVAILABLE,l=this.internalError.message):l=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:a=Ae.Status.INTERNAL,l=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:a,details:l,metadata:new Gr.Metadata,rstCode:e.rstCode})})}),e.on("error",o=>{o.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+o.message+" code="+o.code+" errno="+AL(o.errno)+" syscall="+o.syscall),this.internalError=o),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:Ae.Status.UNAVAILABLE,details:"Connection dropped",metadata:new Gr.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){PL.trace(IL.LogVerbosity.DEBUG,xL,"["+this.callId+"] "+e)}endCall(e){(this.finalStatus===null||this.finalStatus.code===Ae.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==Ae.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,!this.statusOutput&&(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.callEventTracker.onStreamEnd(!0);let n="";for(let l of Object.keys(e))n+="		"+l+": "+e[l]+`
`;this.trace(`Received server trailers:
`+n);let i;try{i=Gr.Metadata.fromHttp2Headers(e)}catch{i=new Gr.Metadata}let r=i.getMap(),s=this.mappedStatusCode;if(s===Ae.Status.UNKNOWN&&typeof r["grpc-status"]=="string"){let l=Number(r["grpc-status"]);l in Ae.Status&&(s=l,this.trace("received status code "+l+" from server")),i.remove("grpc-status")}let o="";if(typeof r["grpc-message"]=="string"){try{o=decodeURI(r["grpc-message"])}catch{o=r["grpc-message"]}i.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let a={code:s,details:o,metadata:i};this.endCall(a)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let n;((e=this.finalStatus)===null||e===void 0?void 0:e.code)===Ae.Status.OK?n=sr.constants.NGHTTP2_NO_ERROR:n=sr.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+n),this.http2Stream.close(n)}}cancelWithStatus(e,n){this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),this.endCall({code:e,details:n,metadata:new Gr.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==Ae.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length);let i=r=>{process.nextTick(()=>{var s;let o=Ae.Status.UNAVAILABLE;r?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=Ae.Status.INTERNAL),r&&this.cancelWithStatus(o,`Write error: ${r.message}`),(s=e.callback)===null||s===void 0||s.call(e)})};this.trace("sending data chunk of length "+n.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(n,i)}catch(r){this.endCall({code:Ae.Status.UNAVAILABLE,details:`Write failed with error ${r.message}`,metadata:new Gr.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}};kd.Http2SubchannelCall=C_});var b_=w(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.getNextCallNumber=void 0;var kL=0;function RL(){return kL++}Rd.getNextCallNumber=RL});var JE=w(Fd=>{"use strict";Object.defineProperty(Fd,"__esModule",{value:!0});Fd.Http2SubchannelConnector=void 0;var M_=Me("http2"),QE=Me("tls"),w_=Ps(),Vl=Se(),NL=__(),$o=Ye(),YE=bi(),Nd=Si(),Wo=gn(),FL=Me("net"),LL=KE(),BL=b_(),S_="transport",VL="transport_flowctrl",UL=cm().version,{HTTP2_HEADER_AUTHORITY:zL,HTTP2_HEADER_CONTENT_TYPE:qL,HTTP2_HEADER_METHOD:jL,HTTP2_HEADER_PATH:GL,HTTP2_HEADER_TE:HL,HTTP2_HEADER_USER_AGENT:WL}=M_.constants,$L=2e4,KL=Buffer.from("too_many_pings","ascii"),T_=class{constructor(e,n,i,r){this.session=e,this.remoteName=r,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=$L,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new w_.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,Nd.subchannelAddressToString)(n),i["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,w_.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[i["grpc.primary_user_agent"],`grpc-node-js/${UL}`,i["grpc.secondary_user_agent"]].filter(s=>s).join(" "),"grpc.keepalive_time_ms"in i&&(this.keepaliveTimeMs=i["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in i&&(this.keepaliveTimeoutMs=i["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in i?this.keepaliveWithoutCalls=i["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(s,o,a)=>{let l=!1;s===M_.constants.NGHTTP2_ENHANCE_YOUR_CALM&&a&&a.equals(KL)&&(l=!0),this.trace("connection closed by GOAWAY with code "+s+" and data "+a?.toString()),this.reportDisconnectToOwner(l)}),e.once("error",s=>{this.trace("connection closed with error "+s.message)}),$o.isTracerEnabled(S_)&&(e.on("remoteSettings",s=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))}),e.on("localSettings",s=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,n,i;let r=this.session.socket,s=r.remoteAddress?(0,Nd.stringToSubchannelAddress)(r.remoteAddress,r.remotePort):null,o=r.localAddress?(0,Nd.stringToSubchannelAddress)(r.localAddress,r.localPort):null,a;if(this.session.encrypted){let c=r,u=c.getCipher(),f=c.getCertificate(),g=c.getPeerCertificate();a={cipherSuiteStandardName:(e=u.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:u.standardName?null:u.name,localCertificate:f&&"raw"in f?f.raw:null,remoteCertificate:g&&"raw"in g?g.raw:null}}else a=null;return{remoteAddress:s,localAddress:o,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(n=this.session.state.localWindowSize)!==null&&n!==void 0?n:null,remoteFlowControlWindow:(i=this.session.state.remoteWindowSize)!==null&&i!==void 0?i:null}}trace(e){$o.trace(Vl.LogVerbosity.DEBUG,S_,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){$o.trace(Vl.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){$o.trace(Vl.LogVerbosity.DEBUG,VL,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){$o.trace(Vl.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(n=>n(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,n;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),(n=(e=this.keepaliveTimeoutId).unref)===null||n===void 0||n.call(e));try{this.session.ping((i,r,s)=>{i&&(this.keepaliveTrace("Ping failed with error "+i.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch{this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,n;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):!this.keepaliveTimerId&&!this.keepaliveTimeoutId&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=(n=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)===null||n===void 0?void 0:n.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),this.activeCalls.size===0&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,n,i,r,s){let o=e.toHttp2Headers();o[zL]=n,o[WL]=this.userAgent,o[qL]="application/grpc",o[jL]="POST",o[GL]=i,o[HL]="trailers";let a;try{a=this.session.request(o)}catch(u){throw this.handleDisconnect(),u}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let l,c;return this.channelzEnabled?(this.streamTracker.addCallStarted(),l={addMessageSent:()=>{var u;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(u=s.addMessageSent)===null||u===void 0||u.call(s)},addMessageReceived:()=>{var u;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(u=s.addMessageReceived)===null||u===void 0||u.call(s)},onCallEnd:u=>{var f;(f=s.onCallEnd)===null||f===void 0||f.call(s,u),this.removeActiveCall(c)},onStreamEnd:u=>{var f;u?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(f=s.onStreamEnd)===null||f===void 0||f.call(s,u)}}):l={addMessageSent:()=>{var u;(u=s.addMessageSent)===null||u===void 0||u.call(s)},addMessageReceived:()=>{var u;(u=s.addMessageReceived)===null||u===void 0||u.call(s)},onCallEnd:u=>{var f;(f=s.onCallEnd)===null||f===void 0||f.call(s,u),this.removeActiveCall(c)},onStreamEnd:u=>{var f;(f=s.onStreamEnd)===null||f===void 0||f.call(s,u)}},c=new LL.Http2SubchannelCall(a,l,r,this,(0,BL.getNextCallNumber)()),this.addActiveCall(c),c}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}shutdown(){this.session.close(),(0,w_.unregisterChannelzRef)(this.channelzRef)}},E_=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){$o.trace(Vl.LogVerbosity.DEBUG,S_,(0,Wo.uriToString)(this.channelTarget)+" "+e)}createSession(e,n,i,r){return this.isShutdown?Promise.reject():new Promise((s,o)=>{var a,l,c;let u;r.realTarget?(u=(0,Wo.uriToString)(r.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,Wo.uriToString)(r.realTarget))):(u=null,this.trace("creating HTTP/2 session to "+(0,Nd.subchannelAddressToString)(e)));let f=(0,YE.getDefaultAuthority)((a=r.realTarget)!==null&&a!==void 0?a:this.channelTarget),g=n._getConnectionOptions()||{};g.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in i?g.maxSessionMemory=i["grpc-node.max_session_memory"]:g.maxSessionMemory=Number.MAX_SAFE_INTEGER;let _="http://";if("secureContext"in g){if(_="https://",i["grpc.ssl_target_name_override"]){let b=i["grpc.ssl_target_name_override"];g.checkServerIdentity=(A,S)=>(0,QE.checkServerIdentity)(b,S),g.servername=b}else{let b=(c=(l=(0,Wo.splitHostPort)(f))===null||l===void 0?void 0:l.host)!==null&&c!==void 0?c:"localhost";g.servername=b}r.socket&&(g.createConnection=(b,A)=>r.socket)}else g.createConnection=(b,A)=>r.socket?r.socket:FL.connect(e);g=Object.assign(Object.assign(Object.assign({},g),e),{enableTrace:i["grpc-node.tls_enable_trace"]===1});let C=M_.connect(_+f,g);this.session=C;let v="Failed to connect";C.unref(),C.once("connect",()=>{C.removeAllListeners(),s(new T_(C,e,i,u)),this.session=null}),C.once("close",()=>{this.session=null,setImmediate(()=>{o(`${v} (${new Date().toISOString()})`)})}),C.once("error",b=>{v=b.message,this.trace("connection failed with error "+v)})})}connect(e,n,i){var r,s;if(this.isShutdown)return Promise.reject();let o=n._getConnectionOptions()||{};if("secureContext"in o){if(o.ALPNProtocols=["h2"],i["grpc.ssl_target_name_override"]){let a=i["grpc.ssl_target_name_override"];o.checkServerIdentity=(l,c)=>(0,QE.checkServerIdentity)(a,c),o.servername=a}else if("grpc.http_connect_target"in i){let a=(0,YE.getDefaultAuthority)((r=(0,Wo.parseUri)(i["grpc.http_connect_target"]))!==null&&r!==void 0?r:{path:"localhost"}),l=(0,Wo.splitHostPort)(a);o.servername=(s=l?.host)!==null&&s!==void 0?s:a}i["grpc-node.tls_enable_trace"]&&(o.enableTrace=!0)}return(0,NL.getProxiedConnection)(e,i,o).then(a=>this.createSession(e,n,i,a))}shutdown(){var e;this.isShutdown=!0,(e=this.session)===null||e===void 0||e.close(),this.session=null}};Fd.Http2SubchannelConnector=E_});var XE=w(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.getSubchannelPool=Ko.SubchannelPool=void 0;var QL=Fw(),YL=qE(),JL=Si(),XL=gn(),ZL=JE(),eB=1e4,Ul=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let n in this.pool){let r=this.pool[n].filter(s=>!s.subchannel.unrefIfOneRef());r.length>0&&(e=!1),this.pool[n]=r}e&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,n;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},eB),(n=(e=this.cleanupTimer).unref)===null||n===void 0||n.call(e))}getOrCreateSubchannel(e,n,i,r){this.ensureCleanupTask();let s=(0,XL.uriToString)(e);if(s in this.pool){let a=this.pool[s];for(let l of a)if((0,JL.subchannelAddressEqual)(n,l.subchannelAddress)&&(0,QL.channelOptionsEqual)(i,l.channelArguments)&&r._equals(l.channelCredentials))return l.subchannel}let o=new YL.Subchannel(e,n,i,r,new ZL.Http2SubchannelConnector(e));return s in this.pool||(this.pool[s]=[]),this.pool[s].push({subchannelAddress:n,channelArguments:i,channelCredentials:r,subchannel:o}),o.ref(),o}};Ko.SubchannelPool=Ul;var tB=new Ul;function nB(t){return t?tB:new Ul}Ko.getSubchannelPool=nB});var D_=w(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.FilterStackFactory=Qo.FilterStack=void 0;var Ld=class{constructor(e){this.filters=e}sendMetadata(e){let n=e;for(let i=0;i<this.filters.length;i++)n=this.filters[i].sendMetadata(n);return n}receiveMetadata(e){let n=e;for(let i=this.filters.length-1;i>=0;i--)n=this.filters[i].receiveMetadata(n);return n}sendMessage(e){let n=e;for(let i=0;i<this.filters.length;i++)n=this.filters[i].sendMessage(n);return n}receiveMessage(e){let n=e;for(let i=this.filters.length-1;i>=0;i--)n=this.filters[i].receiveMessage(n);return n}receiveTrailers(e){let n=e;for(let i=this.filters.length-1;i>=0;i--)n=this.filters[i].receiveTrailers(n);return n}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}};Qo.FilterStack=Ld;var O_=class t{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new t([...this.factories])}createFilter(){return new Ld(this.factories.map(e=>e.createFilter()))}};Qo.FilterStackFactory=O_});var P_=w(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.CompressionAlgorithms=void 0;var ZE=function(t){return t[t.identity=0]="identity",t[t.deflate=1]="deflate",t[t.gzip=2]="gzip",t}(ZE||(Bd.CompressionAlgorithms=ZE={}))});var Ud=w(Vd=>{"use strict";Object.defineProperty(Vd,"__esModule",{value:!0});Vd.BaseFilter=void 0;var I_=class{sendMetadata(e){return T(this,null,function*(){return e})}receiveMetadata(e){return e}sendMessage(e){return T(this,null,function*(){return e})}receiveMessage(e){return T(this,null,function*(){return e})}receiveTrailers(e){return e}};Vd.BaseFilter=I_});var nM=w(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.CompressionFilterFactory=Jo.CompressionFilter=void 0;var zd=Me("zlib"),tM=P_(),iB=Se(),rB=Ud(),sB=Ye(),oB=t=>typeof t=="number"&&typeof tM.CompressionAlgorithms[t]=="string",Yo=class{writeMessage(e,n){return T(this,null,function*(){let i=e;n&&(i=yield this.compressMessage(i));let r=Buffer.allocUnsafe(i.length+5);return r.writeUInt8(n?1:0,0),r.writeUInt32BE(i.length,1),i.copy(r,5),r})}readMessage(e){return T(this,null,function*(){let n=e.readUInt8(0)===1,i=e.slice(5);return n&&(i=yield this.decompressMessage(i)),i})}},Is=class extends Yo{compressMessage(e){return T(this,null,function*(){return e})}writeMessage(e,n){return T(this,null,function*(){let i=Buffer.allocUnsafe(e.length+5);return i.writeUInt8(0,0),i.writeUInt32BE(e.length,1),e.copy(i,5),i})}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},x_=class extends Yo{compressMessage(e){return new Promise((n,i)=>{zd.deflate(e,(r,s)=>{r?i(r):n(s)})})}decompressMessage(e){return new Promise((n,i)=>{zd.inflate(e,(r,s)=>{r?i(r):n(s)})})}},A_=class extends Yo{compressMessage(e){return new Promise((n,i)=>{zd.gzip(e,(r,s)=>{r?i(r):n(s)})})}decompressMessage(e){return new Promise((n,i)=>{zd.unzip(e,(r,s)=>{r?i(r):n(s)})})}},k_=class extends Yo{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function eM(t){switch(t){case"identity":return new Is;case"deflate":return new x_;case"gzip":return new A_;default:return new k_(t)}}var qd=class extends rB.BaseFilter{constructor(e,n){var i;super(),this.sharedFilterConfig=n,this.sendCompression=new Is,this.receiveCompression=new Is,this.currentCompressionAlgorithm="identity";let r=e["grpc.default_compression_algorithm"];if(r!==void 0)if(oB(r)){let s=tM.CompressionAlgorithms[r],o=(i=n.serverSupportedEncodingHeader)===null||i===void 0?void 0:i.split(",");(!o||o.includes(s))&&(this.currentCompressionAlgorithm=s,this.sendCompression=eM(this.currentCompressionAlgorithm))}else sB.log(iB.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${r}`)}sendMetadata(e){return T(this,null,function*(){let n=yield e;return n.set("grpc-accept-encoding","identity,deflate,gzip"),n.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?n.remove("grpc-encoding"):n.set("grpc-encoding",this.currentCompressionAlgorithm),n})}receiveMetadata(e){let n=e.get("grpc-encoding");if(n.length>0){let r=n[0];typeof r=="string"&&(this.receiveCompression=eM(r))}e.remove("grpc-encoding");let i=e.get("grpc-accept-encoding")[0];return i&&(this.sharedFilterConfig.serverSupportedEncodingHeader=i,i.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new Is,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}sendMessage(e){return T(this,null,function*(){var n;let i=yield e,r;return this.sendCompression instanceof Is?r=!1:r=(((n=i.flags)!==null&&n!==void 0?n:0)&2)===0,{message:yield this.sendCompression.writeMessage(i.message,r),flags:i.flags}})}receiveMessage(e){return T(this,null,function*(){return this.receiveCompression.readMessage(yield e)})}};Jo.CompressionFilter=qd;var R_=class{constructor(e,n){this.options=n,this.sharedFilterConfig={}}createFilter(){return new qd(this.options,this.sharedFilterConfig)}};Jo.CompressionFilterFactory=R_});var rM=w(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.MaxMessageSizeFilterFactory=Xo.MaxMessageSizeFilter=void 0;var aB=Ud(),jd=Se(),iM=Kt(),Gd=class extends aB.BaseFilter{constructor(e){super(),this.maxSendMessageSize=jd.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=jd.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,"grpc.max_send_message_length"in e&&(this.maxSendMessageSize=e["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in e&&(this.maxReceiveMessageSize=e["grpc.max_receive_message_length"])}sendMessage(e){return T(this,null,function*(){if(this.maxSendMessageSize===-1)return e;{let n=yield e;if(n.message.length>this.maxSendMessageSize)throw{code:jd.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${n.message.length} vs. ${this.maxSendMessageSize})`,metadata:new iM.Metadata};return n}})}receiveMessage(e){return T(this,null,function*(){if(this.maxReceiveMessageSize===-1)return e;{let n=yield e;if(n.length>this.maxReceiveMessageSize)throw{code:jd.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${n.length} vs. ${this.maxReceiveMessageSize})`,metadata:new iM.Metadata};return n}})}};Xo.MaxMessageSizeFilter=Gd;var N_=class{constructor(e){this.options=e}createFilter(){return new Gd(this.options)}};Xo.MaxMessageSizeFilterFactory=N_});var Hd=w(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.deadlineToString=ki.getRelativeTimeout=ki.getDeadlineTimeoutString=ki.minDeadline=void 0;function lB(...t){let e=1/0;for(let n of t){let i=n instanceof Date?n.getTime():n;i<e&&(e=i)}return e}ki.minDeadline=lB;var cB=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function uB(t){let e=new Date().getTime();t instanceof Date&&(t=t.getTime());let n=Math.max(t-e,0);for(let[i,r]of cB){let s=n/r;if(s<1e8)return String(Math.ceil(s))+i}throw new Error("Deadline is too far in the future")}ki.getDeadlineTimeoutString=uB;var dB=2147483647;function hB(t){let e=t instanceof Date?t.getTime():t,n=new Date().getTime(),i=e-n;return i<0?0:i>dB?1/0:i}ki.getRelativeTimeout=hB;function fB(t){if(t instanceof Date)return t.toISOString();{let e=new Date(t);return Number.isNaN(e.getTime())?""+t:e.toISOString()}}ki.deadlineToString=fB});var $d=w(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.restrictControlPlaneStatusCode=void 0;var Ri=Se(),pB=[Ri.Status.OK,Ri.Status.INVALID_ARGUMENT,Ri.Status.NOT_FOUND,Ri.Status.ALREADY_EXISTS,Ri.Status.FAILED_PRECONDITION,Ri.Status.ABORTED,Ri.Status.OUT_OF_RANGE,Ri.Status.DATA_LOSS];function mB(t,e){return pB.includes(t)?{code:Ri.Status.INTERNAL,details:`Invalid status from control plane: ${t} ${Ri.Status[t]} ${e}`}:{code:t,details:e}}Wd.restrictControlPlaneStatusCode=mB});var oM=w(Yd=>{"use strict";Object.defineProperty(Yd,"__esModule",{value:!0});Yd.LoadBalancingCall=void 0;var sM=kn(),Kd=Se(),gB=Hd(),Qd=Kt(),zl=Dr(),_B=gn(),yB=Ye(),F_=$d(),vB=Me("http2"),CB="load_balancing_call",L_=class{constructor(e,n,i,r,s,o,a){var l,c;this.channel=e,this.callConfig=n,this.methodName=i,this.host=r,this.credentials=s,this.deadline=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let u=this.methodName.split("/"),f="";u.length>=2&&(f=u[1]);let g=(c=(l=(0,_B.splitHostPort)(this.host))===null||l===void 0?void 0:l.host)!==null&&c!==void 0?c:"localhost";this.serviceUrl=`https://${g}/${f}`}trace(e){yB.trace(Kd.LogVerbosity.DEBUG,CB,"["+this.callNumber+"] "+e)}outputStatus(e,n){var i,r;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let s=Object.assign(Object.assign({},e),{progress:n});(i=this.listener)===null||i===void 0||i.onReceiveStatus(s),(r=this.onCallEnded)===null||r===void 0||r.call(this,s.code)}}doPick(){var e,n;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let i=this.channel.doPick(this.metadata,this.callConfig.pickInformation),r=i.subchannel?"("+i.subchannel.getChannelzRef().id+") "+i.subchannel.getAddress():""+i.subchannel;switch(this.trace("Pick result: "+zl.PickResultType[i.pickResultType]+" subchannel: "+r+" status: "+((e=i.status)===null||e===void 0?void 0:e.code)+" "+((n=i.status)===null||n===void 0?void 0:n.details)),i.pickResultType){case zl.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(a=>{var l,c,u;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let f=this.metadata.clone();if(f.merge(a),f.get("authorization").length>1&&this.outputStatus({code:Kd.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new Qd.Metadata},"PROCESSED"),i.subchannel.getConnectivityState()!==sM.ConnectivityState.READY){this.trace("Picked subchannel "+r+" has state "+sM.ConnectivityState[i.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&f.set("grpc-timeout",(0,gB.getDeadlineTimeoutString)(this.deadline));try{this.child=i.subchannel.getRealSubchannel().createCall(f,this.host,this.methodName,{onReceiveMetadata:g=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(g)},onReceiveMessage:g=>{this.trace("Received message"),this.listener.onReceiveMessage(g)},onReceiveStatus:g=>{this.trace("Received status"),g.rstCode===vB.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(g,"REFUSED"):this.outputStatus(g,"PROCESSED")}})}catch(g){this.trace("Failed to start call on picked subchannel "+r+" with error "+g.message),this.outputStatus({code:Kd.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+g.message,metadata:new Qd.Metadata},"NOT_STARTED");return}(c=(l=this.callConfig).onCommitted)===null||c===void 0||c.call(l),(u=i.onCallStarted)===null||u===void 0||u.call(i),this.onCallEnded=i.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},a=>{let{code:l,details:c}=(0,F_.restrictControlPlaneStatusCode)(typeof a.code=="number"?a.code:Kd.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${a.message}`);this.outputStatus({code:l,details:c,metadata:new Qd.Metadata},"PROCESSED")});break;case zl.PickResultType.DROP:let{code:s,details:o}=(0,F_.restrictControlPlaneStatusCode)(i.status.code,i.status.details);setImmediate(()=>{this.outputStatus({code:s,details:o,metadata:i.status.metadata},"DROP")});break;case zl.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:a,details:l}=(0,F_.restrictControlPlaneStatusCode)(i.status.code,i.status.details);setImmediate(()=>{this.outputStatus({code:a,details:l,metadata:i.status.metadata},"PROCESSED")})}break;case zl.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,n){var i;this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),(i=this.child)===null||i===void 0||i.cancelWithStatus(e,n),this.outputStatus({code:e,details:n,metadata:new Qd.Metadata},"PROCESSED")}getPeer(){var e,n;return(n=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:this.channel.getTarget()}start(e,n){this.trace("start called"),this.listener=n,this.metadata=e,this.doPick()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length),this.child?this.child.sendMessageWithContext(e,n):this.pendingMessage={context:e,message:n}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}};Yd.LoadBalancingCall=L_});var lM=w(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.ResolvingCall=void 0;var Zo=Se(),Jd=Hd(),aM=Kt(),bB=Ye(),wB=$d(),SB="resolving_call",B_=class{constructor(e,n,i,r,s,o){this.channel=e,this.method=n,this.filterStackFactory=r,this.credentials=s,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=i.deadline,this.host=i.host,i.parentCall&&(i.flags&Zo.Propagate.CANCELLATION&&i.parentCall.on("cancelled",()=>{this.cancelWithStatus(Zo.Status.CANCELLED,"Cancelled by parent call")}),i.flags&Zo.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+i.parentCall.getDeadline()),this.deadline=(0,Jd.minDeadline)(this.deadline,i.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){bB.trace(Zo.LogVerbosity.DEBUG,SB,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,Jd.deadlineToString)(this.deadline));let e=(0,Jd.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let n=()=>{this.cancelWithStatus(Zo.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(n):this.deadlineTimer=setTimeout(n,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let n=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+n.code+' details="'+n.details+'"'),this.statusWatchers.forEach(i=>i(n)),process.nextTick(()=>{var i;(i=this.listener)===null||i===void 0||i.onReceiveStatus(n)})}}sendMessageOnChild(e,n){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let i=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:n,flags:e.flags})).then(r=>{this.writeFilterPending=!1,i.sendMessageWithContext(e,r.message),this.pendingHalfClose&&i.halfClose()},r=>{this.cancelWithStatus(r.code,r.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}let n=e.config;if(n.status!==Zo.Status.OK){let{code:i,details:r}=(0,wB.restrictControlPlaneStatusCode)(n.status,"Failed to route call to method "+this.method);this.outputStatus({code:i,details:r,metadata:new aM.Metadata});return}if(n.methodConfig.timeout){let i=new Date;i.setSeconds(i.getSeconds()+n.methodConfig.timeout.seconds),i.setMilliseconds(i.getMilliseconds()+n.methodConfig.timeout.nanos/1e6),this.deadline=(0,Jd.minDeadline)(this.deadline,i),this.runDeadlineTimer()}this.filterStackFactory.push(n.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(i=>{this.child=this.channel.createInnerCall(n,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(i,{onReceiveMetadata:r=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(r))},onReceiveMessage:r=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(r).then(s=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(s),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},s=>{this.cancelWithStatus(s.code,s.details)})},onReceiveStatus:r=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=r:this.outputStatus(r)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},i=>{this.outputStatus(i)})}reportResolverError(e){var n;!((n=this.metadata)===null||n===void 0)&&n.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,n){var i;this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),(i=this.child)===null||i===void 0||i.cancelWithStatus(e,n),this.outputStatus({code:e,details:n,metadata:new aM.Metadata})}getPeer(){var e,n;return(n=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&n!==void 0?n:this.channel.getTarget()}start(e,n){this.trace("start called"),this.metadata=e.clone(),this.listener=n,this.getConfig()}sendMessageWithContext(e,n){this.trace("write() called with message of length "+n.length),this.child?this.sendMessageOnChild(e,n):this.pendingMessage={context:e,message:n}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}};Xd.ResolvingCall=B_});var cM=w(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.RetryingCall=Hr.MessageBufferTracker=Hr.RetryThrottler=void 0;var Zd=Se(),TB=Kt(),EB=Ye(),MB="retrying_call",U_=class{constructor(e,n,i){this.maxTokens=e,this.tokenRatio=n,i?this.tokens=i.tokens*(e/i.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}};Hr.RetryThrottler=U_;var z_=class{constructor(e,n){this.totalLimit=e,this.limitPerCall=n,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,n){var i;let r=(i=this.allocatedPerCall.get(n))!==null&&i!==void 0?i:0;return this.limitPerCall-r<e||this.totalLimit-this.totalAllocated<e?!1:(this.allocatedPerCall.set(n,r+e),this.totalAllocated+=e,!0)}free(e,n){var i;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${n} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let r=(i=this.allocatedPerCall.get(n))!==null&&i!==void 0?i:0;if(r<e)throw new Error(`Invalid buffer allocation state: call ${n} freed ${e} > allocated for call ${r}`);this.allocatedPerCall.set(n,r-e)}freeAll(e){var n;let i=(n=this.allocatedPerCall.get(e))!==null&&n!==void 0?n:0;if(this.totalAllocated<i)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${i} > total allocated ${this.totalAllocated}`);this.totalAllocated-=i,this.allocatedPerCall.delete(e)}};Hr.MessageBufferTracker=z_;var V_="grpc-previous-rpc-attempts",q_=class{constructor(e,n,i,r,s,o,a,l,c){if(this.channel=e,this.callConfig=n,this.methodName=i,this.host=r,this.credentials=s,this.deadline=o,this.callNumber=a,this.bufferTracker=l,this.retryThrottler=c,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,n.methodConfig.retryPolicy){this.state="RETRY";let u=n.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(u.initialBackoff.substring(0,u.initialBackoff.length-1))}else n.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){EB.trace(Zd.LogVerbosity.DEBUG,MB,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var n;(n=this.listener)===null||n===void 0||n.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,n){this.trace("cancelWithStatus code: "+e+' details: "'+n+'"'),this.reportStatus({code:e,details:n,metadata:new TB.Metadata});for(let{call:i}of this.underlyingCalls)i.cancelWithStatus(e,n)}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var n;return(n=this.writeBuffer[e-this.writeBufferOffset])!==null&&n!==void 0?n:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let n=this.writeBufferOffset;n<e;n++){let i=this.getBufferEntry(n);i.allocated&&this.bufferTracker.free(i.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if(this.state!=="COMMITTED"&&this.underlyingCalls[e].state!=="COMPLETED"){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let n=0;n<this.underlyingCalls.length;n++)n!==e&&this.underlyingCalls[n].state!=="COMPLETED"&&(this.underlyingCalls[n].state="COMPLETED",this.underlyingCalls[n].call.cancelWithStatus(Zd.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let e=-1,n=-1;for(let[i,r]of this.underlyingCalls.entries())r.state==="ACTIVE"&&r.nextMessageToSend>e&&(e=r.nextMessageToSend,n=i);n===-1?this.state="TRANSPARENT_ONLY":this.commitCall(n)}isStatusCodeInList(e,n){return e.some(i=>i===n||i.toString().toLowerCase()===Zd.Status[n].toLowerCase())}getNextRetryBackoffMs(){var e;let n=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!n)return 0;let i=Math.random()*this.nextRetryBackoffSec*1e3,r=Number(n.maxBackoff.substring(0,n.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*n.backoffMultiplier,r),i}maybeRetryCall(e,n){if(this.state!=="RETRY"){n(!1);return}let i=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(i.maxAttempts,5)){n(!1);return}let r;if(e===null)r=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",n(!1);return}else r=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var s,o;if(this.state!=="RETRY"){n(!1);return}(!((o=(s=this.retryThrottler)===null||s===void 0?void 0:s.canRetryCall())!==null&&o!==void 0)||o)&&(n(!0),this.attempts+=1,this.startNewAttempt())},r)}countActiveCalls(){let e=0;for(let n of this.underlyingCalls)n?.state==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,n,i){var r,s,o;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(n),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList((r=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&r!==void 0?r:[],e.code)){(s=this.retryThrottler)===null||s===void 0||s.addCallFailed();let a;if(i===null)a=0;else if(i<0){this.state="TRANSPARENT_ONLY",this.commitCall(n),this.reportStatus(e);return}else a=i;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(n),this.reportStatus(e))},a)}else this.commitCall(n),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(i,a=>{a||(this.commitCall(n),this.reportStatus(e))})):(this.commitCall(n),this.reportStatus(e));break}}getPushback(e){let n=e.get("grpc-retry-pushback-ms");if(n.length===0)return null;try{return parseInt(n[0])}catch{return-1}}handleChildStatus(e,n){var i;if(this.underlyingCalls[n].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[n].call.getCallNumber()+"] in state "+this.underlyingCalls[n].state),this.underlyingCalls[n].state="COMPLETED",e.code===Zd.Status.OK){(i=this.retryThrottler)===null||i===void 0||i.addCallSucceeded(),this.commitCall(n),this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}let r=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,n,r):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(n),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,n,r);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,n,i;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let r=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(r.maxAttempts,5))return;let s=(e=r.hedgingDelay)!==null&&e!==void 0?e:"0s",o=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},o*1e3),(i=(n=this.hedgingTimer).unref)===null||i===void 0||i.call(n)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let n=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let i=this.attempts-1,r=this.initialMetadata.clone();i>0&&r.set(V_,`${i}`);let s=!1;e.start(r,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(n),s=!0,i>0&&o.set(V_,`${i}`),this.underlyingCalls[n].state==="ACTIVE"&&this.listener.onReceiveMetadata(o)},onReceiveMessage:o=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(n),this.underlyingCalls[n].state==="ACTIVE"&&this.listener.onReceiveMessage(o)},onReceiveStatus:o=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&i>0&&o.metadata.set(V_,`${i}`),this.handleChildStatus(o,n)}}),this.sendNextChildMessage(n),this.readStarted&&e.startRead()}start(e,n){this.trace("start called"),this.listener=n,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var n,i;let r=this.underlyingCalls[e],s=r.nextMessageToSend;(i=(n=this.getBufferEntry(s)).callback)===null||i===void 0||i.call(n),this.clearSentMessages(),r.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let n=this.underlyingCalls[e];if(n.state!=="COMPLETED"&&this.getBufferEntry(n.nextMessageToSend)){let i=this.getBufferEntry(n.nextMessageToSend);switch(i.entryType){case"MESSAGE":n.call.sendMessageWithContext({callback:r=>{this.handleChildWriteCompleted(e)}},i.message.message);break;case"HALF_CLOSE":n.nextMessageToSend+=1,n.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(e,n){var i;this.trace("write() called with message of length "+n.length);let r={message:n,flags:e.flags},s=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:r,allocated:this.bufferTracker.allocate(n.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(i=e.callback)===null||i===void 0||i.call(e);for(let[a,l]of this.underlyingCalls.entries())l.state==="ACTIVE"&&l.nextMessageToSend===s&&l.call.sendMessageWithContext({callback:c=>{this.handleChildWriteCompleted(a)}},n)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let a=this.underlyingCalls[this.committedCallIndex];o.callback=e.callback,a.state==="ACTIVE"&&a.nextMessageToSend===s&&a.call.sendMessageWithContext({callback:l=>{this.handleChildWriteCompleted(this.committedCallIndex)}},n)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let n of this.underlyingCalls)n?.state==="ACTIVE"&&n.nextMessageToSend===e&&(n.nextMessageToSend+=1,n.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}};Hr.RetryingCall=q_});var th=w(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.BaseSubchannelWrapper=void 0;var j_=class{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}};eh.BaseSubchannelWrapper=j_});var hM=w(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.InternalChannel=void 0;var OB=Bu(),DB=Nw(),PB=XE(),uM=Dr(),ql=Se(),IB=D_(),xB=nM(),dM=bi(),G_=Ye(),AB=rM(),kB=__(),nh=gn(),Ni=kn(),jl=Ps(),RB=oM(),NB=Hd(),FB=lM(),H_=b_(),LB=$d(),W_=cM(),BB=th(),VB=2147483647,UB=1e3,zB=30*60*1e3,ih=new Map,qB=1<<24,jB=1<<20,$_=class extends BB.BaseSubchannelWrapper{constructor(e,n){super(e),this.channel=n,this.refCount=0,this.subchannelStateListener=(i,r,s,o)=>{n.throttleKeepalive(o)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}},K_=class{constructor(e,n,i){var r,s,o,a,l,c,u,f;if(this.credentials=n,this.options=i,this.connectivityState=Ni.ConnectivityState.IDLE,this.currentPicker=new uM.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new jl.ChannelzCallTracker,this.childrenTracker=new jl.ChannelzChildrenTracker,typeof e!="string")throw new TypeError("Channel target must be a string");if(!(n instanceof OB.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(i&&typeof i!="object")throw new TypeError("Channel options must be an object");this.originalTarget=e;let g=(0,nh.parseUri)(e);if(g===null)throw new Error(`Could not parse target name "${e}"`);let _=(0,dM.mapUriDefaultScheme)(g);if(_===null)throw new Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},VB),(s=(r=this.callRefTimer).unref)===null||s===void 0||s.call(r),this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new jl.ChannelzTrace,this.channelzRef=(0,jl.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,dM.getDefaultAuthority)(_);let C=(0,kB.mapProxyName)(_,i);this.target=C.target,this.options=Object.assign({},this.options,C.extraOptions),this.subchannelPool=(0,PB.getSubchannelPool)(((o=i["grpc.use_local_subchannel_pool"])!==null&&o!==void 0?o:0)===0),this.retryBufferTracker=new W_.MessageBufferTracker((a=i["grpc.retry_buffer_size"])!==null&&a!==void 0?a:qB,(l=i["grpc.per_rpc_retry_buffer_size"])!==null&&l!==void 0?l:jB),this.keepaliveTime=(c=i["grpc.keepalive_time_ms"])!==null&&c!==void 0?c:-1,this.idleTimeoutMs=Math.max((u=i["grpc.client_idle_timeout_ms"])!==null&&u!==void 0?u:zB,UB);let v={createSubchannel:(A,S)=>{let R=this.subchannelPool.getOrCreateSubchannel(this.target,A,Object.assign({},this.options,S),this.credentials);R.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",R.getChannelzRef());let k=new $_(R,this);return this.wrappedSubchannels.add(k),k},updateState:(A,S)=>{this.currentPicker=S;let R=this.pickQueue.slice();this.pickQueue=[],R.length>0&&this.callRefTimerUnref();for(let k of R)k.doPick();this.updateState(A)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:A=>{this.channelzEnabled&&this.childrenTracker.refChild(A)},removeChannelzChild:A=>{this.channelzEnabled&&this.childrenTracker.unrefChild(A)}};this.resolvingLoadBalancer=new DB.ResolvingLoadBalancer(this.target,v,i,(A,S)=>{A.retryThrottling?ih.set(this.getTarget(),new W_.RetryThrottler(A.retryThrottling.maxTokens,A.retryThrottling.tokenRatio,ih.get(this.getTarget()))):ih.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=S,this.currentResolutionError=null,process.nextTick(()=>{let R=this.configSelectionQueue;this.configSelectionQueue=[],R.length>0&&this.callRefTimerUnref();for(let k of R)k.getConfig()})},A=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+A.code+' and details "'+A.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0,LB.restrictControlPlaneStatusCode)(A.code,A.details)),{metadata:A.metadata}));let S=this.configSelectionQueue;this.configSelectionQueue=[],S.length>0&&this.callRefTimerUnref();for(let R of S)R.reportResolverError(A)}),this.filterStackFactory=new IB.FilterStackFactory([new AB.MaxMessageSizeFilterFactory(this.options),new xB.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(i,void 0,2));let b=new Error;(0,G_.trace)(ql.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((f=b.stack)===null||f===void 0?void 0:f.substring(b.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,n){(0,G_.trace)(n??ql.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,nh.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,n,i,r;!((n=(e=this.callRefTimer).hasRef)===null||n===void 0)&&n.call(e)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(r=(i=this.callRefTimer).ref)===null||r===void 0||r.call(i))}callRefTimerUnref(){var e,n;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(n=(e=this.callRefTimer).unref)===null||n===void 0||n.call(e))}removeConnectivityStateWatcher(e){let n=this.connectivityStateWatchers.findIndex(i=>i===e);n>=0&&this.connectivityStateWatchers.splice(n,1)}updateState(e){(0,G_.trace)(ql.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,nh.uriToString)(this.target)+" "+Ni.ConnectivityState[this.connectivityState]+" -> "+Ni.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+Ni.ConnectivityState[e]),this.connectivityState=e;let n=this.connectivityStateWatchers.slice();for(let i of n)e!==i.currentState&&(i.timer&&clearTimeout(i.timer),this.removeConnectivityStateWatcher(i),i.callback());e!==Ni.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(let n of this.wrappedSubchannels)n.throttleKeepalive(e)}}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,n){return this.currentPicker.pick({metadata:e,extraPickInfo:n})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,n){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(e,n)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(Ni.ConnectivityState.IDLE),this.currentPicker=new uM.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var n,i;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let s=new Date().valueOf()-this.lastActivityTimestamp.valueOf();s>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-s)},e),(i=(n=this.idleTimer).unref)===null||i===void 0||i.call(n)}maybeStartIdleTimer(){this.connectivityState!==Ni.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===ql.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,n,i,r,s){let o=(0,H_.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+n+'"'),new RB.LoadBalancingCall(this,e,n,i,r,s,o)}createRetryingCall(e,n,i,r,s){let o=(0,H_.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+n+'"'),new W_.RetryingCall(this,e,n,i,r,s,o,this.retryBufferTracker,ih.get(this.getTarget()))}createInnerCall(e,n,i,r,s){return this.options["grpc.enable_retries"]===0?this.createLoadBalancingCall(e,n,i,r,s):this.createRetryingCall(e,n,i,r,s)}createResolvingCall(e,n,i,r,s){let o=(0,H_.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+e+'", deadline='+(0,NB.deadlineToString)(n));let a={deadline:n,flags:s??ql.Propagate.DEFAULTS,host:i??this.defaultAuthority,parentCall:r},l=new FB.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),o);return this.onCallStart(),l.addStatusWatcher(c=>{this.onCallEnd(c)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState(Ni.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,jl.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,nh.uriToString)(this.target)}getConnectivityState(e){let n=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),n}watchConnectivityState(e,n,i){if(this.connectivityState===Ni.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let r=null;if(n!==1/0){let o=n instanceof Date?n:new Date(n),a=new Date;if(n===-1/0||o<=a){process.nextTick(i,new Error("Deadline passed without connectivity state change"));return}r=setTimeout(()=>{this.removeConnectivityStateWatcher(s),i(new Error("Deadline passed without connectivity state change"))},o.getTime()-a.getTime())}let s={currentState:e,callback:i,timer:r};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,n,i,r,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof n=="number"||n instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===Ni.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,n,i,r,s)}};rh.InternalChannel=K_});var Xm=w(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});sh.ChannelImplementation=void 0;var GB=Bu(),HB=hM(),Q_=class{constructor(e,n,i){if(typeof e!="string")throw new TypeError("Channel target must be a string");if(!(n instanceof GB.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(i&&typeof i!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new HB.InternalChannel(e,n,i)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,n,i){this.internalChannel.watchConnectivityState(e,n,i)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,n,i,r,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof n=="number"||n instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,n,i,r,s)}};sh.ChannelImplementation=Q_});var wM=w(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.Http2ServerCallStream=qn.ServerDuplexStreamImpl=qn.ServerWritableStreamImpl=qn.ServerReadableStreamImpl=qn.ServerUnaryCallImpl=void 0;var _M=Me("events"),ea=Me("http2"),X_=Me("stream"),yM=Me("zlib"),vM=Me("util"),je=Se(),Z_=Kt(),WB=v_(),CM=Ye(),Hl=Au(),bM="server_call",$B=(0,vM.promisify)(yM.unzip),KB=(0,vM.promisify)(yM.inflate);function Gl(t){CM.trace(je.LogVerbosity.DEBUG,bM,t)}var QB="grpc-accept-encoding",YB="grpc-encoding",fM="grpc-message",pM="grpc-status",mM="grpc-timeout",JB=/(\d{1,8})\s*([HMSmun])/,XB={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},ZB={[QB]:"identity,deflate,gzip",[YB]:"identity"},gM={[ea.constants.HTTP2_HEADER_STATUS]:ea.constants.HTTP_STATUS_OK,[ea.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},e4={waitForTrailers:!0},Y_=class extends _M.EventEmitter{constructor(e,n,i){super(),this.call=e,this.metadata=n,this.request=i,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};qn.ServerUnaryCallImpl=Y_;var oh=class extends X_.Readable{constructor(e,n,i,r){super({objectMode:!0}),this.call=e,this.metadata=n,this.deserialize=i,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,r)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};qn.ServerReadableStreamImpl=oh;var Wl=class extends X_.Writable{constructor(e,n,i,r){super({objectMode:!0}),this.call=e,this.metadata=n,this.serialize=i,this.request=r,this.cancelled=!1,this.trailingMetadata=new Z_.Metadata,this.call.setupSurfaceCall(this),this.on("error",s=>{this.call.sendError(s),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,n,i){try{let r=this.call.serializeMessage(e);if(!this.call.write(r)){this.call.once("drain",i);return}}catch(r){this.emit("error",{details:(0,Hl.getErrorMessage)(r),code:je.Status.INTERNAL})}i()}_final(e){this.call.sendStatus({code:je.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}};qn.ServerWritableStreamImpl=Wl;var ta=class extends X_.Duplex{constructor(e,n,i,r,s){super({objectMode:!0}),this.call=e,this.metadata=n,this.serialize=i,this.deserialize=r,this.cancelled=!1,this.trailingMetadata=new Z_.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,s),this.on("error",o=>{this.call.sendError(o),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}};qn.ServerDuplexStreamImpl=ta;ta.prototype._read=oh.prototype._read;ta.prototype._write=Wl.prototype._write;ta.prototype._final=Wl.prototype._final;var J_=class extends _M.EventEmitter{constructor(e,n,i){super(),this.stream=e,this.handler=n,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=je.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=je.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",r=>{}),this.stream.once("close",()=>{var r;Gl("Request to method "+((r=this.handler)===null||r===void 0?void 0:r.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:je.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in i&&(this.maxSendMessageSize=i["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in i&&(this.maxReceiveMessageSize=i["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,n){return n==="deflate"?KB(e.subarray(5)):n==="gzip"?$B(e.subarray(5)):n==="identity"?e.subarray(5):Promise.reject({code:je.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${n}"`})}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let n=e?e.toHttp2Headers():null,i=Object.assign(Object.assign(Object.assign({},gM),ZB),n);this.stream.respond(i,e4)}receiveMetadata(e){let n=Z_.Metadata.fromHttp2Headers(e);CM.isTracerEnabled(bM)&&Gl("Request to "+this.handler.path+" received headers "+JSON.stringify(n.toJSON()));let i=n.get(mM);if(i.length>0){let r=i[0].toString().match(JB);if(r===null){let a=new Error("Invalid deadline");return a.code=je.Status.OUT_OF_RANGE,this.sendError(a),n}let s=+r[1]*XB[r[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+s),this.deadlineTimer=setTimeout(t4,s,this),n.remove(mM)}return n.remove(ea.constants.HTTP2_HEADER_ACCEPT_ENCODING),n.remove(ea.constants.HTTP2_HEADER_TE),n.remove(ea.constants.HTTP2_HEADER_CONTENT_TYPE),n.remove("grpc-accept-encoding"),n}receiveUnaryMessage(e){return new Promise((n,i)=>{let{stream:r}=this,s=0,o=this,a=[],l=this.maxReceiveMessageSize;this.stream.on("data",c),this.stream.on("end",u),this.stream.on("error",u);function c(f){if(s+=f.byteLength,l!==-1&&s>l){r.removeListener("data",c),r.removeListener("end",u),r.removeListener("error",u),i({code:je.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${s} vs. ${l})`});return}a.push(f)}function u(f){if(r.removeListener("data",c),r.removeListener("end",u),r.removeListener("error",u),f!==void 0){i({code:je.Status.INTERNAL,details:f.message});return}if(s===0){i({code:je.Status.INTERNAL,details:"received empty unary message"});return}o.emit("receiveMessage");let g=Buffer.concat(a,s),C=g.readUInt8(0)===1?e:"identity",v=o.getDecompressedMessage(g,C);if(Buffer.isBuffer(v)){n(o.deserializeMessageWithInternalError(v));return}v.then(b=>n(o.deserializeMessageWithInternalError(b)),b=>i(b.code?b:{code:je.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}})}deserializeMessageWithInternalError(e){return T(this,null,function*(){try{return this.deserializeMessage(e)}catch(n){throw{details:(0,Hl.getErrorMessage)(n),code:je.Status.INTERNAL}}})}serializeMessage(e){let n=this.handler.serialize(e),i=n.byteLength,r=Buffer.allocUnsafe(i+5);return r.writeUInt8(0,0),r.writeUInt32BE(i,1),n.copy(r,5),r}deserializeMessage(e){return this.handler.deserialize(e)}sendUnaryMessage(e,n,i,r){return T(this,null,function*(){if(!this.checkCancelled()){if(i===void 0&&(i=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&i&&(e.metadata=i),this.sendError(e);return}try{let s=this.serializeMessage(n);this.write(s),this.sendStatus({code:je.Status.OK,details:"OK",metadata:i})}catch(s){this.sendError({details:(0,Hl.getErrorMessage)(s),code:je.Status.INTERNAL})}}})}sendStatus(e){var n,i;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===je.Status.OK),!this.checkCancelled())if(Gl("Request to method "+((n=this.handler)===null||n===void 0?void 0:n.path)+" ended with status code: "+je.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var r;let s=Object.assign({[pM]:e.code,[fM]:encodeURI(e.details)},(r=e.metadata)===null||r===void 0?void 0:r.toHttp2Headers());this.stream.sendTrailers(s),this.statusSent=!0}),this.stream.end());else{let r=Object.assign(Object.assign({[pM]:e.code,[fM]:encodeURI(e.details)},gM),(i=e.metadata)===null||i===void 0?void 0:i.toHttp2Headers());this.stream.respond(r,{endStream:!0}),this.statusSent=!0}}sendError(e){let n={code:je.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&e.metadata!==void 0?e.metadata:null};"code"in e&&typeof e.code=="number"&&Number.isInteger(e.code)&&(n.code=e.code,"details"in e&&typeof e.details=="string"&&(n.details=e.details)),this.sendStatus(n)}write(e){if(!this.checkCancelled()){if(this.maxSendMessageSize!==-1&&e.length>this.maxSendMessageSize){this.sendError({code:je.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",n=>{e.cancelled=!0,e.emit("cancelled",n)}),this.once("callEnd",n=>e.emit("callEnd",n))}setupReadable(e,n){let i=new WB.StreamDecoder,r=!1,s=!1,o=!1,a=()=>T(this,null,function*(){!o&&r&&!s&&(o=!0,yield this.pushOrBufferMessage(e,null))});this.stream.on("data",l=>T(this,null,function*(){let c=i.write(l);s=!0,this.stream.pause();for(let u of c){if(this.maxReceiveMessageSize!==-1&&u.length>this.maxReceiveMessageSize){this.sendError({code:je.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${u.length} vs. ${this.maxReceiveMessageSize})`});return}this.emit("receiveMessage");let g=u.readUInt8(0)===1?n:"identity",_=yield this.getDecompressedMessage(u,g);if(!_)return;yield this.pushOrBufferMessage(e,_)}s=!1,this.stream.resume(),yield a()})),this.stream.once("end",()=>T(this,null,function*(){r=!0,yield a()}))}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let n=this.messagesToPush.shift(),i=e.push(n);if(n===null||i===!1){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(e,n){return T(this,null,function*(){this.isPushPending?this.bufferedMessages.push(n):yield this.pushMessage(e,n)})}pushMessage(e,n){return T(this,null,function*(){if(n===null){Gl("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}Gl("Received message of length "+n.length),this.isPushPending=!0;try{let i=yield this.deserializeMessage(n);this.canPush?e.push(i)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(i)}catch(i){this.bufferedMessages.length=0;let r=(0,Hl.getErrorCode)(i);(r===null||r<je.Status.OK||r>je.Status.UNAUTHENTICATED)&&(r=je.Status.INTERNAL),e.emit("error",{details:(0,Hl.getErrorMessage)(i),code:r})}this.isPushPending=!1,this.bufferedMessages.length>0&&(yield this.pushMessage(e,this.bufferedMessages.shift()))})}getPeer(){var e;let n=(e=this.stream.session)===null||e===void 0?void 0:e.socket;return n?.remoteAddress?n.remotePort?`${n.remoteAddress}:${n.remotePort}`:n.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}};qn.Http2ServerCallStream=J_;function t4(t){let e=new Error("Deadline exceeded");e.code=je.Status.DEADLINE_EXCEEDED,t.sendError(e),t.cancelled=!0,t.emit("cancelled","deadline")}});var n0=w(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.ServerCredentials=void 0;var SM=wm(),$l=class{static createInsecure(){return new e0}static createSsl(e,n,i=!1){if(e!==null&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(n))throw new TypeError("keyCertPairs must be an array");if(typeof i!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let r=[],s=[];for(let o=0;o<n.length;o++){let a=n[o];if(a===null||typeof a!="object")throw new TypeError(`keyCertPair[${o}] must be an object`);if(!Buffer.isBuffer(a.private_key))throw new TypeError(`keyCertPair[${o}].private_key must be a Buffer`);if(!Buffer.isBuffer(a.cert_chain))throw new TypeError(`keyCertPair[${o}].cert_chain must be a Buffer`);r.push(a.cert_chain),s.push(a.private_key)}return new t0({ca:e||(0,SM.getDefaultRootsData)()||void 0,cert:r,key:s,requestCert:i,ciphers:SM.CIPHER_SUITES})}};ah.ServerCredentials=$l;var e0=class extends $l{_isSecure(){return!1}_getSettings(){return null}},t0=class extends $l{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}});var MM=w(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});uh.Server=void 0;var Wr=Me("http2"),or=Se(),xs=wM(),n4=n0(),TM=bi(),lh=Ye(),si=Si(),i4=gn(),an=Ps(),ch=~(1<<31),r4=~(1<<31),s4=2e4,{HTTP2_HEADER_PATH:EM}=Wr.constants,o4="server";function a4(){}function i0(t){return{code:or.Status.UNIMPLEMENTED,details:`The server does not implement the method ${t}`}}function l4(t,e){let n=i0(e);switch(t){case"unary":return(i,r)=>{r(n,null)};case"clientStream":return(i,r)=>{r(n,null)};case"serverStream":return i=>{i.emit("error",n)};case"bidi":return i=>{i.emit("error",n)};default:throw new Error(`Invalid handlerType ${t}`)}}var r0=class{constructor(e){var n,i,r,s;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new an.ChannelzTrace,this.callTracker=new an.ChannelzCallTracker,this.listenerChildrenTracker=new an.ChannelzChildrenTracker,this.sessionChildrenTracker=new an.ChannelzChildrenTracker,this.options=e??{},this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,an.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(n=this.options["grpc.max_connection_age_ms"])!==null&&n!==void 0?n:ch,this.maxConnectionAgeGraceMs=(i=this.options["grpc.max_connection_age_grace_ms"])!==null&&i!==void 0?i:ch,this.keepaliveTimeMs=(r=this.options["grpc.keepalive_time_ms"])!==null&&r!==void 0?r:r4,this.keepaliveTimeoutMs=(s=this.options["grpc.keepalive_timeout_ms"])!==null&&s!==void 0?s:s4,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var n,i,r;let s=this.sessions.get(e),o=e.socket,a=o.remoteAddress?(0,si.stringToSubchannelAddress)(o.remoteAddress,o.remotePort):null,l=o.localAddress?(0,si.stringToSubchannelAddress)(o.localAddress,o.localPort):null,c;if(e.encrypted){let f=o,g=f.getCipher(),_=f.getCertificate(),C=f.getPeerCertificate();c={cipherSuiteStandardName:(n=g.standardName)!==null&&n!==void 0?n:null,cipherSuiteOtherName:g.standardName?null:g.name,localCertificate:_&&"raw"in _?_.raw:null,remoteCertificate:C&&"raw"in C?C.raw:null}}else c=null;return{remoteAddress:a,localAddress:l,security:c,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:(i=e.state.localWindowSize)!==null&&i!==void 0?i:null,remoteFlowControlWindow:(r=e.state.remoteWindowSize)!==null&&r!==void 0?r:null}}}trace(e){lh.trace(or.LogVerbosity.DEBUG,o4,"("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,n){if(e===null||typeof e!="object"||n===null||typeof n!="object")throw new Error("addService() requires two objects as arguments");let i=Object.keys(e);if(i.length===0)throw new Error("Cannot add an empty service to a server");i.forEach(r=>{let s=e[r],o;s.requestStream?s.responseStream?o="bidi":o="clientStream":s.responseStream?o="serverStream":o="unary";let a=n[r],l;if(a===void 0&&typeof s.originalName=="string"&&(a=n[s.originalName]),a!==void 0?l=a.bind(n):l=l4(o,r),this.register(s.path,l,s.responseSerialize,s.requestDeserialize,o)===!1)throw new Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(e===null||typeof e!="object")throw new Error("removeService() requires object as argument");Object.keys(e).forEach(i=>{let r=e[i];this.unregister(r.path)})}bind(e,n){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,n,i){if(this.started===!0)throw new Error("server is already started");if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof e!="string")throw new TypeError("port must be a string");if(n===null||!(n instanceof n4.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof i!="function")throw new TypeError("callback must be a function");let r=(0,i4.parseUri)(e);if(r===null)throw new Error(`Could not parse port "${e}"`);let s=(0,TM.mapUriDefaultScheme)(r);if(s===null)throw new Error(`Could not get a default scheme for port "${e}"`);let o={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?o.maxSessionMemory=this.options["grpc-node.max_session_memory"]:o.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(o.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let a=(_,C)=>{process.nextTick(()=>i(_,C))},l=()=>{let _;if(n._isSecure()){let C=Object.assign(o,n._getSettings());C.enableTrace=this.options["grpc-node.tls_enable_trace"]===1,_=Wr.createSecureServer(C),_.on("secureConnection",v=>{v.on("error",b=>{this.trace("An incoming TLS connection closed with error: "+b.message)})})}else _=Wr.createServer(o);return _.setTimeout(0,a4),this._setupHandlers(_),_},c=(_,C,v)=>_.length===0?Promise.resolve({port:C,count:v}):Promise.all(_.map(b=>{this.trace("Attempting to bind "+(0,si.subchannelAddressToString)(b));let A;(0,si.isTcpSubchannelAddress)(b)?A={host:b.host,port:C}:A=b;let S=l();return new Promise((R,k)=>{let J=se=>{this.trace("Failed to bind "+(0,si.subchannelAddressToString)(b)+" with error "+se.message),R(se)};S.once("error",J),S.listen(A,()=>{if(this.shutdown){S.close(),R(new Error("bindAsync failed because server is shutdown"));return}let se=S.address(),ve;typeof se=="string"?ve={path:se}:ve={host:se.address,port:se.port};let ut=(0,an.registerChannelzSocket)((0,si.subchannelAddressToString)(ve),()=>({localAddress:ve,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(ut),this.http2ServerList.push({server:S,channelzRef:ut}),this.trace("Successfully bound "+(0,si.subchannelAddressToString)(ve)),R("port"in ve?ve.port:C),S.removeListener("error",J)})})})).then(b=>{let A=0;for(let S of b)if(typeof S=="number"&&(A+=1,S!==C))throw new Error("Invalid state: multiple port numbers added from single address");return{port:C,count:A+v}}),u=_=>{if(_.length===0)return Promise.resolve({port:0,count:0});let C=_[0],v=l();return new Promise((b,A)=>{let S=R=>{this.trace("Failed to bind "+(0,si.subchannelAddressToString)(C)+" with error "+R.message),b(u(_.slice(1)))};v.once("error",S),v.listen(C,()=>{if(this.shutdown){v.close(),b({port:0,count:0});return}let R=v.address(),k={host:R.address,port:R.port},J=(0,an.registerChannelzSocket)((0,si.subchannelAddressToString)(k),()=>({localAddress:k,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(J),this.http2ServerList.push({server:v,channelzRef:J}),this.trace("Successfully bound "+(0,si.subchannelAddressToString)(k)),b(c(_.slice(1),R.port,1)),v.removeListener("error",S)})})},f={onSuccessfulResolution:(_,C,v)=>{if(f.onSuccessfulResolution=()=>{},this.shutdown&&a(new Error("bindAsync failed because server is shutdown"),0),_.length===0){a(new Error(`No addresses resolved for port ${e}`),0);return}let b;(0,si.isTcpSubchannelAddress)(_[0])?_[0].port===0?b=u(_):b=c(_,_[0].port,0):b=c(_,1,0),b.then(A=>{if(A.count===0){let S=`No address added out of total ${_.length} resolved`;lh.log(or.LogVerbosity.ERROR,S),a(new Error(S),0)}else A.count<_.length&&lh.log(or.LogVerbosity.INFO,`WARNING Only ${A.count} addresses added out of total ${_.length} resolved`),a(null,A.port)},A=>{let S=`No address added out of total ${_.length} resolved`;lh.log(or.LogVerbosity.ERROR,S),a(new Error(S),0)})},onError:_=>{a(new Error(_.details),0)}};(0,TM.createResolver)(s,f,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:n}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(n),(0,an.unregisterChannelzRef)(n))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,n)=>{n.destroy(Wr.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,an.unregisterChannelzRef)(this.channelzRef)}register(e,n,i,r,s){return this.handlers.has(e)?!1:(this.handlers.set(e,{func:n,serialize:i,deserialize:r,type:s,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(this.http2ServerList.length===0||this.http2ServerList.every(({server:e})=>e.listening!==!0))throw new Error("server must be bound in order to start");if(this.started===!0)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let n=s=>{this.channelzEnabled&&(0,an.unregisterChannelzRef)(this.channelzRef),e(s)},i=0;function r(){i--,i===0&&n()}this.started=!1,this.shutdown=!0;for(let{server:s,channelzRef:o}of this.http2ServerList)s.listening&&(i++,s.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(o),(0,an.unregisterChannelzRef)(o)),r()}));this.sessions.forEach((s,o)=>{o.closed||(i+=1,o.close(r))}),i===0&&n()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,n){let i=n[Wr.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof i!="string"||!i.startsWith("application/grpc")?(e.respond({[Wr.constants.HTTP2_HEADER_STATUS]:Wr.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1):!0}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let n=this.handlers.get(e);return n===void 0?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):n}_respondWithError(e,n,i=null){let r=new xs.Http2ServerCallStream(n,null,this.options);e.code===void 0&&(e.code=or.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),i?.streamTracker.addCallFailed()),r.sendError(e)}_channelzHandler(e,n){let i=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),i?.streamTracker.addCallStarted(),!this._verifyContentType(e,n)){this.callTracker.addCallFailed(),i?.streamTracker.addCallFailed();return}let r=n[EM],s=this._retrieveHandler(r);if(!s){this._respondWithError(i0(r),e,i);return}let o=new xs.Http2ServerCallStream(e,s,this.options);o.once("callEnd",a=>{a===or.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),i&&(o.once("streamEnd",a=>{a?i.streamTracker.addCallSucceeded():i.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{i.messagesSent+=1,i.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{i.messagesReceived+=1,i.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,s,n)||(this.callTracker.addCallFailed(),i?.streamTracker.addCallFailed(),o.sendError({code:or.Status.INTERNAL,details:`Unknown handler type: ${s.type}`}))}_streamHandler(e,n){if(this._verifyContentType(e,n)!==!0)return;let i=n[EM],r=this._retrieveHandler(i);if(!r){this._respondWithError(i0(i),e,null);return}let s=new xs.Http2ServerCallStream(e,r,this.options);this._runHandlerForCall(s,r,n)||s.sendError({code:or.Status.INTERNAL,details:`Unknown handler type: ${r.type}`})}_runHandlerForCall(e,n,i){var r;let s=e.receiveMetadata(i),o=(r=s.get("grpc-encoding")[0])!==null&&r!==void 0?r:"identity";s.remove("grpc-encoding");let{type:a}=n;if(a==="unary")c4(e,n,s,o);else if(a==="clientStream")u4(e,n,s,o);else if(a==="serverStream")d4(e,n,s,o);else if(a==="bidi")h4(e,n,s,o);else return!1;return!0}_setupHandlers(e){if(e===null)return;let n=e.address(),i="null";n&&(typeof n=="string"?i=n:i=n.address+":"+n.port),this.serverAddressString=i;let r=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",r.bind(this)),e.on("session",s=>{var o,a,l,c,u;if(!this.started){s.destroy();return}let f=(0,an.registerChannelzSocket)((o=s.socket.remoteAddress)!==null&&o!==void 0?o:"unknown",this.getChannelzSessionInfoGetter(s),this.channelzEnabled),g={ref:f,streamTracker:new an.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(s,g);let _=s.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+_),this.sessionChildrenTracker.refChild(f));let C=null,v=null,b=!1;if(this.maxConnectionAgeMs!==ch){let S=this.maxConnectionAgeMs/10,R=Math.random()*S*2-S;C=(l=(a=setTimeout(()=>{var k,J;b=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+_);try{s.goaway(Wr.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==ch&&(v=(J=(k=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs)).unref)===null||J===void 0?void 0:J.call(k))},this.maxConnectionAgeMs+R)).unref)===null||l===void 0?void 0:l.call(a)}let A=(u=(c=setInterval(()=>{var S,R;let k=(R=(S=setTimeout(()=>{b=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+_),s.close()},this.keepaliveTimeoutMs)).unref)===null||R===void 0?void 0:R.call(S);try{s.ping((J,se,ve)=>{clearTimeout(k)})}catch{s.destroy()}},this.keepaliveTimeMs)).unref)===null||u===void 0?void 0:u.call(c);s.on("close",()=>{this.channelzEnabled&&(b||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+_),this.sessionChildrenTracker.unrefChild(f),(0,an.unregisterChannelzRef)(f)),C&&clearTimeout(C),v&&clearTimeout(v),A&&clearTimeout(A),this.sessions.delete(s)})})}};uh.Server=r0;function c4(t,e,n,i){return T(this,null,function*(){try{let r=yield t.receiveUnaryMessage(i);if(r===void 0||t.cancelled)return;let s=new xs.ServerUnaryCallImpl(t,n,r);e.func(s,(o,a,l,c)=>{t.sendUnaryMessage(o,a,l,c)})}catch(r){t.sendError(r)}})}function u4(t,e,n,i){let r=new xs.ServerReadableStreamImpl(t,n,e.deserialize,i);function s(o,a,l,c){r.destroy(),t.sendUnaryMessage(o,a,l,c)}t.cancelled||(r.on("error",s),e.func(r,s))}function d4(t,e,n,i){return T(this,null,function*(){try{let r=yield t.receiveUnaryMessage(i);if(r===void 0||t.cancelled)return;let s=new xs.ServerWritableStreamImpl(t,n,e.serialize,r);e.func(s)}catch(r){t.sendError(r)}})}function h4(t,e,n,i){let r=new xs.ServerDuplexStreamImpl(t,n,e.serialize,e.deserialize,i);t.cancelled||e.func(r)}});var OM=w(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.StatusBuilder=void 0;var s0=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return this.code!==null&&(e.code=this.code),this.details!==null&&(e.details=this.details),this.metadata!==null&&(e.metadata=this.metadata),e}};dh.StatusBuilder=s0});var o0=w($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.isDuration=$r.durationToMs=$r.msToDuration=void 0;function f4(t){return{seconds:t/1e3|0,nanos:t%1e3*1e6|0}}$r.msToDuration=f4;function p4(t){return t.seconds*1e3+t.nanos/1e6|0}$r.durationToMs=p4;function m4(t){return typeof t.seconds=="number"&&typeof t.nanos=="number"}$r.isDuration=m4});var p0=w(Kr=>{"use strict";var a0;Object.defineProperty(Kr,"__esModule",{value:!0});Kr.setup=Kr.OutlierDetectionLoadBalancer=Kr.OutlierDetectionLoadBalancingConfig=void 0;var fh=kn(),PM=Se(),As=o0(),IM=m0(),xM=Tr(),g4=Hu(),_4=Dr(),DM=Si(),y4=th(),v4=Ye(),C4="outlier_detection";function _t(t){v4.trace(PM.LogVerbosity.DEBUG,C4,t)}var f0="outlier_detection",b4=((a0=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&a0!==void 0?a0:"true")==="true",w4={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},S4={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function na(t,e,n,i){if(e in t&&typeof t[e]!==n){let r=i?`${i}.${e}`:e;throw new Error(`outlier detection config ${r} parse error: expected ${n}, got ${typeof t[e]}`)}}function l0(t,e,n){let i=n?`${n}.${e}`:e;if(e in t){if(!(0,As.isDuration)(t[e]))throw new Error(`outlier detection config ${i} parse error: expected Duration, got ${typeof t[e]}`);if(!(t[e].seconds>=0&&t[e].seconds<=315576e6&&t[e].nanos>=0&&t[e].nanos<=999999999))throw new Error(`outlier detection config ${i} parse error: values out of range for non-negative Duaration`)}}function hh(t,e,n){let i=n?`${n}.${e}`:e;if(na(t,e,"number",n),e in t&&!(t[e]>=0&&t[e]<=100))throw new Error(`outlier detection config ${i} parse error: value out of range for percentage (0-100)`)}var Kl=class t{constructor(e,n,i,r,s,o,a){if(this.childPolicy=a,a.length>0&&a[0].getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=e??1e4,this.baseEjectionTimeMs=n??3e4,this.maxEjectionTimeMs=i??3e5,this.maxEjectionPercent=r??10,this.successRateEjection=s?Object.assign(Object.assign({},w4),s):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},S4),o):null}getLoadBalancerName(){return f0}toJsonObject(){return{interval:(0,As.msToDuration)(this.intervalMs),base_ejection_time:(0,As.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,As.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new t(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var n;if(l0(e,"interval"),l0(e,"base_ejection_time"),l0(e,"max_ejection_time"),hh(e,"max_ejection_percent"),"success_rate_ejection"in e){if(typeof e.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");na(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),hh(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),na(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),na(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if(typeof e.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");hh(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),hh(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),na(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),na(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new t(e.interval?(0,As.durationToMs)(e.interval):null,e.base_ejection_time?(0,As.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,As.durationToMs)(e.max_ejection_time):null,(n=e.max_ejection_percent)!==null&&n!==void 0?n:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(xM.validateLoadBalancingConfig))}};Kr.OutlierDetectionLoadBalancingConfig=Kl;var u0=class extends y4.BaseSubchannelWrapper{constructor(e,n){super(e),this.mapEntry=n,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((i,r,s,o)=>{if(this.childSubchannelState=s,!this.ejected)for(let a of this.stateListeners)a(this,r,s,o)})}getConnectivityState(){return this.ejected?fh.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let n=this.stateListeners.indexOf(e);n>-1&&this.stateListeners.splice(n,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.ejected=!0;for(let e of this.stateListeners)e(this,this.childSubchannelState,fh.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(let e of this.stateListeners)e(this,fh.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function c0(){return{success:0,failure:0}}var d0=class{constructor(){this.activeBucket=c0(),this.inactiveBucket=c0()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=c0()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},h0=class{constructor(e,n){this.wrappedPicker=e,this.countCalls=n}pick(e){let n=this.wrappedPicker.pick(e);if(n.pickResultType===_4.PickResultType.COMPLETE){let i=n.subchannel,r=i.getMapEntry();if(r){let s=n.onCallEnded;return this.countCalls&&(s=o=>{var a;o===PM.Status.OK?r.counter.addSuccess():r.counter.addFailure(),(a=n.onCallEnded)===null||a===void 0||a.call(n,o)}),Object.assign(Object.assign({},n),{subchannel:i.getWrappedSubchannel(),onCallEnded:s})}else return Object.assign(Object.assign({},n),{subchannel:i.getWrappedSubchannel()})}else return n}},ph=class{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new g4.ChildLoadBalancerHandler((0,IM.createChildChannelControlHelper)(e,{createSubchannel:(n,i)=>{let r=e.createSubchannel(n,i),s=this.addressMap.get((0,DM.subchannelAddressToString)(n)),o=new u0(r,s);return s?.currentEjectionTimestamp!==null&&o.eject(),s?.subchannelWrappers.push(o),o},updateState:(n,i)=>{n===fh.ConnectivityState.READY?e.updateState(n,new h0(i,this.isCountingEnabled())):e.updateState(n,i)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(let n of this.addressMap.values())n.currentEjectionTimestamp!==null&&(e+=1);return e*100/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let n=this.latestConfig.getSuccessRateEjectionConfig();if(!n)return;_t("Running success rate check");let i=n.request_volume,r=0,s=[];for(let[f,g]of this.addressMap){let _=g.counter.getLastSuccesses(),C=g.counter.getLastFailures();_t("Stats for "+f+": successes="+_+" failures="+C+" targetRequestVolume="+i),_+C>=i&&(r+=1,s.push(_/(_+C)))}if(_t("Found "+r+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),r<n.minimum_hosts)return;let o=s.reduce((f,g)=>f+g)/s.length,a=0;for(let f of s){let g=f-o;a+=g*g}let l=a/s.length,c=Math.sqrt(l),u=o-c*(n.stdev_factor/1e3);_t("stdev="+c+" ejectionThreshold="+u);for(let[f,g]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let _=g.counter.getLastSuccesses(),C=g.counter.getLastFailures();if(_+C<i)continue;let v=_/(_+C);if(_t("Checking candidate "+f+" successRate="+v),v<u){let b=Math.random()*100;_t("Candidate "+f+" randomNumber="+b+" enforcement_percentage="+n.enforcement_percentage),b<n.enforcement_percentage&&(_t("Ejecting candidate "+f),this.eject(g,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let n=this.latestConfig.getFailurePercentageEjectionConfig();if(!n)return;_t("Running failure percentage check. threshold="+n.threshold+" request volume threshold="+n.request_volume);let i=0;for(let r of this.addressMap.values()){let s=r.counter.getLastSuccesses(),o=r.counter.getLastFailures();s+o>=n.request_volume&&(i+=1)}if(!(i<n.minimum_hosts))for(let[r,s]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(_t("Candidate successes="+o+" failures="+a),o+a<n.request_volume)continue;if(a*100/(a+o)>n.threshold){let c=Math.random()*100;_t("Candidate "+r+" randomNumber="+c+" enforcement_percentage="+n.enforcement_percentage),c<n.enforcement_percentage&&(_t("Ejecting candidate "+r),this.eject(s,e))}}}eject(e,n){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(let i of e.subchannelWrappers)i.eject()}uneject(e){e.currentEjectionTimestamp=null;for(let n of e.subchannelWrappers)n.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var n,i;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),(i=(n=this.ejectionTimer).unref)===null||i===void 0||i.call(n)}runChecks(){let e=new Date;if(_t("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(let[n,i]of this.addressMap.entries())if(i.currentEjectionTimestamp===null)i.ejectionTimeMultiplier>0&&(i.ejectionTimeMultiplier-=1);else{let r=this.latestConfig.getBaseEjectionTimeMs(),s=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(i.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(r*i.ejectionTimeMultiplier,Math.max(r,s))),o<new Date&&(_t("Unejecting "+n),this.uneject(i))}}}updateAddressList(e,n,i){if(!(n instanceof Kl))return;let r=new Set;for(let o of e)r.add((0,DM.subchannelAddressToString)(o));for(let o of r)this.addressMap.has(o)||(_t("Adding map entry for "+o),this.addressMap.set(o,{counter:new d0,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let o of this.addressMap.keys())r.has(o)||(_t("Removing map entry for "+o),this.addressMap.delete(o));let s=(0,xM.getFirstUsableConfig)(n.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,s,i),n.getSuccessRateEjectionConfig()||n.getFailurePercentageEjectionConfig())if(this.timerStartTime){_t("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let o=n.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(o)}else _t("Starting new timer"),this.timerStartTime=new Date,this.startTimer(n.getIntervalMs()),this.switchAllBuckets();else{_t("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let o of this.addressMap.values())this.uneject(o),o.ejectionTimeMultiplier=0}this.latestConfig=n}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return f0}};Kr.OutlierDetectionLoadBalancer=ph;function T4(){b4&&(0,IM.registerLoadBalancerType)(f0,ph,Kl)}Kr.setup=T4});var m0=w(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.OutlierDetectionLoadBalancingConfig=oe.BaseSubchannelWrapper=oe.registerAdminService=oe.FilterStackFactory=oe.BaseFilter=oe.PickResultType=oe.QueuePicker=oe.UnavailablePicker=oe.ChildLoadBalancerHandler=oe.subchannelAddressToString=oe.validateLoadBalancingConfig=oe.getFirstUsableConfig=oe.registerLoadBalancerType=oe.createChildChannelControlHelper=oe.BackoffTimeout=oe.durationToMs=oe.uriToString=oe.createResolver=oe.registerResolver=oe.log=oe.trace=void 0;var AM=Ye();Object.defineProperty(oe,"trace",{enumerable:!0,get:function(){return AM.trace}});Object.defineProperty(oe,"log",{enumerable:!0,get:function(){return AM.log}});var kM=bi();Object.defineProperty(oe,"registerResolver",{enumerable:!0,get:function(){return kM.registerResolver}});Object.defineProperty(oe,"createResolver",{enumerable:!0,get:function(){return kM.createResolver}});var E4=gn();Object.defineProperty(oe,"uriToString",{enumerable:!0,get:function(){return E4.uriToString}});var M4=o0();Object.defineProperty(oe,"durationToMs",{enumerable:!0,get:function(){return M4.durationToMs}});var O4=gl();Object.defineProperty(oe,"BackoffTimeout",{enumerable:!0,get:function(){return O4.BackoffTimeout}});var mh=Tr();Object.defineProperty(oe,"createChildChannelControlHelper",{enumerable:!0,get:function(){return mh.createChildChannelControlHelper}});Object.defineProperty(oe,"registerLoadBalancerType",{enumerable:!0,get:function(){return mh.registerLoadBalancerType}});Object.defineProperty(oe,"getFirstUsableConfig",{enumerable:!0,get:function(){return mh.getFirstUsableConfig}});Object.defineProperty(oe,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return mh.validateLoadBalancingConfig}});var D4=Si();Object.defineProperty(oe,"subchannelAddressToString",{enumerable:!0,get:function(){return D4.subchannelAddressToString}});var P4=Hu();Object.defineProperty(oe,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return P4.ChildLoadBalancerHandler}});var g0=Dr();Object.defineProperty(oe,"UnavailablePicker",{enumerable:!0,get:function(){return g0.UnavailablePicker}});Object.defineProperty(oe,"QueuePicker",{enumerable:!0,get:function(){return g0.QueuePicker}});Object.defineProperty(oe,"PickResultType",{enumerable:!0,get:function(){return g0.PickResultType}});var I4=Ud();Object.defineProperty(oe,"BaseFilter",{enumerable:!0,get:function(){return I4.BaseFilter}});var x4=D_();Object.defineProperty(oe,"FilterStackFactory",{enumerable:!0,get:function(){return x4.FilterStackFactory}});var A4=$u();Object.defineProperty(oe,"registerAdminService",{enumerable:!0,get:function(){return A4.registerAdminService}});var k4=th();Object.defineProperty(oe,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return k4.BaseSubchannelWrapper}});var R4=p0();Object.defineProperty(oe,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return R4.OutlierDetectionLoadBalancingConfig}})});var RM=w(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.setup=void 0;var N4=bi(),_0=class{constructor(e,n,i){this.listener=n,this.addresses=[],this.hasReturnedResult=!1;let r;e.authority===""?r="/"+e.path:r=e.path,this.addresses=[{path:r}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}};function F4(){(0,N4.registerResolver)("unix",_0)}gh.setup=F4});var VM=w(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.setup=void 0;var NM=Me("net"),_h=Se(),y0=Kt(),FM=bi(),LM=gn(),L4=Ye(),B4="ip_resolver";function BM(t){L4.trace(_h.LogVerbosity.DEBUG,B4,t)}var v0="ipv4",C0="ipv6",V4=443,yh=class{constructor(e,n,i){var r;this.listener=n,this.addresses=[],this.error=null,this.hasReturnedResult=!1,BM("Resolver constructed for target "+(0,LM.uriToString)(e));let s=[];if(!(e.scheme===v0||e.scheme===C0)){this.error={code:_h.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new y0.Metadata};return}let o=e.path.split(",");for(let a of o){let l=(0,LM.splitHostPort)(a);if(l===null){this.error={code:_h.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new y0.Metadata};return}if(e.scheme===v0&&!(0,NM.isIPv4)(l.host)||e.scheme===C0&&!(0,NM.isIPv6)(l.host)){this.error={code:_h.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new y0.Metadata};return}s.push({host:l.host,port:(r=l.port)!==null&&r!==void 0?r:V4})}this.addresses=s,BM("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}};function U4(){(0,FM.registerResolver)(v0,yh),(0,FM.registerResolver)(C0,yh)}vh.setup=U4});var qM=w(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});Fi.setup=Fi.PickFirstLoadBalancer=Fi.shuffled=Fi.PickFirstLoadBalancingConfig=void 0;var UM=Tr(),Ft=kn(),Ch=Dr(),z4=Ye(),q4=Se(),j4="pick_first";function b0(t){z4.trace(q4.LogVerbosity.DEBUG,j4,t)}var Ql="pick_first",G4=250,Yl=class t{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return Ql}toJsonObject(){return{[Ql]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&typeof e.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new t(e.shuffleAddressList===!0)}};Fi.PickFirstLoadBalancingConfig=Yl;var w0=class{constructor(e){this.subchannel=e}pick(e){return{pickResultType:Ch.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function zM(t){let e=t.slice();for(let n=e.length-1;n>1;n--){let i=Math.floor(Math.random()*(n+1)),r=e[n];e[n]=e[i],e[i]=r}return e}Fi.shuffled=zM;var bh=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=Ft.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(n,i,r,s,o)=>{this.onSubchannelStateUpdate(n,i,r,o)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(Ft.ConnectivityState.READY,new w0(this.currentPick)):this.children.length===0?this.updateState(Ft.ConnectivityState.IDLE,new Ch.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(Ft.ConnectivityState.TRANSIENT_FAILURE,new Ch.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Ft.ConnectivityState.CONNECTING,new Ch.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){this.stickyTransientFailureMode=!0;for(let{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(this.currentPick!==null){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,n,i,r){var s;if(!((s=this.currentPick)===null||s===void 0)&&s.realSubchannelEquals(e)){i!==Ft.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[o,a]of this.children.entries())if(e.realSubchannelEquals(a.subchannel)){i===Ft.ConnectivityState.READY&&this.pickSubchannel(a.subchannel),i===Ft.ConnectivityState.TRANSIENT_FAILURE&&(a.hasReportedTransientFailure=!0,r&&(this.lastError=r),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),a.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[n,i]of this.children.entries())if(n>=e){let r=i.subchannel.getConnectivityState();if(r===Ft.ConnectivityState.IDLE||r===Ft.ConnectivityState.CONNECTING){this.startConnecting(n);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var n,i;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===Ft.ConnectivityState.IDLE&&(b0("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var r;(r=this.children[e])===null||r===void 0||r.subchannel.startConnecting()})),this.connectionDelayTimeout=(i=(n=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},G4)).unref)===null||i===void 0?void 0:i.call(n)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(b0("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,this.currentPick!==null&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,n){b0(Ft.ConnectivityState[this.currentState]+" -> "+Ft.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,n)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let n=e.map(i=>({subchannel:this.channelControlHelper.createSubchannel(i,{}),hasReportedTransientFailure:!1}));for(let{subchannel:i}of n)i.ref(),this.channelControlHelper.addChannelzChild(i.getChannelzRef());this.resetSubchannelList(),this.children=n;for(let{subchannel:i}of this.children)if(i.addConnectivityStateListener(this.subchannelStateListener),i.getConnectivityState()===Ft.ConnectivityState.READY){this.pickSubchannel(i);return}for(let i of this.children)i.subchannel.getConnectivityState()===Ft.ConnectivityState.TRANSIENT_FAILURE&&(i.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,n){n instanceof Yl&&(n.getShuffleAddressList()&&(e=zM(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===Ft.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return Ql}};Fi.PickFirstLoadBalancer=bh;function H4(){(0,UM.registerLoadBalancerType)(Ql,bh,Yl),(0,UM.registerDefaultLoadBalancerType)(Ql)}Fi.setup=H4});var GM=w(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.setup=ia.RoundRobinLoadBalancer=void 0;var W4=Tr(),Lt=kn(),wh=Dr(),$4=Si(),K4=Ye(),Q4=Se(),Y4="round_robin";function jM(t){K4.trace(Q4.LogVerbosity.DEBUG,Y4,t)}var Sh="round_robin",S0=class t{getLoadBalancerName(){return Sh}constructor(){}toJsonObject(){return{[Sh]:{}}}static createFromJson(e){return new t}},T0=class{constructor(e,n=0){this.subchannelList=e,this.nextIndex=n}pick(e){let n=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:wh.PickResultType.COMPLETE,subchannel:n,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}},Th=class{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=Lt.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(n,i,r,s,o)=>{this.calculateAndUpdateState(),(r===Lt.ConnectivityState.TRANSIENT_FAILURE||r===Lt.ConnectivityState.IDLE)&&(o&&(this.lastError=o),this.channelControlHelper.requestReresolution(),n.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(n=>n.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(Lt.ConnectivityState.READY)>0){let e=this.subchannels.filter(i=>i.getConnectivityState()===Lt.ConnectivityState.READY),n=0;this.currentReadyPicker!==null&&(n=e.indexOf(this.currentReadyPicker.peekNextSubchannel()),n<0&&(n=0)),this.updateState(Lt.ConnectivityState.READY,new T0(e,n))}else this.countSubchannelsWithState(Lt.ConnectivityState.CONNECTING)>0?this.updateState(Lt.ConnectivityState.CONNECTING,new wh.QueuePicker(this)):this.countSubchannelsWithState(Lt.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(Lt.ConnectivityState.TRANSIENT_FAILURE,new wh.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Lt.ConnectivityState.IDLE,new wh.QueuePicker(this))}updateState(e,n){jM(Lt.ConnectivityState[this.currentState]+" -> "+Lt.ConnectivityState[e]),e===Lt.ConnectivityState.READY?this.currentReadyPicker=n:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,n)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,n){this.resetSubchannelList(),jM("Connect to address list "+e.map(i=>(0,$4.subchannelAddressToString)(i))),this.subchannels=e.map(i=>this.channelControlHelper.createSubchannel(i,{}));for(let i of this.subchannels){i.ref(),i.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(i.getChannelzRef());let r=i.getConnectivityState();(r===Lt.ConnectivityState.IDLE||r===Lt.ConnectivityState.TRANSIENT_FAILURE)&&i.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return Sh}};ia.RoundRobinLoadBalancer=Th;function J4(){(0,W4.registerLoadBalancerType)(Sh,Th,S0)}ia.setup=J4});var KM=w(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.experimental=j.addAdminServicesToServer=j.getChannelzHandlers=j.getChannelzServiceDefinition=j.InterceptorConfigurationError=j.InterceptingCall=j.RequesterBuilder=j.ListenerBuilder=j.StatusBuilder=j.getClientChannel=j.ServerCredentials=j.Server=j.setLogVerbosity=j.setLogger=j.load=j.loadObject=j.CallCredentials=j.ChannelCredentials=j.waitForClientReady=j.closeClient=j.Channel=j.makeGenericClientConstructor=j.makeClientConstructor=j.loadPackageDefinition=j.Client=j.compressionAlgorithms=j.propagate=j.connectivityState=j.status=j.logVerbosity=j.Metadata=j.credentials=void 0;var Eh=Cm();Object.defineProperty(j,"CallCredentials",{enumerable:!0,get:function(){return Eh.CallCredentials}});var X4=Xm();Object.defineProperty(j,"Channel",{enumerable:!0,get:function(){return X4.ChannelImplementation}});var Z4=P_();Object.defineProperty(j,"compressionAlgorithms",{enumerable:!0,get:function(){return Z4.CompressionAlgorithms}});var eV=kn();Object.defineProperty(j,"connectivityState",{enumerable:!0,get:function(){return eV.ConnectivityState}});var Mh=Bu();Object.defineProperty(j,"ChannelCredentials",{enumerable:!0,get:function(){return Mh.ChannelCredentials}});var HM=Jm();Object.defineProperty(j,"Client",{enumerable:!0,get:function(){return HM.Client}});var E0=Se();Object.defineProperty(j,"logVerbosity",{enumerable:!0,get:function(){return E0.LogVerbosity}});Object.defineProperty(j,"status",{enumerable:!0,get:function(){return E0.Status}});Object.defineProperty(j,"propagate",{enumerable:!0,get:function(){return E0.Propagate}});var WM=Ye(),M0=eg();Object.defineProperty(j,"loadPackageDefinition",{enumerable:!0,get:function(){return M0.loadPackageDefinition}});Object.defineProperty(j,"makeClientConstructor",{enumerable:!0,get:function(){return M0.makeClientConstructor}});Object.defineProperty(j,"makeGenericClientConstructor",{enumerable:!0,get:function(){return M0.makeClientConstructor}});var tV=Kt();Object.defineProperty(j,"Metadata",{enumerable:!0,get:function(){return tV.Metadata}});var nV=MM();Object.defineProperty(j,"Server",{enumerable:!0,get:function(){return nV.Server}});var iV=n0();Object.defineProperty(j,"ServerCredentials",{enumerable:!0,get:function(){return iV.ServerCredentials}});var rV=OM();Object.defineProperty(j,"StatusBuilder",{enumerable:!0,get:function(){return rV.StatusBuilder}});j.credentials={combineChannelCredentials:(t,...e)=>e.reduce((n,i)=>n.compose(i),t),combineCallCredentials:(t,...e)=>e.reduce((n,i)=>n.compose(i),t),createInsecure:Mh.ChannelCredentials.createInsecure,createSsl:Mh.ChannelCredentials.createSsl,createFromSecureContext:Mh.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:Eh.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:Eh.CallCredentials.createFromGoogleCredential,createEmpty:Eh.CallCredentials.createEmpty};var sV=t=>t.close();j.closeClient=sV;var oV=(t,e,n)=>t.waitForReady(e,n);j.waitForClientReady=oV;var aV=(t,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};j.loadObject=aV;var lV=(t,e,n)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};j.load=lV;var cV=t=>{WM.setLogger(t)};j.setLogger=cV;var uV=t=>{WM.setLoggerVerbosity(t)};j.setLogVerbosity=uV;var dV=t=>HM.Client.prototype.getChannel.call(t);j.getClientChannel=dV;var Oh=Km();Object.defineProperty(j,"ListenerBuilder",{enumerable:!0,get:function(){return Oh.ListenerBuilder}});Object.defineProperty(j,"RequesterBuilder",{enumerable:!0,get:function(){return Oh.RequesterBuilder}});Object.defineProperty(j,"InterceptingCall",{enumerable:!0,get:function(){return Oh.InterceptingCall}});Object.defineProperty(j,"InterceptorConfigurationError",{enumerable:!0,get:function(){return Oh.InterceptorConfigurationError}});var $M=Ps();Object.defineProperty(j,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return $M.getChannelzServiceDefinition}});Object.defineProperty(j,"getChannelzHandlers",{enumerable:!0,get:function(){return $M.getChannelzHandlers}});var hV=$u();Object.defineProperty(j,"addAdminServicesToServer",{enumerable:!0,get:function(){return hV.addAdminServicesToServer}});var fV=m0();j.experimental=fV;var pV=g_(),mV=RM(),gV=VM(),_V=qM(),yV=GM(),vV=p0(),CV=Ps();pV.setup(),mV.setup(),gV.setup(),_V.setup(),yV.setup(),vV.setup(),CV.setup()});var FI="firebase",LI="10.10.0";It(FI,LI,"app");var Dn=new Ic("ANGULARFIRE2_VERSION");function jc(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ba=(t,e)=>{let n=e?[e]:Uc(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Ki=class{constructor(){return Ba(BI)}},BI="app-check";function oo(){}var qc=class{zone;delegate;constructor(e,n=o1){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},Qf=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oo,{},oo,oo)),n.pipe(Mc({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},_r=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new qc(Zone.current)),this.insideAngular=n.run(()=>new qc(Zone.current,s1)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(le(Oe))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Gc(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function VI(t){return Gc().ngZone.runOutsideAngular(()=>t())}function fs(t){return Gc().ngZone.run(()=>t())}function Yf(t){return UI(Gc())(t)}function UI(t){return function(n){return n=n.lift(new Qf(t.ngZone)),n.pipe(ss(t.outsideAngular),hr(t.insideAngular))}}var zI=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),fs(()=>t.apply(void 0,i))},$n=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=fs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oo,{},oo,oo))),i[s]=zI(i[s],n));let r=VI(()=>t.apply(this,i));if(!e)if(r instanceof bn){let s=Gc();return r.pipe(ss(s.outsideAngular),hr(s.insideAngular))}else return fs(()=>r);return r instanceof bn?r.pipe(Yf):r instanceof Promise?fs(()=>new Promise((s,o)=>r.then(a=>fs(()=>s(a)),a=>fs(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:fs(()=>r)};var Qi=class{constructor(e){return e}},ps=class{constructor(){return Uc()}};function jI(t){return t&&t.length===1?t[0]:new Qi(La())}var Jf=new _e("angularfire2._apps"),GI={provide:Qi,useFactory:jI,deps:[[new Zt,Jf]]},HI={provide:ps,deps:[[new Zt,Jf]]};function WI(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Qi(i)}}var $I=(()=>{class t{constructor(n){It("angularfire",Dn.full,"core"),It("angularfire",Dn.full,"app"),It("angular",xc.full,n.toString())}static \u0275fac=function(i){return new(i||t)(le(fi))};static \u0275mod=ee({type:t});static \u0275inj=Z({providers:[GI,HI]})}return t})();function $1(t,...e){return{ngModule:$I,providers:[{provide:Jf,useFactory:WI(t),multi:!0,deps:[Oe,dn,_r,...e]}]}}var K1=$n(W1,!0);var KI=new _e("cdk-dir-doc",{providedIn:"root",factory:QI});function QI(){return U(Mn)}var YI=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function JI(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?YI.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Q1=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new He,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=JI(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(le(KI,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var Zf;try{Zf=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Zf=!1}var Kn=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Nc(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Zf)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(le(fi))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Va;function ZI(){if(Va==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Va=!0}))}finally{Va=Va||!1}return Va}function ep(t){return ZI()?t:!!t.capture}function Y1(t){return t.composedPath?t.composedPath()[0]:t.target}function J1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function np(t){return Array.isArray(t)?t:[t]}function ip(t){return t instanceof Ge?t.nativeElement:t}var X1=new Set,ms,ex=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):nx}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&tx(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(le(Kn),le(y1,8))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tx(t,e){if(!X1.has(t))try{ms||(ms=document.createElement("style"),e&&(ms.nonce=e),ms.setAttribute("type","text/css"),document.head.appendChild(ms)),ms.sheet&&(ms.sheet.insertRule(`@media ${t} {body{ }}`,0),X1.add(t))}catch(n){console.error(n)}}function nx(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var eC=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Dt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return Z1(np(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=Z1(np(i)).map(a=>this._registerQuery(a).observable),o=Da(s);return o=c1(o.pipe(qi(1)),o.pipe(Rf(1),f1(0))),o.pipe(zt(a=>{let l={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:u})=>{l.matches=l.matches||c,l.breakpoints[u]=c}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new bn(a=>{let l=c=>this._zone.run(()=>a.next(c));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(Ia(r),zt(({matches:a})=>({query:i,matches:a})),bt(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(le(ex),le(Oe))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Z1(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}function iC(t){return t.buttons===0||t.detail===0}function rC(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var gs=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(gs||{}),tC="cdk-high-contrast-black-on-white",nC="cdk-high-contrast-white-on-black",rp="cdk-high-contrast-active",sC=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=U(eC).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return gs.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return gs.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return gs.BLACK_ON_WHITE}return gs.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(rp,tC,nC),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===gs.BLACK_ON_WHITE?i.add(rp,tC):r===gs.WHITE_ON_BLACK&&i.add(rp,nC)}}};e.\u0275fac=function(r){return new(r||e)(le(Kn),le(Mn))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ox(){return!0}var ax=new _e("mat-sanity-checks",{providedIn:"root",factory:ox}),Hc=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return J1()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(le(sC),le(ax,8),le(Mn))},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({imports:[Xf,Xf]});let t=e;return t})();var Gt=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Gt||{}),sp=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Gt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},oC=ep({passive:!0,capture:!0}),op=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Y1(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,oC)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,oC)))}},aC={enterDuration:225,exitDuration:150},lx=800,lC=ep({passive:!0,capture:!0}),cC=["mousedown","touchstart"],uC=["mouseup","mouseleave","touchend","touchcancel"],Ua=class Ua{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ip(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Ie(Ie({},aC),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||cx(e,n,r),a=e-r.left,l=n-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${l-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let f=window.getComputedStyle(u),g=f.transitionProperty,_=f.transitionDuration,C=g==="none"||_==="0s"||_==="0s, 0s"||r.width===0&&r.height===0,v=new sp(this,u,i,C);u.style.transform="scale3d(1, 1, 1)",v.state=Gt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=v);let b=null;return!C&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let A=()=>this._finishRippleTransition(v),S=()=>this._destroyRipple(v);u.addEventListener("transitionend",A),u.addEventListener("transitioncancel",S),b={onTransitionEnd:A,onTransitionCancel:S}}),this._activeRipples.set(v,b),(C||!c)&&this._finishRippleTransition(v),v}fadeOutRipple(e){if(e.state===Gt.FADING_OUT||e.state===Gt.HIDDEN)return;let n=e.element,i=Ie(Ie({},aC),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Gt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=ip(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,cC.forEach(i=>{Ua._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{uC.forEach(n=>{this._triggerElement.addEventListener(n,this,lC)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Gt.FADING_IN?this._startFadeOutTransition(e):e.state===Gt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Gt.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Gt.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=iC(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+lx;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!rC(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Gt.VISIBLE||e.config.terminateOnPointerUp&&e.state===Gt.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(cC.forEach(n=>Ua._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&uC.forEach(n=>e.removeEventListener(n,this,lC)))}};Ua._eventManager=new op;var ap=Ua;function cx(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var lp=new _e("mat-ripple-global-options"),cp=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new ap(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Ie(Ie(Ie({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,Ie(Ie({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Ie(Ie({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)($(Ge),$(Oe),$(Kn),$(lp,8),$(eo,8))},e.\u0275dir=Be({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&dt("mat-ripple-unbounded",s.unbounded)},inputs:{color:[xe.None,"matRippleColor","color"],unbounded:[xe.None,"matRippleUnbounded","unbounded"],centered:[xe.None,"matRippleCentered","centered"],radius:[xe.None,"matRippleRadius","radius"],animation:[xe.None,"matRippleAnimation","animation"],disabled:[xe.None,"matRippleDisabled","disabled"],trigger:[xe.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),dC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({imports:[Hc,Hc]});let t=e;return t})();var CC=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)($(fr),$(Ge))},e.\u0275dir=Be({type:e});let t=e;return t})(),ja=(()=>{let e=class e extends CC{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Zs(e)))(s||e)}})(),e.\u0275dir=Be({type:e,features:[qt]});let t=e;return t})(),Pn=new _e(""),ux={provide:Pn,useExisting:Xt(()=>hp),multi:!0},hp=(()=>{let e=class e extends ja{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Zs(e)))(s||e)}})(),e.\u0275dir=Be({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,s){r&1&&q("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[ht([ux]),qt]});let t=e;return t})(),dx={provide:Pn,useExisting:Xt(()=>rn),multi:!0};function hx(){let t=jf()?jf().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var fx=new _e(""),rn=(()=>{let e=class e extends CC{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!hx())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)($(fr),$(Ge),$(fx,8))},e.\u0275dir=Be({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&q("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[ht([dx]),qt]});let t=e;return t})();function yr(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function bC(t){return t!=null&&typeof t.length=="number"}var eu=new _e(""),fp=new _e(""),px=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,pn=class{static min(e){return mx(e)}static max(e){return gx(e)}static required(e){return _x(e)}static requiredTrue(e){return yx(e)}static email(e){return vx(e)}static minLength(e){return Cx(e)}static maxLength(e){return bx(e)}static pattern(e){return wx(e)}static nullValidator(e){return wC(e)}static compose(e){return DC(e)}static composeAsync(e){return IC(e)}};function mx(t){return e=>{if(yr(e.value)||yr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function gx(t){return e=>{if(yr(e.value)||yr(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function _x(t){return yr(t.value)?{required:!0}:null}function yx(t){return t.value===!0?null:{required:!0}}function vx(t){return yr(t.value)||px.test(t.value)?null:{email:!0}}function Cx(t){return e=>yr(e.value)||!bC(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function bx(t){return e=>bC(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function wx(t){if(!t)return wC;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(yr(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function wC(t){return null}function SC(t){return t!=null}function TC(t){return O1(t)?os(t):t}function EC(t){let e={};return t.forEach(n=>{e=n!=null?Ie(Ie({},e),n):e}),Object.keys(e).length===0?null:e}function MC(t,e){return e.map(n=>n(t))}function Sx(t){return!t.validate}function OC(t){return t.map(e=>Sx(e)?e:n=>e.validate(n))}function DC(t){if(!t)return null;let e=t.filter(SC);return e.length==0?null:function(n){return EC(MC(n,e))}}function PC(t){return t!=null?DC(OC(t)):null}function IC(t){if(!t)return null;let e=t.filter(SC);return e.length==0?null:function(n){let i=MC(n,e).map(TC);return u1(i).pipe(zt(EC))}}function xC(t){return t!=null?IC(OC(t)):null}function hC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function AC(t){return t._rawValidators}function kC(t){return t._rawAsyncValidators}function up(t){return t?Array.isArray(t)?t:[t]:[]}function $c(t,e){return Array.isArray(t)?t.includes(e):t===e}function fC(t,e){let n=up(e);return up(t).forEach(r=>{$c(n,r)||n.push(r)}),n}function pC(t,e){return up(e).filter(n=>!$c(t,n))}var Kc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},_s=class extends Kc{get formDirective(){return null}get path(){return null}},vr=class extends Kc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Qc=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},Tx={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Zj=cn(Ie({},Tx),{"[class.ng-submitted]":"isSubmitted"}),In=(()=>{let e=class e extends Qc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)($(vr,2))},e.\u0275dir=Be({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&dt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[qt]});let t=e;return t})(),RC=(()=>{let e=class e extends Qc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)($(_s,10))},e.\u0275dir=Be({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&dt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[qt]});let t=e;return t})();var za="VALID",Wc="INVALID",ao="PENDING",qa="DISABLED";function NC(t){return(tu(t)?t.validators:t)||null}function Ex(t){return Array.isArray(t)?PC(t):t||null}function FC(t,e){return(tu(e)?e.asyncValidators:t)||null}function Mx(t){return Array.isArray(t)?xC(t):t||null}function tu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Ox(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new ls(1e3,"");if(!i[n])throw new ls(1001,"")}function Dx(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new ls(1002,"")})}var Yc=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===za}get invalid(){return this.status===Wc}get pending(){return this.status==ao}get disabled(){return this.status===qa}get enabled(){return this.status!==qa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pC(e,this._rawAsyncValidators))}hasValidator(e){return $c(this._rawValidators,e)}hasAsyncValidator(e){return $c(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ao,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=qa,this.errors=null,this._forEachChild(i=>{i.disable(cn(Ie({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(cn(Ie({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=za,this._forEachChild(i=>{i.enable(cn(Ie({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(cn(Ie({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===za||this.status===ao)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qa:za}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ao,this._hasOwnPendingAsyncValidator=!0;let n=TC(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?qa:this.errors?Wc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ao)?ao:this._anyControlsHaveStatus(Wc)?Wc:za}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){tu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ex(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Mx(this._rawAsyncValidators)}},Jc=class extends Yc{constructor(e,n,i){super(NC(n),FC(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Dx(this,!0,e),Object.keys(e).forEach(i=>{Ox(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ga=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>Ha}),Ha="always";function LC(t,e){return[...e.path,t]}function dp(t,e,n=Ha){pp(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Ix(t,e),Ax(t,e),xx(t,e),Px(t,e)}function mC(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Zc(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Xc(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Px(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function pp(t,e){let n=AC(t);e.validator!==null?t.setValidators(hC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=kC(t);e.asyncValidator!==null?t.setAsyncValidators(hC(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Xc(e._rawValidators,r),Xc(e._rawAsyncValidators,r)}function Zc(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=AC(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=kC(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Xc(e._rawValidators,i),Xc(e._rawAsyncValidators,i),n}function Ix(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&BC(t,e)})}function xx(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&BC(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function BC(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Ax(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function kx(t,e){t==null,pp(t,e)}function Rx(t,e){return Zc(t,e)}function VC(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Nx(t){return Object.getPrototypeOf(t.constructor)===ja}function Fx(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function UC(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===rn?n=s:Nx(s)?i=s:r=s}),r||i||n||null}function Lx(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function gC(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function _C(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Ht=class extends Yc{constructor(e=null,n,i){super(NC(n),FC(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(_C(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_C(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Bx=t=>t instanceof Ht;var Vx={provide:vr,useExisting:Xt(()=>Qn)},yC=Promise.resolve(),Qn=(()=>{let e=class e extends vr{constructor(i,r,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Ht,this._registered=!1,this.name="",this.update=new He,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=UC(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),VC(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){yC.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&gi(r);yC.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?LC(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)($(_s,9),$(eu,10),$(fp,10),$(Pn,10),$(En,8),$(Ga,8))},e.\u0275dir=Be({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[xe.None,"disabled","isDisabled"],model:[xe.None,"ngModel","model"],options:[xe.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ht([Vx]),qt,cs]});let t=e;return t})(),zC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Be({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var Ux={provide:Pn,useExisting:Xt(()=>mp),multi:!0};var zx=(()=>{let e=class e{constructor(){this._accessors=[]}add(i,r){this._accessors.push([i,r])}remove(i){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===i){this._accessors.splice(r,1);return}}select(i){this._accessors.forEach(r=>{this._isSameGroup(r,i)&&r[1]!==i&&r[1].fireUncheck(i.value)})}_isSameGroup(i,r){return i[0].control?i[0]._parent===r._control._parent&&i[1].name===r.name:!1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mp=(()=>{let e=class e extends ja{constructor(i,r,s,o){super(i,r),this._registry=s,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=U(Ga,{optional:!0})??Ha}ngOnInit(){this._control=this._injector.get(vr),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(i){this._state=i===this.value,this.setProperty("checked",this._state)}registerOnChange(i){this._fn=i,this.onChange=()=>{i(this.value),this._registry.select(this)}}setDisabledState(i){(this.setDisabledStateFired||i||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",i),this.setDisabledStateFired=!0}fireUncheck(i){this.writeValue(i)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(r){return new(r||e)($(fr),$(Ge),$(zx),$(dn))},e.\u0275dir=Be({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,s){r&1&&q("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ht([Ux]),qt]});let t=e;return t})();var qC=new _e("");var qx={provide:_s,useExisting:Xt(()=>gp)},gp=(()=>{let e=class e extends _s{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new He,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return dp(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){mC(i.control||null,i,!1),Lx(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,Fx(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(mC(r||null,i),Bx(s)&&(dp(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);kx(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&Rx(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pp(this.form,this),this._oldForm&&Zc(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)($(eu,10),$(fp,10),$(Ga,8))},e.\u0275dir=Be({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&q("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[xe.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ht([qx]),qt,cs]});let t=e;return t})();var jx={provide:vr,useExisting:Xt(()=>_p)},_p=(()=>{let e=class e extends vr{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new He,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=UC(this,o)}ngOnChanges(i){this._added||this._setUpControl(),VC(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return LC(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)($(_s,13),$(eu,10),$(fp,10),$(Pn,10),$(qC,8))},e.\u0275dir=Be({type:e,selectors:[["","formControlName",""]],inputs:{name:[xe.None,"formControlName","name"],isDisabled:[xe.None,"disabled","isDisabled"],model:[xe.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[ht([jx]),qt,cs]});let t=e;return t})(),Gx={provide:Pn,useExisting:Xt(()=>nu),multi:!0};function jC(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Hx(t){return t.split(":")[0]}var nu=(()=>{let e=class e extends ja{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=jC(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=Hx(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Zs(e)))(s||e)}})(),e.\u0275dir=Be({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&q("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[ht([Gx]),qt]});let t=e;return t})(),GC=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(jC(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)($(Ge),$(fr),$(nu,9))},e.\u0275dir=Be({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Wx={provide:Pn,useExisting:Xt(()=>HC),multi:!0};function vC(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function $x(t){return t.split(":")[0]}var HC=(()=>{let e=class e extends ja{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let c=a[l],u=this._getOptionValue(c.value);s.push(u)}}else{let a=r.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let u=this._getOptionValue(c.value);s.push(u)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=$x(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Zs(e)))(s||e)}})(),e.\u0275dir=Be({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&q("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[ht([Wx]),qt]});let t=e;return t})(),WC=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(vC(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(vC(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)($(Ge),$(fr),$(HC,9))},e.\u0275dir=Be({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var $C=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var KC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Ga,useValue:i.callSetDisabledState??Ha}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({imports:[$C]});let t=e;return t})(),QC=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:qC,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Ga,useValue:i.callSetDisabledState??Ha}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({imports:[$C]});let t=e;return t})();var Kx=["knob"],Qx=["valueIndicatorContainer"];function Yx(t,e){if(t&1&&(d(0,"div",2,1)(2,"div",5)(3,"span",6),m(4),h()()()),t&2){let n=N();y(4),Ve(n.valueIndicatorText)}}var Jx=["trackActive"],Xx=["*"];function Zx(t,e){if(t&1&&I(0,"div"),t&2){let n=e.$implicit,i=e.$index,r=N(3);us(n===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),ji("transform",r._calcTickMarkTransform(i))}}function eA(t,e){if(t&1&&no(0,Zx,1,4,"div",8,to),t&2){let n=N(2);io(n._tickMarks)}}function tA(t,e){if(t&1&&(d(0,"div",6,1),ie(2,eA,2,0),h()),t&2){let n=N();y(2),pr(2,n._cachedWidth?2:-1)}}function nA(t,e){if(t&1&&I(0,"mat-slider-visual-thumb",7),t&2){let n=N();L("discrete",n.discrete)("thumbPosition",1)("valueIndicatorText",n.startValueIndicatorText)}}var te=function(t){return t[t.START=1]="START",t[t.END=2]="END",t}(te||{}),co=function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t}(co||{}),iu=new _e("_MatSlider"),YC=new _e("_MatSliderThumb"),JC=new _e("_MatSliderRangeThumb"),XC=new _e("_MatSliderVisualThumb");var iA=(()=>{let e=class e{constructor(i,r,s,o){this._cdr=i,this._ngZone=r,this._slider=o,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._platform=U(Kn),this._onPointerMove=a=>{if(this._sliderInput._isFocused)return;let l=this._hostElement.getBoundingClientRect(),c=this._slider._isCursorOnSliderThumb(a,l);this._isHovered=c,c?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=a=>{a.button===0&&(this._isActive=!0,this._showActiveRipple())},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()},this._hostElement=s.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;let i=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{i.addEventListener("pointermove",this._onPointerMove),i.addEventListener("pointerdown",this._onDragStart),i.addEventListener("pointerup",this._onDragEnd),i.addEventListener("pointerleave",this._onMouseLeave),i.addEventListener("focus",this._onFocus),i.addEventListener("blur",this._onBlur)})}ngOnDestroy(){let i=this._sliderInputEl;i&&(i.removeEventListener("pointermove",this._onPointerMove),i.removeEventListener("pointerdown",this._onDragStart),i.removeEventListener("pointerup",this._onDragEnd),i.removeEventListener("pointerleave",this._onMouseLeave),i.removeEventListener("focus",this._onFocus),i.removeEventListener("blur",this._onBlur))}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(i){return i?.state===Gt.FADING_IN||i?.state===Gt.VISIBLE}_showRipple(i,r){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===te.START?te.END:te.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!r)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:i,centered:!0,persistent:!0})}_hideRipple(i){if(i?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let r=this._getSibling();r._isShowingAnyRipple()||(this._hideValueIndicator(),r._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===te.START?te.END:te.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}};e.\u0275fac=function(r){return new(r||e)($(En),$(Oe),$(Ge),$(iu))},e.\u0275cmp=de({type:e,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(r,s){if(r&1&&(Gi(cp,5),Gi(Kx,5),Gi(Qx,5)),r&2){let o;hn(o=fn())&&(s._ripple=o.first),hn(o=fn())&&(s._knob=o.first),hn(o=fn())&&(s._valueIndicatorContainer=o.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},standalone:!0,features:[ht([{provide:XC,useExisting:e}]),Hi],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(r,s){r&1&&(ie(0,Yx,5,1,"div",2),I(1,"div",3,0)(3,"div",4)),r&2&&(pr(0,s.discrete?0:-1),y(3),L("matRippleDisabled",!0))},dependencies:[cp],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0});let t=e;return t})(),ZC=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){this._disabled=i;let r=this._getInput(te.END),s=this._getInput(te.START);r&&(r.disabled=this._disabled),s&&(s.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(i){this._discrete=i,this._updateValueIndicatorUIs()}get min(){return this._min}set min(i){let r=isNaN(i)?this._min:i;this._min!==r&&this._updateMin(r)}_updateMin(i){let r=this._min;this._min=i,this._isRange?this._updateMinRange({old:r,new:i}):this._updateMinNonRange(i),this._onMinMaxOrStepChange()}_updateMinRange(i){let r=this._getInput(te.END),s=this._getInput(te.START),o=r.value,a=s.value;s.min=i.new,r.min=Math.max(i.new,s.value),s.max=Math.min(r.max,r.value),s._updateWidthInactive(),r._updateWidthInactive(),i.new<i.old?this._onTranslateXChangeBySideEffect(r,s):this._onTranslateXChangeBySideEffect(s,r),o!==r.value&&this._onValueChange(r),a!==s.value&&this._onValueChange(s)}_updateMinNonRange(i){let r=this._getInput(te.END);if(r){let s=r.value;r.min=i,r._updateThumbUIByValue(),this._updateTrackUI(r),s!==r.value&&this._onValueChange(r)}}get max(){return this._max}set max(i){let r=isNaN(i)?this._max:i;this._max!==r&&this._updateMax(r)}_updateMax(i){let r=this._max;this._max=i,this._isRange?this._updateMaxRange({old:r,new:i}):this._updateMaxNonRange(i),this._onMinMaxOrStepChange()}_updateMaxRange(i){let r=this._getInput(te.END),s=this._getInput(te.START),o=r.value,a=s.value;r.max=i.new,s.max=Math.min(i.new,r.value),r.min=s.value,r._updateWidthInactive(),s._updateWidthInactive(),i.new>i.old?this._onTranslateXChangeBySideEffect(s,r):this._onTranslateXChangeBySideEffect(r,s),o!==r.value&&this._onValueChange(r),a!==s.value&&this._onValueChange(s)}_updateMaxNonRange(i){let r=this._getInput(te.END);if(r){let s=r.value;r.max=i,r._updateThumbUIByValue(),this._updateTrackUI(r),s!==r.value&&this._onValueChange(r)}}get step(){return this._step}set step(i){let r=isNaN(i)?this._step:i;this._step!==r&&this._updateStep(r)}_updateStep(i){this._step=i,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let i=this._getInput(te.END),r=this._getInput(te.START),s=i.value,o=r.value,a=r.value;i.min=this._min,r.max=this._max,i.step=this._step,r.step=this._step,this._platform.SAFARI&&(i.value=i.value,r.value=r.value),i.min=Math.max(this._min,r.value),r.max=Math.min(this._max,i.value),r._updateWidthInactive(),i._updateWidthInactive(),i.value<a?this._onTranslateXChangeBySideEffect(r,i):this._onTranslateXChangeBySideEffect(i,r),s!==i.value&&this._onValueChange(i),o!==r.value&&this._onValueChange(r)}_updateStepNonRange(){let i=this._getInput(te.END);if(i){let r=i.value;i.step=this._step,this._platform.SAFARI&&(i.value=i.value),i._updateThumbUIByValue(),r!==i.value&&this._onValueChange(i)}}constructor(i,r,s,o,a,l){this._ngZone=i,this._cdr=r,this._elementRef=s,this._dir=o,this._globalRippleOptions=a,this._disabled=!1,this._discrete=!1,this.showTickMarks=!1,this._min=0,this.disableRipple=!1,this._max=100,this._step=1,this.displayWith=c=>`${c}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._platform=U(Kn),this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations=l==="NoopAnimations",this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl"}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let i=this._getInput(te.END),r=this._getInput(te.START);this._isRange=!!i&&!!r,this._cdr.detectChanges();let s=this._getThumb(te.END);this._rippleRadius=s._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(i,r):this._initUINonRange(i),this._updateTrackUI(i),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(i){i.initProps(),i.initUI(),this._updateValueIndicatorUI(i),this._hasViewInitialized=!0,i._updateThumbUIByValue()}_initUIRange(i,r){i.initProps(),i.initUI(),r.initProps(),r.initUI(),i._updateMinMax(),r._updateMinMax(),i._updateStaticStyles(),r._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,i._updateThumbUIByValue(),r._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let i=this._getInput(te.END),r=this._getInput(te.START);i._setIsLeftThumb(),r._setIsLeftThumb(),i.translateX=i._calcTranslateXByValue(),r.translateX=r._calcTranslateXByValue(),i._updateStaticStyles(),r._updateStaticStyles(),i._updateWidthInactive(),r._updateWidthInactive(),i._updateThumbUIByValue(),r._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(te.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(te.START)._isActive||this._getThumb(te.END)._isActive}_getValue(i=te.END){let r=this._getInput(i);return r?r.value:this.min}_skipUpdate(){return!!(this._getInput(te.START)?._skipUIUpdate||this._getInput(te.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(i){let r=this._trackActive.nativeElement.style;r.left=i.left,r.right=i.right,r.transformOrigin=i.transformOrigin,r.transform=i.transform}_calcTickMarkTransform(i){return`translateX(${i*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(i){this._hasViewInitialized&&(this._updateThumbUI(i),this._updateTrackUI(i),this._updateOverlappingThumbUI(i))}_onTranslateXChangeBySideEffect(i,r){this._hasViewInitialized&&(i._updateThumbUIByValue(),r._updateThumbUIByValue())}_onValueChange(i){this._hasViewInitialized&&(this._updateValueIndicatorUI(i),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let i=this._getInput(te.END),r=this._getInput(te.START);i._updateThumbUIByValue(),r._updateThumbUIByValue(),i._updateStaticStyles(),r._updateStaticStyles(),i._updateMinMax(),r._updateMinMax(),i._updateWidthInactive(),r._updateWidthInactive()}else{let i=this._getInput(te.END);i&&i._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){let i=this._getInput(te.START),r=this._getInput(te.END);return!i||!r?!1:r.translateX-i.translateX<20}_updateOverlappingThumbClassNames(i){let r=i.getSibling(),s=this._getThumb(i.thumbPosition);this._getThumb(r.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),s._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(i){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(i))}_updateThumbUI(i){if(this._skipUpdate())return;let r=this._getThumb(i.thumbPosition===te.END?te.END:te.START);r._hostElement.style.transform=`translateX(${i.translateX}px)`}_updateValueIndicatorUI(i){if(this._skipUpdate())return;let r=this.displayWith(i.value);if(this._hasViewInitialized?i._valuetext=r:i._hostElement.setAttribute("aria-valuetext",r),this.discrete){i.thumbPosition===te.START?this.startValueIndicatorText=r:this.endValueIndicatorText=r;let s=this._getThumb(i.thumbPosition);r.length<3?s._hostElement.classList.add("mdc-slider__thumb--short-value"):s._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let i=this._getInput(te.END),r=this._getInput(te.START);i&&this._updateValueIndicatorUI(i),r&&this._updateValueIndicatorUI(r)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let i=this._step&&this._step>0?this._step:1,s=(Math.floor(this.max/i)*i-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*s-6}_updateTrackUI(i){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(i):this._updateTrackUINonRange(i))}_updateTrackUIRange(i){let r=i.getSibling();if(!r||!this._cachedWidth)return;let s=Math.abs(r.translateX-i.translateX)/this._cachedWidth;i._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-r.translateX}px`,transformOrigin:"right",transform:`scaleX(${s})`}):this._setTrackActiveStyles({left:`${r.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${s})`})}_updateTrackUINonRange(i){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-i.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${i.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let i=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(i):this._updateTickMarkUINonRange(i),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(i){let r=this._getValue(),s=Math.max(Math.floor((r-this.min)/i),0),o=Math.max(Math.floor((this.max-r)/i),0);this._isRtl?s++:o++,this._tickMarks=Array(s).fill(co.ACTIVE).concat(Array(o).fill(co.INACTIVE))}_updateTickMarkUIRange(i){let r=this._getValue(),s=this._getValue(te.START),o=Math.max(Math.floor((s-this.min)/i),0),a=Math.max(Math.floor((r-s)/i)+1,0),l=Math.max(Math.floor((this.max-r)/i),0);this._tickMarks=Array(o).fill(co.INACTIVE).concat(Array(a).fill(co.ACTIVE),Array(l).fill(co.INACTIVE))}_getInput(i){if(i===te.END&&this._input)return this._input;if(this._inputs?.length)return i===te.START?this._inputs.first:this._inputs.last}_getThumb(i){return i===te.END?this._thumbs?.last:this._thumbs?.first}_setTransition(i){this._hasAnimation=!this._platform.IOS&&i&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(i,r){let s=r.width/2,o=r.x+s,a=r.y+s,l=i.clientX-o,c=i.clientY-a;return Math.pow(l,2)+Math.pow(c,2)<Math.pow(s,2)}};e.\u0275fac=function(r){return new(r||e)($(Oe),$(En),$(Ge),$(Q1,8),$(lp,8),$(eo,8))},e.\u0275cmp=de({type:e,selectors:[["mat-slider"]],contentQueries:function(r,s,o){if(r&1&&(ro(o,YC,5),ro(o,JC,4)),r&2){let a;hn(a=fn())&&(s._input=a.first),hn(a=fn())&&(s._inputs=a)}},viewQuery:function(r,s){if(r&1&&(Gi(Jx,5),Gi(XC,5)),r&2){let o;hn(o=fn())&&(s._trackActive=o.first),hn(o=fn())&&(s._thumbs=o)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(r,s){r&2&&(us("mat-"+(s.color||"primary")),dt("mdc-slider--range",s._isRange)("mdc-slider--disabled",s.disabled)("mdc-slider--discrete",s.discrete)("mdc-slider--tick-marks",s.showTickMarks)("_mat-animation-noopable",s._noopAnimations))},inputs:{disabled:[xe.HasDecoratorInputTransform,"disabled","disabled",gi],discrete:[xe.HasDecoratorInputTransform,"discrete","discrete",gi],showTickMarks:[xe.HasDecoratorInputTransform,"showTickMarks","showTickMarks",gi],min:[xe.HasDecoratorInputTransform,"min","min",Wi],color:"color",disableRipple:[xe.HasDecoratorInputTransform,"disableRipple","disableRipple",gi],max:[xe.HasDecoratorInputTransform,"max","max",Wi],step:[xe.HasDecoratorInputTransform,"step","step",Wi],displayWith:"displayWith"},exportAs:["matSlider"],standalone:!0,features:[ht([{provide:iu,useExisting:e}]),xa,Hi],ngContentSelectors:Xx,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(r,s){r&1&&(Aa(),ka(0),d(1,"div",2),I(2,"div",3),d(3,"div",4),I(4,"div",5,0),h(),ie(6,tA,3,1,"div",6),h(),ie(7,nA,1,3,"mat-slider-visual-thumb",7),I(8,"mat-slider-visual-thumb",7)),r&2&&(y(6),pr(6,s.showTickMarks?6:-1),y(),pr(7,s._isRange?7:-1),y(),L("discrete",s.discrete)("thumbPosition",2)("valueIndicatorText",s.endValueIndicatorText))},dependencies:[iA],styles:['.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{overflow:hidden}.mdc-slider .mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:50%;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:translateX(-50%);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:translateX(-50%);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__thumb{display:flex;left:-24px;outline:none;position:absolute;user-select:none;height:48px;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-sizing:border-box;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;pointer-events:none;position:absolute;top:2px;width:44px}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;margin-left:8px;margin-right:8px;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider .mdc-slider__thumb-knob{background-color:var(--mdc-slider-handle-color);border-color:var(--mdc-slider-handle-color)}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color);border-color:var(--mdc-slider-disabled-handle-color)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb::before,.mat-mdc-slider .mdc-slider__thumb::after{background-color:var(--mdc-slider-handle-color)}.mat-mdc-slider .mdc-slider__thumb:hover::before,.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:var(--mdc-ripple-hover-opacity)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:var(--mdc-ripple-focus-opacity)}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:var(--mdc-ripple-press-opacity)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity)}.mat-mdc-slider .mdc-slider__track--active_fill{border-color:var(--mdc-slider-active-track-color)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color)}.mat-mdc-slider .mdc-slider__track--inactive{background-color:var(--mdc-slider-inactive-track-color);opacity:.24}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color);opacity:.24}.mat-mdc-slider .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color);opacity:var(--mdc-slider-with-tick-marks-active-container-opacity)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color);opacity:var(--mdc-slider-with-tick-marks-active-container-opacity)}.mat-mdc-slider .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-inactive-container-color);opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-disabled-container-color);opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity)}.mat-mdc-slider .mdc-slider__value-indicator{background-color:var(--mdc-slider-label-container-color);opacity:1}.mat-mdc-slider .mdc-slider__value-indicator::before{border-top-color:var(--mdc-slider-label-container-color)}.mat-mdc-slider .mdc-slider__value-indicator{color:var(--mdc-slider-label-label-text-color)}.mat-mdc-slider .mdc-slider__track{height:var(--mdc-slider-inactive-track-height)}.mat-mdc-slider .mdc-slider__track--active{height:var(--mdc-slider-active-track-height);top:calc((var(--mdc-slider-inactive-track-height) - var(--mdc-slider-active-track-height)) / 2)}.mat-mdc-slider .mdc-slider__track--active_fill{border-top-width:var(--mdc-slider-active-track-height)}.mat-mdc-slider .mdc-slider__track--inactive{height:var(--mdc-slider-inactive-track-height)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{height:var(--mdc-slider-with-tick-marks-container-size);width:var(--mdc-slider-with-tick-marks-container-size)}.mat-mdc-slider.mdc-slider--disabled{opacity:0.38}.mat-mdc-slider .mdc-slider__value-indicator-text{letter-spacing:var(--mdc-slider-label-label-text-tracking);font-size:var(--mdc-slider-label-label-text-size);font-family:var(--mdc-slider-label-label-text-font);font-weight:var(--mdc-slider-label-label-text-weight);line-height:var(--mdc-slider-label-label-text-line-height)}.mat-mdc-slider .mdc-slider__track--active{border-radius:var(--mdc-slider-active-track-shape)}.mat-mdc-slider .mdc-slider__track--inactive{border-radius:var(--mdc-slider-inactive-track-shape)}.mat-mdc-slider .mdc-slider__thumb-knob{border-radius:var(--mdc-slider-handle-shape);width:var(--mdc-slider-handle-width);height:var(--mdc-slider-handle-height);border-style:solid;border-width:calc(var(--mdc-slider-handle-height) / 2) calc(var(--mdc-slider-handle-width) / 2)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{border-radius:var(--mdc-slider-with-tick-marks-container-shape)}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color);border-color:var(--mdc-slider-hover-handle-color)}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color);border-color:var(--mdc-slider-focus-handle-color)}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:var(--mdc-slider-with-overlap-handle-outline-color);border-width:var(--mdc-slider-with-overlap-handle-outline-width)}.mat-mdc-slider .mdc-slider__thumb-knob{box-shadow:var(--mdc-slider-handle-elevation)}.mat-mdc-slider .mdc-slider__input{box-sizing:content-box;pointer-events:auto}.mat-mdc-slider .mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mat-mdc-slider .mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mdc-slider__track,.mat-mdc-slider .mdc-slider__thumb{pointer-events:none}.mat-mdc-slider .mdc-slider__value-indicator-container{transform:var(--mat-slider-value-indicator-container-transform)}.mat-mdc-slider .mdc-slider__value-indicator{width:var(--mat-slider-value-indicator-width);height:var(--mat-slider-value-indicator-height);padding:var(--mat-slider-value-indicator-padding);opacity:var(--mat-slider-value-indicator-opacity);border-radius:var(--mat-slider-value-indicator-border-radius)}.mat-mdc-slider .mdc-slider__value-indicator::before{display:var(--mat-slider-value-indicator-caret-display)}.mat-mdc-slider .mdc-slider__value-indicator-text{width:var(--mat-slider-value-indicator-width);transform:var(--mat-slider-value-indicator-text-transform)}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slider .mdc-slider__value-indicator{word-break:normal}.mat-mdc-slider .mdc-slider__value-indicator-text{text-align:center}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0});let t=e;return t})();var rA={provide:Pn,useExisting:Xt(()=>eb),multi:!0},sA={provide:Pn,useExisting:Xt(()=>yp),multi:!0},eb=(()=>{let e=class e{get value(){return Wi(this._hostElement.value,0)}set value(i){i=isNaN(i)?0:i;let r=i+"";if(!this._hasSetInitialValue){this._initialValue=r;return}this._isActive||this._setValue(r)}_setValue(i){this._hostElement.value=i,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(i){this._translateX=i}get min(){return Wi(this._hostElement.min,0)}set min(i){this._hostElement.min=i+"",this._cdr.detectChanges()}get max(){return Wi(this._hostElement.max,0)}set max(i){this._hostElement.max=i+"",this._cdr.detectChanges()}get step(){return Wi(this._hostElement.step,0)}set step(i){this._hostElement.step=i+"",this._cdr.detectChanges()}get disabled(){return gi(this._hostElement.disabled)}set disabled(i){this._hostElement.disabled=i,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(i){this._isFocused=i}constructor(i,r,s,o){this._ngZone=i,this._elementRef=r,this._cdr=s,this._slider=o,this.valueChange=new He,this.dragStart=new He,this.dragEnd=new He,this.thumbPosition=te.END,this._knobRadius=8,this._tickMarkOffset=3,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new Dt,this._skipUIUpdate=!1,this._onTouchedFn=()=>{},this._isControlInitialized=!1,this._platform=U(Kn),this._hostElement=r.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(i){if(!(this.disabled||i.button!==0)){if(this._platform.IOS){let r=this._slider._isCursorOnSliderThumb(i,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=r,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(i,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(i),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(i){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(i)},0)}_fixValue(i){let r=i.clientX-this._slider._cachedLeft,s=this._slider._cachedWidth,o=this._slider.step===0?1:this._slider.step,a=Math.floor((this._slider.max-this._slider.min)/o),l=this._slider._isRtl?1-r/s:r/s,u=Math.round(l*a)/a*(this._slider.max-this._slider.min)+this._slider.min,f=Math.round(u/o)*o,g=this.value;if(f===g){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(i,{withAnimation:this._slider._hasAnimation});return}this.value=f,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(i,{withAnimation:this._slider._hasAnimation})}_onPointerMove(i){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(i)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(i){let r=this._tickMarkOffset,s=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(i,s),r)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(i){return i.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(i){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(i)}_updateThumbUIByPointerEvent(i,r){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(i)),this._updateThumbUI(r)}_updateThumbUI(i){this._slider._setTransition(!!i?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(i){(this._isControlInitialized||i!==null)&&(this.value=i)}registerOnChange(i){this._onChangeFn=i,this._isControlInitialized=!0}registerOnTouched(i){this._onTouchedFn=i}setDisabledState(i){this.disabled=i}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}};e.\u0275fac=function(r){return new(r||e)($(Oe),$(Ge),$(En),$(iu))},e.\u0275dir=Be({type:e,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(r,s){r&1&&q("change",function(){return s._onChange()})("input",function(){return s._onInput()})("blur",function(){return s._onBlur()})("focus",function(){return s._onFocus()}),r&2&&Sn("aria-valuetext",s._valuetext)},inputs:{value:[xe.HasDecoratorInputTransform,"value","value",Wi]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],standalone:!0,features:[ht([rA,{provide:YC,useExisting:e}]),xa]});let t=e;return t})(),yp=(()=>{let e=class e extends eb{getSibling(){return this._sibling||(this._sibling=this._slider._getInput(this._isEndThumb?te.START:te.END)),this._sibling}getMinPos(){let i=this.getSibling();return!this._isLeftThumb&&i?i.translateX:this._tickMarkOffset}getMaxPos(){let i=this.getSibling();return this._isLeftThumb&&i?i.translateX:this._slider._cachedWidth-this._tickMarkOffset}_setIsLeftThumb(){this._isLeftThumb=this._isEndThumb&&this._slider._isRtl||!this._isEndThumb&&!this._slider._isRtl}constructor(i,r,s,o){super(i,s,o,r),this._cdr=o,this._isEndThumb=this._hostElement.hasAttribute("matSliderEndThumb"),this._setIsLeftThumb(),this.thumbPosition=this._isEndThumb?te.END:te.START}_getDefaultValue(){return this._isEndThumb&&this._slider._isRange?this.max:this.min}_onInput(){super._onInput(),this._updateSibling(),this._isActive||this._updateWidthInactive()}_onNgControlValueChange(){super._onNgControlValueChange(),this.getSibling()?._updateMinMax()}_onPointerDown(i){this.disabled||i.button!==0||(this._sibling&&(this._sibling._updateWidthActive(),this._sibling._hostElement.classList.add("mat-mdc-slider-input-no-pointer-events")),super._onPointerDown(i))}_onPointerUp(){super._onPointerUp(),this._sibling&&setTimeout(()=>{this._sibling._updateWidthInactive(),this._sibling._hostElement.classList.remove("mat-mdc-slider-input-no-pointer-events")})}_onPointerMove(i){super._onPointerMove(i),!this._slider.step&&this._isActive&&this._updateSibling()}_fixValue(i){super._fixValue(i),this._sibling?._updateMinMax()}_clamp(i){return Math.max(Math.min(i,this.getMaxPos()),this.getMinPos())}_updateMinMax(){let i=this.getSibling();i&&(this._isEndThumb?(this.min=Math.max(this._slider.min,i.value),this.max=this._slider.max):(this.min=this._slider.min,this.max=Math.min(this._slider.max,i.value)))}_updateWidthActive(){let i=this._slider._rippleRadius*2-this._slider._inputPadding*2,r=this._slider._cachedWidth+this._slider._inputPadding-i-this._tickMarkOffset*2,s=this._slider.min<this._slider.max?(this.max-this.min)/(this._slider.max-this._slider.min):1,o=r*s+i;this._hostElement.style.width=`${o}px`,this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`}_updateWidthInactive(){let i=this.getSibling();if(!i)return;let r=this._slider._cachedWidth-this._tickMarkOffset*2,s=this._isEndThumb?this.value-(this.value-i.value)/2:this.value+(i.value-this.value)/2,o=this._isEndThumb?(this.max-s)/(this._slider.max-this._slider.min):(s-this.min)/(this._slider.max-this._slider.min),a=this._slider.min<this._slider.max?o:1,l=this._slider._rippleRadius;a===1?l=48:a===0&&(l=0);let c=r*a+l;this._hostElement.style.width=`${c}px`,this._hostElement.style.padding="0px",this._isLeftThumb?(this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`,this._hostElement.style.right="auto"):(this._hostElement.style.left="auto",this._hostElement.style.right=`-${this._slider._rippleRadius-this._tickMarkOffset}px`)}_updateStaticStyles(){this._hostElement.classList.toggle("mat-slider__right-input",!this._isLeftThumb)}_updateSibling(){let i=this.getSibling();i&&(i._updateMinMax(),this._isActive?i._updateWidthActive():i._updateWidthInactive())}writeValue(i){(this._isControlInitialized||i!==null)&&(this.value=i,this._updateWidthInactive(),this._updateSibling())}_setValue(i){super._setValue(i),this._updateWidthInactive(),this._updateSibling()}};e.\u0275fac=function(r){return new(r||e)($(Oe),$(iu),$(Ge),$(En))},e.\u0275dir=Be({type:e,selectors:[["input","matSliderStartThumb",""],["input","matSliderEndThumb",""]],exportAs:["matSliderRangeThumb"],standalone:!0,features:[ht([sA,{provide:JC,useExisting:e}]),qt]});let t=e;return t})(),tb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({imports:[Hc,dC]});let t=e;return t})();var XG=Pf(NI(),1);var nb="auth",Wa=class{constructor(e){return e}},$a=class{constructor(){return Ba(nb)}};var vp=new _e("angularfire2.auth-instances");function ok(t,e){let n=jc(nb,t,e);return n&&new Wa(n)}function ak(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Wa(i)}}var lk={provide:$a,deps:[[new Zt,vp]]},ck={provide:Wa,useFactory:ok,deps:[[new Zt,vp],Qi]},uk=(()=>{class t{constructor(){It("angularfire",Dn.full,"auth")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ee({type:t});static \u0275inj=Z({providers:[ck,lk]})}return t})();function ib(t,...e){return{ngModule:uk,providers:[{provide:vp,useFactory:ak(t),multi:!0,deps:[Oe,dn,_r,ps,[new Zt,Ki],...e]}]}}var rb=$n(Kf,!0);import{inspect as bV,TextEncoder as wV,TextDecoder as U$}from"util";import{randomBytes as SV}from"crypto";var dk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jn={},B,zp=zp||{},re=dk||self;function _u(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function al(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function hk(t){return Object.prototype.hasOwnProperty.call(t,Cp)&&t[Cp]||(t[Cp]=++fk)}var Cp="closure_uid_"+(1e9*Math.random()>>>0),fk=0;function pk(t,e,n){return t.call.apply(t.bind,arguments)}function mk(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function xt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xt=pk:xt=mk,xt.apply(null,arguments)}function ru(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function pt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Cr(){this.s=this.s,this.o=this.o}var gk=0;Cr.prototype.s=!1;Cr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),gk!=0)&&hk(this)};Cr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var _b=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function qp(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function sb(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(_u(i)){let r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function At(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var _k=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};re.addEventListener("test",n,e),re.removeEventListener("test",n,e)}catch{}return t}();function Za(t){return/^[\s\xa0]*$/.test(t)}function yu(){var t=re.navigator;return t&&(t=t.userAgent)?t:""}function yi(t){return yu().indexOf(t)!=-1}function jp(t){return jp[" "](t),t}jp[" "]=function(){};function yk(t,e){var n=oR;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var vk=yi("Opera"),po=yi("Trident")||yi("MSIE"),yb=yi("Edge"),Ep=yb||po,vb=yi("Gecko")&&!(yu().toLowerCase().indexOf("webkit")!=-1&&!yi("Edge"))&&!(yi("Trident")||yi("MSIE"))&&!yi("Edge"),Ck=yu().toLowerCase().indexOf("webkit")!=-1&&!yi("Edge");function Cb(){var t=re.document;return t?t.documentMode:void 0}var Mp;e:{if(su="",ou=function(){var t=yu();if(vb)return/rv:([^\);]+)(\)|;)/.exec(t);if(yb)return/Edge\/([\d\.]+)/.exec(t);if(po)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Ck)return/WebKit\/(\S+)/.exec(t);if(vk)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ou&&(su=ou?ou[1]:""),po&&(au=Cb(),au!=null&&au>parseFloat(su))){Mp=String(au);break e}Mp=su}var su,ou,au,Op;re.document&&po?(bp=Cb(),Op=bp||parseInt(Mp,10)||void 0):Op=void 0;var bp,bk=Op;function el(t,e){if(At.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(vb){e:{try{jp(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:wk[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&el.$.h.call(this)}}pt(el,At);var wk={2:"touch",3:"pen",4:"mouse"};el.prototype.h=function(){el.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ll="closure_listenable_"+(1e6*Math.random()|0),Sk=0;function Tk(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Sk,this.fa=this.ia=!1}function vu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Gp(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function Ek(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function bb(t){let e={};for(let n in t)e[n]=t[n];return e}var ob="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wb(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<ob.length;s++)n=ob[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Cu(t){this.src=t,this.g={},this.h=0}Cu.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Pp(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Tk(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function Dp(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=_b(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(vu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Pp(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var Hp="closure_lm_"+(1e6*Math.random()|0),wp={};function Sb(t,e,n,i,r){if(i&&i.once)return Eb(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Sb(t,e[s],n,i,r);return null}return n=Kp(n),t&&t[ll]?t.O(e,n,al(i)?!!i.capture:!!i,r):Tb(t,e,n,!1,i,r)}function Tb(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=al(r)?!!r.capture:!!r,a=$p(t);if(a||(t[Hp]=a=new Cu(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=Mk(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)_k||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(Ob(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Mk(){function t(n){return e.call(t.src,t.listener,n)}let e=Ok;return t}function Eb(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Eb(t,e[s],n,i,r);return null}return n=Kp(n),t&&t[ll]?t.P(e,n,al(i)?!!i.capture:!!i,r):Tb(t,e,n,!0,i,r)}function Mb(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)Mb(t,e[s],n,i,r);else i=al(i)?!!i.capture:!!i,n=Kp(n),t&&t[ll]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Pp(s,n,i,r),-1<n&&(vu(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=$p(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Pp(e,n,i,r)),(n=-1<t?e[t]:null)&&Wp(n))}function Wp(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ll])Dp(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(Ob(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=$p(e))?(Dp(n,t),n.h==0&&(n.src=null,e[Hp]=null)):vu(t)}}}function Ob(t){return t in wp?wp[t]:wp[t]="on"+t}function Ok(t,e){if(t.fa)t=!0;else{e=new el(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Wp(t),t=n.call(i,e)}return t}function $p(t){return t=t[Hp],t instanceof Cu?t:null}var Sp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kp(t){return typeof t=="function"?t:(t[Sp]||(t[Sp]=function(e){return t.handleEvent(e)}),t[Sp])}function ft(){Cr.call(this),this.i=new Cu(this),this.S=this,this.J=null}pt(ft,Cr);ft.prototype[ll]=!0;ft.prototype.removeEventListener=function(t,e,n,i){Mb(this,t,e,n,i)};function St(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new At(e,t);else if(e instanceof At)e.target=e.target||t;else{var r=e;e=new At(i,t),wb(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=lu(o,i,!0,e)&&r}if(o=e.g=t,r=lu(o,i,!0,e)&&r,r=lu(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=lu(o,i,!1,e)&&r}ft.prototype.N=function(){if(ft.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)vu(n[i]);delete t.g[e],t.h--}}this.J=null};ft.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};ft.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function lu(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Dp(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var Qp=re.JSON.stringify,Ip=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Dk(){var t=Yp;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var xp=class{constructor(){this.h=this.g=null}add(e,n){let i=Db.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},Db=new Ip(()=>new Ap,t=>t.reset()),Ap=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Pk(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Ik(t){re.setTimeout(()=>{throw t},0)}var tl,nl=!1,Yp=new xp,Pb=()=>{let t=re.Promise.resolve(void 0);tl=()=>{t.then(xk)}},xk=()=>{for(var t;t=Dk();){try{t.h.call(t.g)}catch(n){Ik(n)}var e=Db;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}nl=!1};function bu(t,e){ft.call(this),this.h=t||1,this.g=e||re,this.j=xt(this.qb,this),this.l=Date.now()}pt(bu,ft);B=bu.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),St(this,"tick"),this.ga&&(Jp(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Jp(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}B.N=function(){bu.$.N.call(this),Jp(this),delete this.g};function Xp(t,e,n){if(typeof t=="function")n&&(t=xt(t,n));else if(t&&typeof t.handleEvent=="function")t=xt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(t,e||0)}function Ib(t){t.g=Xp(()=>{t.g=null,t.i&&(t.i=!1,Ib(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var kp=class extends Cr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ib(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function il(t){Cr.call(this),this.h=t,this.g={}}pt(il,Cr);var ab=[];function xb(t,e,n,i){Array.isArray(n)||(n&&(ab[0]=n.toString()),n=ab);for(var r=0;r<n.length;r++){var s=Sb(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Ab(t){Gp(t.g,function(e,n){this.g.hasOwnProperty(n)&&Wp(e)},t),t.g={}}il.prototype.N=function(){il.$.N.call(this),Ab(this)};il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function wu(){this.g=!0}wu.prototype.Ea=function(){this.g=!1};function Ak(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var f=u.split("_");o=2<=f.length&&f[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function kk(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function ho(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Nk(t,n)+(i?" "+i:"")})}function Rk(t,e){t.info(function(){return"TIMEOUT: "+e})}wu.prototype.info=function(){};function Nk(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Qp(n)}catch{return e}}var bs={},lb=null;function Su(){return lb=lb||new ft}bs.Ta="serverreachability";function kb(t){At.call(this,bs.Ta,t)}pt(kb,At);function rl(t){let e=Su();St(e,new kb(e))}bs.STAT_EVENT="statevent";function Rb(t,e){At.call(this,bs.STAT_EVENT,t),this.stat=e}pt(Rb,At);function Wt(t){let e=Su();St(e,new Rb(e,t))}bs.Ua="timingevent";function Nb(t,e){At.call(this,bs.Ua,t),this.size=e}pt(Nb,At);function cl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){t()},e)}var Tu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zp(){}Zp.prototype.h=null;function cb(t){return t.h||(t.h=t.i())}function Lb(){}var ul={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function em(){At.call(this,"d")}pt(em,At);function tm(){At.call(this,"c")}pt(tm,At);var Rp;function Eu(){}pt(Eu,Zp);Eu.prototype.g=function(){return new XMLHttpRequest};Eu.prototype.i=function(){return{}};Rp=new Eu;function dl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new il(this),this.P=Fk,t=Ep?125:void 0,this.V=new bu(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bb}function Bb(){this.i=null,this.g="",this.h=!1}var Fk=45e3,Vb={},Np={};B=dl.prototype;B.setTimeout=function(t){this.P=t};function Fp(t,e,n){t.L=1,t.A=Ou(Ji(e)),t.u=n,t.S=!0,Ub(t,null)}function Ub(t,e){t.G=Date.now(),hl(t),t.B=Ji(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),Kb(n.i,"t",i),t.o=0,n=t.l.J,t.h=new Bb,t.g=mw(t.l,n?e:null,!t.u),0<t.O&&(t.M=new kp(xt(t.Pa,t,t.g),t.O)),xb(t.U,t.g,"readystatechange",t.nb),e=t.I?bb(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),rl(),Ak(t.j,t.v,t.B,t.m,t.W,t.u)}B.nb=function(t){t=t.target;let e=this.M;e&&vi(t)==3?e.l():this.Pa(t)};B.Pa=function(t){try{if(t==this.g)e:{let u=vi(this.g);var e=this.g.Ia();let f=this.g.da();if(!(3>u)&&(u!=3||Ep||this.g&&(this.h.h||this.g.ja()||fb(this.g)))){this.J||u!=4||e==7||(e==8||0>=f?rl(3):rl(2)),Mu(this);var n=this.g.da();this.ca=n;t:if(zb(this)){var i=fb(this.g);t="";var r=i.length,s=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ys(this),Xa(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,kk(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Za(a)){var c=a;break t}}c=null}if(n=c)ho(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lp(this,n);else{this.i=!1,this.s=3,Wt(12),ys(this),Xa(this);break e}}this.S?(qb(this,u,o),Ep&&this.i&&u==3&&(xb(this.U,this.V,"tick",this.mb),this.V.start())):(ho(this.j,this.m,o,null),Lp(this,o)),u==4&&ys(this),this.i&&!this.J&&(u==4?dw(this.l,this):(this.i=!1,hl(this)))}else iR(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),ys(this),Xa(this)}}}catch{}finally{}};function zb(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function qb(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=Lk(t,n),r==Np){e==4&&(t.s=4,Wt(14),i=!1),ho(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Vb){t.s=4,Wt(15),ho(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else ho(t.j,t.m,r,null),Lp(t,r);zb(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Wt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),am(e),e.M=!0,Wt(11))):(ho(t.j,t.m,n,"[Invalid Chunked Response]"),ys(t),Xa(t))}B.mb=function(){if(this.g){var t=vi(this.g),e=this.g.ja();this.o<e.length&&(Mu(this),qb(this,t,e),this.i&&t!=4&&hl(this))}};function Lk(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?Np:(n=Number(e.substring(n,i)),isNaN(n)?Vb:(i+=1,i+n>e.length?Np:(e=e.slice(i,i+n),t.o=i+n,e)))}B.cancel=function(){this.J=!0,ys(this)};function hl(t){t.Y=Date.now()+t.P,jb(t,t.P)}function jb(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=cl(xt(t.lb,t),e)}function Mu(t){t.C&&(re.clearTimeout(t.C),t.C=null)}B.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Rk(this.j,this.B),this.L!=2&&(rl(),Wt(17)),ys(this),this.s=2,Xa(this)):jb(this,this.Y-t)};function Xa(t){t.l.H==0||t.J||dw(t.l,t)}function ys(t){Mu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Jp(t.V),Ab(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Lp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Bp(n.i,t))){if(!t.K&&Bp(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)fu(n),Iu(n);else break e;om(n),Wt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=cl(xt(n.ib,n),6e3));if(1>=Jb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else vs(n,11)}else if((t.K||n.g==t)&&fu(n),!Za(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let f=c[4];f!=null&&(n.Ga=f,n.l.info("SVER="+n.Ga));let g=c[5];g!=null&&typeof g=="number"&&0<g&&(i=1.5*g,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let _=t.g;if(_){let C=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=i.i;s.g||C.indexOf("spdy")==-1&&C.indexOf("quic")==-1&&C.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(nm(s,s.h),s.h=null))}if(i.F){let v=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(i.Da=v,Ue(i.I,i.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=pw(i,i.J?i.pa:null,i.Y),o.K){Xb(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(Mu(a),hl(a)),i.g=o}else cw(i);0<n.j.length&&xu(n)}else c[0]!="stop"&&c[0]!="close"||vs(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?vs(n,7):sm(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}rl(4)}catch{}}function Bk(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(_u(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function Vk(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(_u(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function Gb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(_u(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Vk(t),i=Bk(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var Hb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uk(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Cs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Cs){this.h=t.h,du(this,t.j),this.s=t.s,this.g=t.g,hu(this,t.m),this.l=t.l;var e=t.i,n=new sl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ub(this,n),this.o=t.o}else t&&(e=String(t).match(Hb))?(this.h=!1,du(this,e[1]||"",!0),this.s=Ya(e[2]||""),this.g=Ya(e[3]||"",!0),hu(this,e[4]),this.l=Ya(e[5]||"",!0),ub(this,e[6]||"",!0),this.o=Ya(e[7]||"")):(this.h=!1,this.i=new sl(null,this.h))}Cs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ja(e,db,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ja(e,db,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ja(n,n.charAt(0)=="/"?jk:qk,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ja(n,Hk)),t.join("")};function Ji(t){return new Cs(t)}function du(t,e,n){t.j=n?Ya(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function hu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ub(t,e,n){e instanceof sl?(t.i=e,Wk(t.i,t.h)):(n||(e=Ja(e,Gk)),t.i=new sl(e,t.h))}function Ue(t,e,n){t.i.set(e,n)}function Ou(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ya(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ja(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,zk),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zk(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var db=/[#\/\?@]/g,qk=/[#\?:]/g,jk=/[#\?]/g,Gk=/[#\?@]/g,Hk=/#/g;function sl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function br(t){t.g||(t.g=new Map,t.h=0,t.i&&Uk(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}B=sl.prototype;B.add=function(t,e){br(this),this.i=null,t=mo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Wb(t,e){br(t),e=mo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function $b(t,e){return br(t),e=mo(t,e),t.g.has(e)}B.forEach=function(t,e){br(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};B.ta=function(){br(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};B.Z=function(t){br(this);let e=[];if(typeof t=="string")$b(this,t)&&(e=e.concat(this.g.get(mo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};B.set=function(t,e){return br(this),this.i=null,t=mo(this,t),$b(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};B.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Kb(t,e,n){Wb(t,e),0<n.length&&(t.i=null,t.g.set(mo(t,e),qp(n)),t.h+=n.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function mo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Wk(t,e){e&&!t.j&&(br(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(Wb(this,i),Kb(this,r,n))},t)),t.j=e}var $k=class{constructor(t,e){this.g=t,this.map=e}};function Qb(t){this.l=t||Kk,re.PerformanceNavigationTiming?(t=re.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kk=10;function Yb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Jb(t){return t.h?1:t.g?t.g.size:0}function Bp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function nm(t,e){t.g?t.g.add(e):t.h=e}function Xb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Qb.prototype.cancel=function(){if(this.i=Zb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Zb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return qp(t.i)}var Qk=class{stringify(t){return re.JSON.stringify(t,void 0)}parse(t){return re.JSON.parse(t,void 0)}};function Yk(){this.g=new Qk}function Jk(t,e,n){let i=n||"";try{Gb(t,function(r,s){let o=r;al(r)&&(o=Qp(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Xk(t,e){let n=new wu;if(re.Image){let i=new Image;i.onload=ru(cu,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ru(cu,n,i,"TestLoadImage: error",!1,e),i.onabort=ru(cu,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ru(cu,n,i,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function cu(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function fl(t){this.l=t.ec||null,this.j=t.ob||!1}pt(fl,Zp);fl.prototype.g=function(){return new Du(this.l,this.j)};fl.prototype.i=function(t){return function(){return t}}({});function Du(t,e){ft.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=im,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}pt(Du,ft);var im=0;B=Du.prototype;B.open=function(t,e){if(this.readyState!=im)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ol(this)};B.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pl(this)),this.readyState=im};B.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ew(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ew(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}B.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?pl(this):ol(this),this.readyState==3&&ew(this)}};B.Za=function(t){this.g&&(this.response=this.responseText=t,pl(this))};B.Ya=function(t){this.g&&(this.response=t,pl(this))};B.ka=function(){this.g&&pl(this)};function pl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ol(t)}B.setRequestHeader=function(t,e){this.v.append(t,e)};B.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ol(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Zk=re.JSON.parse;function Qe(t){ft.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tw,this.L=this.M=!1}pt(Qe,ft);var tw="",eR=/^https?$/i,tR=["POST","PUT"];B=Qe.prototype;B.Oa=function(t){this.M=t};B.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Rp.g(),this.C=this.u?cb(this.u):cb(Rp),this.g.onreadystatechange=xt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){hb(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=re.FormData&&t instanceof re.FormData,!(0<=_b(tR,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rw(this),0<this.B&&((this.L=nR(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xt(this.ua,this)):this.A=Xp(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){hb(this,s)}};function nR(t){return po&&typeof t.timeout=="number"&&t.ontimeout!==void 0}B.ua=function(){typeof zp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,St(this,"timeout"),this.abort(8))};function hb(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,nw(t),Pu(t)}function nw(t){t.F||(t.F=!0,St(t,"complete"),St(t,"error"))}B.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,St(this,"complete"),St(this,"abort"),Pu(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Pu(this,!0)),Qe.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?iw(this):this.kb())};B.kb=function(){iw(this)};function iw(t){if(t.h&&typeof zp<"u"&&(!t.C[1]||vi(t)!=4||t.da()!=2)){if(t.v&&vi(t)==4)Xp(t.La,0,t);else if(St(t,"readystatechange"),vi(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(Hb)[1]||null;!r&&re.self&&re.self.location&&(r=re.self.location.protocol.slice(0,-1)),i=!eR.test(r?r.toLowerCase():"")}n=i}if(n)St(t,"complete"),St(t,"success");else{t.m=6;try{var s=2<vi(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",nw(t)}}finally{Pu(t)}}}}function Pu(t,e){if(t.g){rw(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||St(t,"ready");try{n.onreadystatechange=i}catch{}}}function rw(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(re.clearTimeout(t.A),t.A=null)}B.isActive=function(){return!!this.g};function vi(t){return t.g?t.g.readyState:0}B.da=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Zk(e)}};function fb(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case tw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function iR(t){let e={};t=(t.g&&2<=vi(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(Za(t[i]))continue;var n=Pk(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[r]||[];e[r]=s,s.push(n)}Ek(e,function(i){return i.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function sw(t){let e="";return Gp(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function rm(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=sw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ue(t,e,n))}function Ka(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ow(t){this.Ga=0,this.j=[],this.l=new wu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ka("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ka("baseRetryDelayMs",5e3,t),this.hb=Ka("retryDelaySeedMs",1e4,t),this.eb=Ka("forwardChannelMaxRetries",2,t),this.xa=Ka("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Qb(t&&t.concurrentRequestLimit),this.Ja=new Yk,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=ow.prototype;B.ra=8;B.H=1;function sm(t){if(aw(t),t.H==3){var e=t.W++,n=Ji(t.I);if(Ue(n,"SID",t.K),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),ml(t,n),e=new dl(t,t.l,e),e.L=2,e.A=Ou(Ji(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&re.Image&&(new Image().src=e.A,n=!0),n||(e.g=mw(e.l,null),e.g.ha(e.A)),e.G=Date.now(),hl(e)}fw(t)}function Iu(t){t.g&&(am(t),t.g.cancel(),t.g=null)}function aw(t){Iu(t),t.u&&(re.clearTimeout(t.u),t.u=null),fu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&re.clearTimeout(t.m),t.m=null)}function xu(t){if(!Yb(t.i)&&!t.m){t.m=!0;var e=t.Na;tl||Pb(),nl||(tl(),nl=!0),Yp.add(e,t),t.C=0}}function rR(t,e){return Jb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=cl(xt(t.Na,t,e),hw(t,t.C)),t.C++,!0)}B.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new dl(this,this.l,t),s=this.s;if(this.U&&(s?(s=bb(s),wb(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=lw(this,r,e),n=Ji(this.I),Ue(n,"RID",t),Ue(n,"CVER",22),this.F&&Ue(n,"X-HTTP-Session-Id",this.F),ml(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(sw(s)))+"&"+e:this.o&&rm(n,this.o,s)),nm(this.i,r),this.bb&&Ue(n,"TYPE","init"),this.P?(Ue(n,"$req",e),Ue(n,"SID","null"),r.aa=!0,Fp(r,n,null)):Fp(r,n,e),this.H=2}}else this.H==3&&(t?pb(this,t):this.j.length==0||Yb(this.i)||pb(this))};function pb(t,e){var n;e?n=e.m:n=t.W++;let i=Ji(t.I);Ue(i,"SID",t.K),Ue(i,"RID",n),Ue(i,"AID",t.V),ml(t,i),t.o&&t.s&&rm(i,t.o,t.s),n=new dl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=lw(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),nm(t.i,n),Fp(n,i,e)}function ml(t,e){t.na&&Gp(t.na,function(n,i){Ue(e,i,n)}),t.h&&Gb({},function(n,i){Ue(e,i,n)})}function lw(t,e,n){n=Math.min(t.j.length,n);var i=t.h?xt(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].g,u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{Jk(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function cw(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;tl||Pb(),nl||(tl(),nl=!0),Yp.add(e,t),t.A=0}}function om(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=cl(xt(t.Ma,t),hw(t,t.A)),t.A++,!0)}B.Ma=function(){if(this.u=null,uw(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=cl(xt(this.jb,this),t)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wt(10),Iu(this),uw(this))};function am(t){t.B!=null&&(re.clearTimeout(t.B),t.B=null)}function uw(t){t.g=new dl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Ji(t.wa);Ue(e,"RID","rpc"),Ue(e,"SID",t.K),Ue(e,"AID",t.V),Ue(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ue(e,"TO",t.qa),Ue(e,"TYPE","xmlhttp"),ml(t,e),t.o&&t.s&&rm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Ou(Ji(e)),n.u=null,n.S=!0,Ub(n,t)}B.ib=function(){this.v!=null&&(this.v=null,Iu(this),om(this),Wt(19))};function fu(t){t.v!=null&&(re.clearTimeout(t.v),t.v=null)}function dw(t,e){var n=null;if(t.g==e){fu(t),am(t),t.g=null;var i=2}else if(Bp(t.i,e))n=e.F,Xb(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=Su(),St(i,new Nb(i,n)),xu(t)}else cw(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&rR(t,e)||i==2&&om(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:vs(t,5);break;case 4:vs(t,10);break;case 3:vs(t,6);break;default:vs(t,2)}}}function hw(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function vs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=xt(t.pb,t);n||(n=new Cs("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||du(n,"https"),Ou(n)),Xk(n.toString(),i)}else Wt(2);t.H=0,t.h&&t.h.za(e),fw(t),aw(t)}B.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Wt(2)):(this.l.info("Failed to ping google.com"),Wt(1))};function fw(t){if(t.H=0,t.ma=[],t.h){let e=Zb(t.i);(e.length!=0||t.j.length!=0)&&(sb(t.ma,e),sb(t.ma,t.j),t.i.i.length=0,qp(t.j),t.j.length=0),t.h.ya()}}function pw(t,e,n){var i=n instanceof Cs?Ji(n):new Cs(n);if(i.g!="")e&&(i.g=e+"."+i.g),hu(i,i.m);else{var r=re.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Cs(null);i&&du(s,i),e&&(s.g=e),r&&hu(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Ue(i,n,e),Ue(i,"VER",t.ra),ml(t,i),i}function mw(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Qe(new fl({ob:n})):new Qe(t.va),e.Oa(t.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function gw(){}B=gw.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function pu(){if(po&&!(10<=Number(bk)))throw Error("Environmental error: no available transport.")}pu.prototype.g=function(t,e){return new mn(t,e)};function mn(t,e){ft.call(this),this.g=new ow(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Za(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Za(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new go(this)}pt(mn,ft);mn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Wt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=pw(t,null,t.Y),xu(t)};mn.prototype.close=function(){sm(this.g)};mn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Qp(t),t=n);e.j.push(new $k(e.fb++,t)),e.H==3&&xu(e)};mn.prototype.N=function(){this.g.h=null,delete this.j,sm(this.g),delete this.g,mn.$.N.call(this)};function _w(t){em.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}pt(_w,em);function yw(){tm.call(this),this.status=1}pt(yw,tm);function go(t){this.g=t}pt(go,gw);go.prototype.Ba=function(){St(this.g,"a")};go.prototype.Aa=function(t){St(this.g,new _w(t))};go.prototype.za=function(t){St(this.g,new yw)};go.prototype.ya=function(){St(this.g,"b")};function sR(){this.blockSize=-1}function Yn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}pt(Yn,sR);Yn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Tp(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Yn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)Tp(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){Tp(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){Tp(this,i),r=0;break}}this.h=r,this.i+=e};Yn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function De(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var oR={};function lm(t){return-128<=t&&128>t?yk(t,function(e){return new De([e|0],0>e?-1:0)}):new De([t|0],0>t?-1:0)}function Ci(t){if(isNaN(t)||!isFinite(t))return fo;if(0>t)return wt(Ci(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Vp;return new De(e,0)}function vw(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return wt(vw(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ci(Math.pow(e,8)),i=fo,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=Ci(Math.pow(e,s)),i=i.R(s).add(Ci(o))):(i=i.R(n),i=i.add(Ci(o)))}return i}var Vp=4294967296,fo=lm(0),Up=lm(1),mb=lm(16777216);B=De.prototype;B.ea=function(){if(xn(this))return-wt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Vp+i)*e,e*=Vp}return t};B.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Yi(this))return"0";if(xn(this))return"-"+wt(this).toString(t);for(var e=Ci(Math.pow(t,6)),n=this,i="";;){var r=gu(n,e).g;n=mu(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Yi(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};B.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Yi(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function xn(t){return t.h==-1}B.X=function(t){return t=mu(this,t),xn(t)?-1:Yi(t)?0:1};function wt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new De(n,~t.h).add(Up)}B.abs=function(){return xn(this)?wt(this):this};B.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new De(n,n[n.length-1]&-2147483648?-1:0)};function mu(t,e){return t.add(wt(e))}B.R=function(t){if(Yi(this)||Yi(t))return fo;if(xn(this))return xn(t)?wt(this).R(wt(t)):wt(wt(this).R(t));if(xn(t))return wt(this.R(wt(t)));if(0>this.X(mb)&&0>t.X(mb))return Ci(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,l=t.D(r)&65535;n[2*i+2*r]+=o*l,uu(n,2*i+2*r),n[2*i+2*r+1]+=s*l,uu(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,uu(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,uu(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new De(n,0)};function uu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Qa(t,e){this.g=t,this.h=e}function gu(t,e){if(Yi(e))throw Error("division by zero");if(Yi(t))return new Qa(fo,fo);if(xn(t))return e=gu(wt(t),e),new Qa(wt(e.g),wt(e.h));if(xn(e))return e=gu(t,wt(e)),new Qa(wt(e.g),e.h);if(30<t.g.length){if(xn(t)||xn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Up,i=e;0>=i.X(t);)n=gb(n),i=gb(i);var r=uo(n,1),s=uo(i,1);for(i=uo(i,2),n=uo(n,2);!Yi(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=uo(i,1),n=uo(n,1)}return e=mu(t,r.R(e)),new Qa(r,e)}for(r=fo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=Ci(n),o=s.R(e);xn(o)||0<o.X(t);)n-=i,s=Ci(n),o=s.R(e);Yi(s)&&(s=Up),r=r.add(s),t=mu(t,o)}return new Qa(r,t)}B.gb=function(t){return gu(this,t).h};B.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new De(n,this.h&t.h)};B.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new De(n,this.h|t.h)};B.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new De(n,this.h^t.h)};function gb(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new De(n,t.h)}function uo(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new De(r,t.h)}pu.prototype.createWebChannel=pu.prototype.g;mn.prototype.send=mn.prototype.u;mn.prototype.open=mn.prototype.m;mn.prototype.close=mn.prototype.close;Tu.NO_ERROR=0;Tu.TIMEOUT=8;Tu.HTTP_ERROR=6;Fb.COMPLETE="complete";Lb.EventType=ul;ul.OPEN="a";ul.CLOSE="b";ul.ERROR="c";ul.MESSAGE="d";ft.prototype.listen=ft.prototype.O;Qe.prototype.listenOnce=Qe.prototype.P;Qe.prototype.getLastError=Qe.prototype.Sa;Qe.prototype.getLastErrorCode=Qe.prototype.Ia;Qe.prototype.getStatus=Qe.prototype.da;Qe.prototype.getResponseJson=Qe.prototype.Wa;Qe.prototype.getResponseText=Qe.prototype.ja;Qe.prototype.send=Qe.prototype.ha;Qe.prototype.setWithCredentials=Qe.prototype.Oa;Yn.prototype.digest=Yn.prototype.l;Yn.prototype.reset=Yn.prototype.reset;Yn.prototype.update=Yn.prototype.j;De.prototype.add=De.prototype.add;De.prototype.multiply=De.prototype.R;De.prototype.modulo=De.prototype.gb;De.prototype.compare=De.prototype.X;De.prototype.toNumber=De.prototype.ea;De.prototype.toString=De.prototype.toString;De.prototype.getBits=De.prototype.D;De.fromNumber=Ci;De.fromString=vw;var hH=Jn.createWebChannelTransport=function(){return new pu},fH=Jn.getStatEventTarget=function(){return Su()},pH=Jn.ErrorCode=Tu,mH=Jn.EventType=Fb,gH=Jn.Event=bs,_H=Jn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yH=Jn.FetchXmlHttpFactory=fl,vH=Jn.WebChannel=Lb,CH=Jn.XhrIo=Qe,Cw=Jn.Md5=Yn,ws=Jn.Integer=De;var Bs=Pf(KM(),1),AO=Pf(i_(),1);var QM="@firebase/firestore",YM="4.5.1";var vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};vt.UNAUTHENTICATED=new vt(null);vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid");vt.FIRST_PARTY=new vt("first-party-uid");vt.MOCK_USER=new vt("mock-user");var TV="10.10.0";var Sa=TV;function EV(t){Sa=t}function MV(t){return bV(t,{depth:100})}var Vs=new Vc("@firebase/firestore");function Jl(){return Vs.logLevel}function z(t,...e){if(Vs.logLevel<=$i.DEBUG){let n=e.map(yv);Vs.debug(`Firestore (${Sa}): ${t}`,...n)}}function Hn(t,...e){if(Vs.logLevel<=$i.ERROR){let n=e.map(yv);Vs.error(`Firestore (${Sa}): ${t}`,...n)}}function la(t,...e){if(Vs.logLevel<=$i.WARN){let n=e.map(yv);Vs.warn(`Firestore (${Sa}): ${t}`,...n)}}function yv(t){if(typeof t=="string")return t;try{return MV(t)}catch{return t}}function ne(t="Unexpected state"){let e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+t;throw Hn(e),new Error(e)}function Fe(t,e){t||ne()}function ae(t,e){return t}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends j1{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var jn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ah=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},k0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}},R0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},N0=class{constructor(e){this.authProvider=e,this.currentUser=vt.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.tokenCounter,r=l=>this.tokenCounter!==i?(i=this.tokenCounter,n(l)):Promise.resolve(),s=new jn;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),s.resolve(),s=new jn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>T(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.tokenListener),o()};this.authProvider.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.authProvider.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jn)}},0),o()}getToken(){let e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.tokenCounter!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string"),new Ah(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.tokenListener)}getUser(){let e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new vt(e)}},F0=class{constructor(e,n,i){this.sessionIndex=e,this.iamToken=n,this.authTokenFactory=i,this.type="FirstParty",this.user=vt.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}},L0=class{constructor(e,n,i){this.sessionIndex=e,this.iamToken=n,this.authTokenFactory=i}getToken(){return Promise.resolve(new F0(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},B0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},V0=class{constructor(e){this.appCheckProvider=e,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(e,n){let i=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.latestAppCheckToken;return this.latestAppCheckToken=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.tokenListener=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.appCheckProvider.getImmediate({optional:!0});s?r(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.latestAppCheckToken=n.token,new B0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.tokenListener)}};function OV(t){if(!t)return new k0;switch(t.type){case"firstParty":return new L0(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new G(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function DV(t){return SV(t)}var kh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="",r=20;for(;i.length<r;){let s=DV(40);for(let o=0;o<s.length;++o)i.length<r&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}};function Ee(t,e){return t<e?-1:t>e?1:0}function Us(t,e,n){return t.length!==e.length?!1:t.every((i,r)=>n(i,e[r]))}var JM=-62135596800,XM=1e6,Tt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<JM)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor((e-n*1e3)*XM);return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return this.seconds*1e3+this.nanoseconds/XM}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-JM,n=String(e).padStart(12,"0"),i=String(this.nanoseconds).padStart(9,"0");return n+"."+i}};var ce=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Tt(0,0))}static max(){return new t(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return this.timestamp.seconds*1e6+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ZM="__name__",Rh=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&ne(),i===void 0?i=e.length-n:i>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},We=class t extends Rh{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new G(O.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},PV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cn=class t extends Rh{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return PV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ZM}static keyField(){return new t([ZM])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new G(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(!(l==="\\"||l==="."||l==="`"))throw new G(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a==="."&&!o?(s(),r++):(i+=a,r++)}if(s(),o)throw new G(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var X=class t{constructor(e){this.path=e}static fromPath(e){return new t(We.fromString(e))}static fromName(e){return new t(We.fromString(e).popFirst(5))}static empty(){return new t(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2===0}static fromSegments(e){return new t(new We(e.slice()))}};var nc=-1;function IV(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ce.fromTimestamp(i===1e9?new Tt(n+1,0):new Tt(n,i));return new zs(r,X.empty(),e)}function xV(t){return new zs(t.readTime,t.key,nc)}var zs=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(ce.min(),X.empty(),nc)}static max(){return new t(ce.max(),X.empty(),nc)}};function AV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0||(n=X.comparator(t.documentKey,e.documentKey),n!==0)?n:Ee(t.largestBatchId,e.largestBatchId)}var kV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",U0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function _c(t){return T(this,null,function*(){if(t.code===O.FAILED_PRECONDITION&&t.message===kV)z("LocalStore","Unexpectedly lost primary lease");else throw t})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};var vn="SimpleDb",RV=3,z0=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.completionDeferred=new jn,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{n.error?this.completionDeferred.reject(new Fs(e,n.error)):this.completionDeferred.resolve()},this.transaction.onerror=i=>{let r=vv(i.target.error);this.completionDeferred.reject(new Fs(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(s){throw new Fs(n,s)}}get completionPromise(){return this.completionDeferred.promise}abort(e){e&&this.completionDeferred.reject(e),this.aborted||(z(vn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let e=this.transaction;!this.aborted&&typeof e.commit=="function"&&e.commit()}store(e){let n=this.transaction.objectStore(e);return new j0(n)}},Nh=class t{constructor(e,n,i){this.name=e,this.version=n,this.schemaConverter=i,t.getIOSVersion(Ra())===12.2&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z(vn,"Removing database:",e),ks(window.indexedDB.deleteDatabase(e)).toPromise()}static isAvailable(){if(!Bc())return!1;if(t.isMockPersistence())return!0;let e=Ra(),n=t.getIOSVersion(e),i=0<n&&n<10,r=t.getAndroidVersion(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static isMockPersistence(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.USE_MOCK_PERSISTENCE)==="YES"}static getStore(e,n){return e.store(n)}static getIOSVersion(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static getAndroidVersion(e){let n=e.match(/Android ([\d.]+)/i),i=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(i)}ensureDb(e){return T(this,null,function*(){return this.db||(z(vn,"Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;n(o)},r.onblocked=()=>{i(new Fs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new G(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new G(O.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new Fs(e,o))},r.onupgradeneeded=s=>{z(vn,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.schemaConverter.createOrUpgrade(o,r.transaction,s.oldVersion,this.version).next(()=>{z(vn,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=n=>this.versionchangelistener(n)),this.db})}setVersionChangeListener(e){this.versionchangelistener=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return T(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.ensureDb(e);let a=z0.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.maybeCommit(),c)).catch(c=>(a.abort(c),x.reject(c))).toPromise();return l.catch(()=>{}),yield a.completionPromise,l}catch(a){let l=a,c=l.name!=="FirebaseError"&&o<RV;if(z(vn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}},q0=class{constructor(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(e){this.dbCursor=e}done(){this.shouldStop=!0}skip(e){this.nextKey=e}delete(){return ks(this.dbCursor.delete())}},Fs=class extends G{constructor(e,n){super(O.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function yc(t){return t.name==="IndexedDbTransactionError"}var j0=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(z(vn,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(z(vn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ks(i)}add(e){z(vn,"ADD",this.store.name,e,e);let n=this.store.add(e);return ks(n)}get(e){let n=this.store.get(e);return ks(n).next(i=>(i===void 0&&(i=null),z(vn,"GET",this.store.name,e,i),i))}delete(e){z(vn,"DELETE",this.store.name,e);let n=this.store.delete(e);return ks(n)}count(){z(vn,"COUNT",this.store.name);let e=this.store.count();return ks(e)}loadAll(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(i.range);return new x((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}else{let s=this.cursor(i),o=[];return this.iterateCursor(s,(a,l)=>{o.push(l)}).next(()=>o)}}loadFirst(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new x((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}deleteAll(e,n){z(vn,"DELETE ALL",this.store.name);let i=this.options(e,n);i.keysOnly=!1;let r=this.cursor(i);return this.iterateCursor(r,(s,o,a)=>a.delete())}iterate(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.iterateCursor(r,n)}iterateSerial(e){let n=this.cursor({});return new x((i,r)=>{n.onerror=s=>{let o=vv(s.target.error);r(o)},n.onsuccess=s=>{let o=s.target.result;if(!o){i();return}e(o.primaryKey,o.value).next(a=>{a?o.continue():i()})}})}iterateCursor(e,n){let i=[];return new x((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a){r();return}let l=new q0(a),c=n(a.primaryKey,a.value,l);if(c instanceof x){let u=c.catch(f=>(l.done(),x.reject(f)));i.push(u)}l.isDone?r():l.skipToKey===null?a.continue():a.continue(l.skipToKey)}}).next(()=>x.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.keysOnly?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}else return this.store.openCursor(e.range,n)}};function ks(t){return new x((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=vv(i.target.error);n(r)}})}var eO=!1;function vv(t){let e=Nh.getIOSVersion(Ra());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eO||(eO=!0,setTimeout(()=>{throw i},0)),i}}return t}var G$=15*1e3,H$=60*1e3;var kO=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.setPreviousValue(r),this.writeNewSequenceNumber=r=>i.writeSequenceNumber(r))}setPreviousValue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(n),n}}t.INVALID=-1;return t})();var NV="remoteDocuments";var RO="owner";var NO="mutationQueues";var FO="mutations";var LO="documentMutations",FV="remoteDocumentsV14";var BO="remoteDocumentGlobal";var VO="targets";var UO="targetDocuments";var zO="targetGlobal",qO="collectionParents";var jO="clientMetadata";var GO="bundles";var HO="namedQueries";var LV="indexConfiguration";var BV="indexState";var VV="indexEntries";var WO="documentOverlays";var UV=[NO,FO,LO,NV,VO,RO,zO,UO],zV=UV,qV=[...zV,jO],jV=[...qV,BO],GV=[...jV,qO],HV=[...GV,GO,HO],W$=[...HV,WO],WV=[NO,FO,LO,FV,VO,RO,zO,UO,jO,BO,qO,GO,HO,WO],$V=WV,$$=[...$V,LV,BV,VV];function tO(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ta(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $O(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Xe=class t{constructor(e,n){this.comparator=e,this.root=n||Zl.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zl.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zl.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oa(this.root,e,this.comparator,!1)}getReverseIterator(){return new oa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oa(this.root,e,this.comparator,!0)}},oa=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)this.isReverse?e=e.left:e=e.right;else if(s===0){this.nodeStack.push(e);break}else this.nodeStack.push(e),this.isReverse?e=e.right:e=e.left}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zl=(()=>{class t{constructor(n,i,r,s,o){this.key=n,this.value=i,this.color=r??t.RED,this.left=s??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,i,r,s,o){return new t(n??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let s=this,o=r(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,i,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let n=this;return!n.left.isRed()&&!n.left.left.isRed()&&(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,i){let r,s=this;if(i(n,s.key)<0)!s.left.isEmpty()&&!s.left.isRed()&&!s.left.left.isRed()&&(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(n,i),null);else{if(s.left.isRed()&&(s=s.rotateRight()),!s.right.isEmpty()&&!s.right.isRed()&&!s.right.left.isRed()&&(s=s.moveRedRight()),i(n,s.key)===0){if(s.right.isEmpty())return t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(n,i))}return s.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth(){let n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let n=this.left.check();if(n!==this.right.check())throw ne();return n+(this.isRed()?0:1)}}return t.EMPTY=null,t.RED=!0,t.BLACK=!1,t})(),G0=class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,i,r,s){return this}insert(e,n,i){return new Zl(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};Zl.EMPTY=new G0;var Bt=class t{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(n!==void 0?i=this.data.getIteratorFrom(n):i=this.data.getIterator();i.hasNext();){let r=i.getNext();if(!e(r.key))return}}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fh(this.data.getIterator())}getIteratorFrom(e){return new Fh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Fh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Li=class t{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Bt(Cn.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,(n,i)=>n.isEqual(i))}};function KV(t){return Buffer.from(t,"base64").toString("binary")}function QV(t){return Buffer.from(t,"binary").toString("base64")}var Jt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=KV(e);return new t(n)}static fromUint8Array(e){let n=YV(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return QV(this.binaryString)}toUint8Array(){return JV(this.binaryString)}approximateByteSize(){return this.binaryString.length*2}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Jt.EMPTY_BYTE_STRING=new Jt("");function YV(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function JV(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var XV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(Fe(!!t),typeof t=="string"){let e=0,n=XV.exec(t);if(Fe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}else{let e=Je(t.seconds),n=Je(t.nanos);return{seconds:e,nanos:n}}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jr(t){return typeof t=="string"?Jt.fromBase64String(t):Jt.fromUint8Array(t)}var KO="server_timestamp",QO="__type__",YO="__previous_value__",JO="__local_write_time__";function Cv(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[QO])===null||n===void 0?void 0:n.stringValue)===KO}function ZV(t,e){let n={fields:{[QO]:{stringValue:KO},[JO]:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Cv(e)&&(e=bv(e)),e&&(n.fields[YO]=e),{mapValue:n}}function bv(t){let e=t.mapValue.fields[YO];return Cv(e)?bv(e):e}function ic(t){let e=Yr(t.mapValue.fields[JO].timestampValue);return new Tt(e.seconds,e.nanos)}var H0=class{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},W0="(default)",Lh=class t{constructor(e,n){this.projectId=e,this.database=n||W0}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===W0}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function e5(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new G(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lh(t.options.projectId,e)}var wv=-1;function lf(t){return t==null}function rc(t){return t===0&&1/t===-1/0}function t5(t){return typeof t=="number"&&Number.isInteger(t)&&!rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var XO="__max__",Dh={mapValue:{fields:{__type__:{stringValue:XO}}}};function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cv(t)?4:ZO(t)?9007199254740991:10:ne()}function ai(t,e){if(t===e)return!0;let n=qs(t),i=qs(e);if(n!==i)return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ic(t).isEqual(ic(e));case 3:return n5(t,e);case 5:return t.stringValue===e.stringValue;case 6:return r5(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return i5(t,e);case 2:return s5(t,e);case 9:return Us(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:return o5(t,e);case 9007199254740991:return!0;default:return ne()}}function n5(t,e){if(typeof t.timestampValue=="string"&&typeof e.timestampValue=="string"&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;let n=Yr(t.timestampValue),i=Yr(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}function i5(t,e){return Je(t.geoPointValue.latitude)===Je(e.geoPointValue.latitude)&&Je(t.geoPointValue.longitude)===Je(e.geoPointValue.longitude)}function r5(t,e){return Jr(t.bytesValue).isEqual(Jr(e.bytesValue))}function s5(t,e){if("integerValue"in t&&"integerValue"in e)return Je(t.integerValue)===Je(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){let n=Je(t.doubleValue),i=Je(e.doubleValue);return n===i?rc(n)===rc(i):isNaN(n)&&isNaN(i)}return!1}function o5(t,e){let n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(tO(n)!==tO(i))return!1;for(let r in n)if(n.hasOwnProperty(r)&&(i[r]===void 0||!ai(n[r],i[r])))return!1;return!0}function sc(t,e){return(t.values||[]).find(n=>ai(n,e))!==void 0}function ua(t,e){if(t===e)return 0;let n=qs(t),i=qs(e);if(n!==i)return Ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return a5(t,e);case 3:return nO(t.timestampValue,e.timestampValue);case 4:return nO(ic(t),ic(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return u5(t.bytesValue,e.bytesValue);case 7:return l5(t.referenceValue,e.referenceValue);case 8:return c5(t.geoPointValue,e.geoPointValue);case 9:return d5(t.arrayValue,e.arrayValue);case 10:return h5(t.mapValue,e.mapValue);default:throw ne()}}function a5(t,e){let n=Je(t.integerValue||t.doubleValue),i=Je(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}function nO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);let n=Yr(t),i=Yr(e),r=Ee(n.seconds,i.seconds);return r!==0?r:Ee(n.nanos,i.nanos)}function l5(t,e){let n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){let s=Ee(n[r],i[r]);if(s!==0)return s}return Ee(n.length,i.length)}function c5(t,e){let n=Ee(Je(t.latitude),Je(e.latitude));return n!==0?n:Ee(Je(t.longitude),Je(e.longitude))}function u5(t,e){let n=Jr(t),i=Jr(e);return n.compareTo(i)}function d5(t,e){let n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){let s=ua(n[r],i[r]);if(s)return s}return Ee(n.length,i.length)}function h5(t,e){if(t===Dh.mapValue&&e===Dh.mapValue)return 0;if(t===Dh.mapValue)return 1;if(e===Dh.mapValue)return-1;let n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){let a=Ee(i[o],s[o]);if(a!==0)return a;let l=ua(n[i[o]],r[s[o]]);if(l!==0)return l}return Ee(i.length,s.length)}function da(t){return Sv(t)}function Sv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?p5(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?f5(t.bytesValue):"referenceValue"in t?g5(t.referenceValue):"geoPointValue"in t?m5(t.geoPointValue):"arrayValue"in t?y5(t.arrayValue):"mapValue"in t?_5(t.mapValue):ne()}function f5(t){return Jr(t).toBase64()}function p5(t){let e=Yr(t);return`time(${e.seconds},${e.nanos})`}function m5(t){return`geo(${t.latitude},${t.longitude})`}function g5(t){return X.fromName(t).toString()}function _5(t){let e=Object.keys(t.fields||{}).sort(),n="{",i=!0;for(let r of e)i?i=!1:n+=",",n+=`${r}:${Sv(t.fields[r])}`;return n+"}"}function y5(t){let e="[",n=!0;for(let i of t.values||[])n?n=!1:e+=",",e+=Sv(i);return e+"]"}function iO(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $0(t){return!!t&&"integerValue"in t}function v5(t){return!!t&&"doubleValue"in t}function C5(t){return $0(t)||v5(t)}function Tv(t){return!!t&&"arrayValue"in t}function rO(t){return!!t&&"nullValue"in t}function sO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ih(t){return!!t&&"mapValue"in t}function ec(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ta(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ec(i)),e}else if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ec(t.arrayValue.values[n]);return e}else return Object.assign({},t)}function ZO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XO}var oi=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Ih(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){let i=this.getFieldsMap(e.popLast());i[e.lastSegment()]=ec(n)}setAll(e){let n=Cn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=ec(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());Ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];(!Ih(r)||!r.mapValue.fields)&&(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ta(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(ec(this.value))}};function eD(t){let e=[];return Ta(t.fields,(n,i)=>{let r=new Cn([n]);if(Ih(i)){let o=eD(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new Li(e)}var li=class t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ce.min(),ce.min(),ce.min(),oi.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,ce.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,ce.min(),ce.min(),oi.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ce.min(),ce.min(),oi.empty(),2)}convertToFoundDocument(e,n){return this.createTime.isEqual(ce.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};function b5(t,e,n){let i=e.data.field(t),r=n.data.field(t);return i!==null&&r!==null?ua(i,r):ne()}var ha=class{constructor(e,n){this.position=e,this.inclusive=n}};function tD(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField())i=X.comparator(X.fromName(o.referenceValue),n.key);else{let a=n.data.field(s.field);i=ua(o,a)}if(s.dir==="desc"&&(i=i*-1),i!==0)break}return i}function w5(t,e,n){let i=tD(t,e,n);return t.inclusive?i>=0:i>0}function S5(t,e,n){let i=tD(t,e,n);return t.inclusive?i<=0:i<0}function oO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++){let i=t.position[n],r=e.position[n];if(!ai(i,r))return!1}return!0}var fa=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function T5(t){return t.field.canonicalString()+t.dir}function E5(t){return`${t.field.canonicalString()} (${t.dir})`}function M5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Bh=class{},ct=class t extends Bh{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Q0(e,n,i):n==="array-contains"?new X0(e,i):n==="in"?new Z0(e,i):n==="not-in"?new ey(e,i):n==="array-contains-any"?new ty(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Y0(e,i):new J0(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ua(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ci=class t extends Bh{constructor(e,n){super(),this.filters=e,this.op=n,this.memoizedFlattenedFilters=null}static create(e,n){return new t(e,n)}matches(e){return nD(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.memoizedFlattenedFilters!==null?this.memoizedFlattenedFilters:(this.memoizedFlattenedFilters=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[]),this.memoizedFlattenedFilters)}getFilters(){return Object.assign([],this.filters)}};function nD(t){return t.op==="and"}function iD(t){return O5(t)&&nD(t)}function O5(t){for(let e of t.filters)if(e instanceof ci)return!1;return!0}function K0(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+da(t.value);if(iD(t))return t.filters.map(e=>K0(e)).join(",");{let e=t.filters.map(n=>K0(n)).join(",");return`${t.op}(${e})`}}function rD(t,e){if(t instanceof ct)return D5(t,e);if(t instanceof ci)return P5(t,e);ne()}function D5(t,e){return e instanceof ct&&t.op===e.op&&t.field.isEqual(e.field)&&ai(t.value,e.value)}function P5(t,e){return e instanceof ci&&t.op===e.op&&t.filters.length===e.filters.length?t.filters.reduce((i,r,s)=>i&&rD(r,e.filters[s]),!0):!1}function sD(t){return t instanceof ct?x5(t):t instanceof ci?I5(t):"Filter"}function I5(t){return t.op.toString()+" {"+t.getFilters().map(sD).join(" ,")+"}"}function x5(t){return`${t.field.canonicalString()} ${t.op} ${da(t.value)}`}var Q0=class extends ct{constructor(e,n,i){super(e,n,i),this.key=X.fromName(i.referenceValue)}matches(e){let n=X.comparator(e.key,this.key);return this.matchesComparison(n)}},Y0=class extends ct{constructor(e,n){super(e,"in",n),this.keys=oD("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},J0=class extends ct{constructor(e,n){super(e,"not-in",n),this.keys=oD("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function oD(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>X.fromName(i.referenceValue))}var X0=class extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Tv(n)&&sc(n.arrayValue,this.value)}},Z0=class extends ct{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&sc(this.value.arrayValue,n)}},ey=class extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!sc(this.value.arrayValue,n)}},ty=class extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!Tv(n)||!n.arrayValue.values?!1:n.arrayValue.values.some(i=>sc(this.value.arrayValue,i))}};var ny=class{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}};function aO(t,e=null,n=[],i=[],r=null,s=null,o=null){return new ny(t,e,n,i,r,s,o)}function Ev(t){let e=ae(t);if(e.memoizedCanonicalId===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>K0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>T5(i)).join(","),lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>da(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>da(i)).join(",")),e.memoizedCanonicalId=n}return e.memoizedCanonicalId}function A5(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>sD(n)).join(", ")}]`),lf(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>E5(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>da(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>da(n)).join(",")),`Target(${e})`}function Mv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rD(t.filters[n],e.filters[n]))return!1;return t.collectionGroup!==e.collectionGroup||!t.path.isEqual(e.path)||!oO(t.startAt,e.startAt)?!1:oO(t.endAt,e.endAt)}function iy(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var js=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}};function k5(t,e,n,i,r,s,o,a){return new js(t,e,n,i,r,s,o,a)}function aD(t){return new js(t)}function R5(t,e){return new js(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function lO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function N5(t){let e=new Bt(Cn.comparator);return t.filters.forEach(n=>{n.getFlattenedFilters().forEach(r=>{r.isInequality()&&(e=e.add(r.field))})}),e}function F5(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function lD(t){return t.collectionGroup!==null}function oc(t){let e=ae(t);if(e.memoizedNormalizedOrderBy===null){e.memoizedNormalizedOrderBy=[];let n=new Set;for(let s of e.explicitOrderBy)e.memoizedNormalizedOrderBy.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";N5(e).forEach(s=>{!n.has(s.canonicalString())&&!s.isKeyField()&&e.memoizedNormalizedOrderBy.push(new fa(s,i))}),n.has(Cn.keyField().canonicalString())||e.memoizedNormalizedOrderBy.push(new fa(Cn.keyField(),i))}return e.memoizedNormalizedOrderBy}function Vi(t){let e=ae(t);return e.memoizedTarget||(e.memoizedTarget=L5(e,oc(t))),e.memoizedTarget}function L5(t,e){if(t.limitType==="F")return aO(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new fa(r.field,s)});let n=t.endAt?new ha(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ha(t.startAt.position,t.startAt.inclusive):null;return aO(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Ov(t,e){let n=t.filters.concat([e]);return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ry(t,e,n){return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cf(t,e){return Mv(Vi(t),Vi(e))&&t.limitType===e.limitType}function cD(t){return`${Ev(Vi(t))}|lt:${t.limitType}`}function ra(t){return`Query(target=${A5(Vi(t))}; limitType=${t.limitType})`}function uf(t,e){return e.isFoundDocument()&&B5(t,e)&&V5(t,e)&&U5(t,e)&&z5(t,e)}function B5(t,e){let n=e.key.path;return t.collectionGroup!==null?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):X.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}function V5(t,e){for(let n of oc(t))if(!n.field.isKeyField()&&e.data.field(n.field)===null)return!1;return!0}function U5(t,e){for(let n of t.filters)if(!n.matches(e))return!1;return!0}function z5(t,e){return!(t.startAt&&!S5(t.startAt,oc(t),e)||t.endAt&&!w5(t.endAt,oc(t),e))}function q5(t){return t.collectionGroup||(t.path.length%2===1?t.path.lastSegment():t.path.get(t.path.length-2))}function uD(t){return(e,n)=>{let i=!1;for(let r of oc(t)){let s=j5(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function j5(t,e,n){let i=t.field.isKeyField()?X.comparator(e.key,n.key):b5(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ne()}}var Xr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0){this.inner[i]=[[e,n]],this.innerSize++;return}for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e)){r[s]=[e,n];return}r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return $O(this.inner)}size(){return this.innerSize}};var G5=new Xe(X.comparator);function ar(){return G5}var dD=new Xe(X.comparator);function Xl(...t){let e=dD;for(let n of t)e=e.insert(n.key,n);return e}function H5(){return ac()}function hD(t){let e=dD;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Rs(){return ac()}function fD(){return ac()}function ac(){return new Xr(t=>t.toString(),(t,e)=>t.isEqual(e))}var W5=new Xe(X.comparator);function $5(){return W5}var K5=new Bt(X.comparator);function ye(...t){let e=K5;for(let n of t)e=e.add(n);return e}var Q5=new Bt(Ee);function Y5(){return Q5}function pD(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rc(e)?"-0":e}}function mD(t){return{integerValue:""+t}}function J5(t,e){return t5(e)?mD(e):pD(t,e)}var pa=class{constructor(){this._=void 0}};function X5(t,e,n){return t instanceof ma?ZV(n,e):t instanceof Gs?_D(t,e):t instanceof Hs?yD(t,e):t6(t,e)}function Z5(t,e,n){return t instanceof Gs?_D(t,e):t instanceof Hs?yD(t,e):n}function gD(t,e){return t instanceof ga?C5(e)?e:{integerValue:0}:null}function e6(t,e){return t instanceof Gs&&e instanceof Gs||t instanceof Hs&&e instanceof Hs?Us(t.elements,e.elements,ai):t instanceof ga&&e instanceof ga?ai(t.operand,e.operand):t instanceof ma&&e instanceof ma}var ma=class extends pa{},Gs=class extends pa{constructor(e){super(),this.elements=e}};function _D(t,e){let n=vD(e);for(let i of t.elements)n.some(r=>ai(r,i))||n.push(i);return{arrayValue:{values:n}}}var Hs=class extends pa{constructor(e){super(),this.elements=e}};function yD(t,e){let n=vD(e);for(let i of t.elements)n=n.filter(r=>!ai(r,i));return{arrayValue:{values:n}}}var ga=class extends pa{constructor(e,n){super(),this.serializer=e,this.operand=n}};function t6(t,e){let n=gD(t,e),i=cO(n)+cO(t.operand);return $0(n)&&$0(t.operand)?mD(i):pD(t.serializer,i)}function cO(t){return Je(t.integerValue||t.doubleValue)}function vD(t){return Tv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function n6(t,e){return t.field.isEqual(e.field)&&e6(t.transform,e.transform)}function i6(t,e){return t===void 0&&e===void 0?!0:t&&e?Us(t,e,(n,i)=>n6(n,i)):!1}var sy=class{constructor(e,n){this.version=e,this.transformResults=n}},Ls=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists!==void 0?t.exists===e.isFoundDocument():!0}var _a=class{};function CD(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vh(t.key,Ls.none()):new Ws(t.key,t.data,Ls.none());{let n=t.data,i=oi.empty(),r=new Bt(Cn.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new lr(t.key,i,new Li(r.toArray()),Ls.none())}}function r6(t,e,n){t instanceof Ws?o6(t,e,n):t instanceof lr?l6(t,e,n):u6(t,e,n)}function tc(t,e,n,i){return t instanceof Ws?a6(t,e,n,i):t instanceof lr?c6(t,e,n,i):d6(t,e,n)}function s6(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=gD(i.transform,r||null);s!=null&&(n===null&&(n=oi.empty()),n.set(i.field,s))}return n||null}function uO(t,e){return t.type!==e.type||!t.key.isEqual(e.key)||!t.precondition.isEqual(e.precondition)||!i6(t.fieldTransforms,e.fieldTransforms)?!1:t.type===0?t.value.isEqual(e.value):t.type===1?t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask):!0}var Ws=class extends _a{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}};function o6(t,e,n){let i=t.value.clone(),r=wD(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}function a6(t,e,n,i){if(!df(t.precondition,e))return n;let r=t.value.clone(),s=SD(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}var lr=class extends _a{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function l6(t,e,n){if(!df(t.precondition,e)){e.convertToUnknownDocument(n.version);return}let i=wD(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(bD(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}function c6(t,e,n,i){if(!df(t.precondition,e))return n;let r=SD(t.fieldTransforms,i,e),s=e.data;return s.setAll(bD(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),n===null?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map(o=>o.field))}function bD(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function wD(t,e,n){let i=new Map;Fe(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Z5(o,a,n[r]))}return i}function SD(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,X5(s,o,e))}return i}var Vh=class extends _a{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};function u6(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}function d6(t,e,n){return df(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}var oy=class extends _a{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ay=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];if(s.key.isEqual(e.key)){let o=i[r];r6(s,e,o)}}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=tc(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=tc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=fD();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let l=CD(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,(n,i)=>uO(n,i))&&Us(this.baseMutations,e.baseMutations,(n,i)=>uO(n,i))}},ly=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Fe(e.mutations.length===i.length);let r=$5(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var cy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var uy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var yt=function(t){return t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t}(yt||{});function h6(t){switch(t){case O.OK:return ne();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return ne()}}function f6(t){return h6(t)&&t!==O.ABORTED}function xh(t){if(t===void 0)return Hn("GRPC error has no .code"),O.UNKNOWN;switch(t){case yt.OK:return O.OK;case yt.CANCELLED:return O.CANCELLED;case yt.UNKNOWN:return O.UNKNOWN;case yt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case yt.INTERNAL:return O.INTERNAL;case yt.UNAVAILABLE:return O.UNAVAILABLE;case yt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case yt.NOT_FOUND:return O.NOT_FOUND;case yt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case yt.ABORTED:return O.ABORTED;case yt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case yt.DATA_LOSS:return O.DATA_LOSS;default:return ne()}}var dy=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var O0=null;function p6(){return new wV}var m6=new ws([4294967295,4294967295],0);function dO(t){let e=p6().encode(t),n=new Cw;return n.update(e),new Uint8Array(n.digest())}function hO(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0),o=new ws([n,i],0),a=new ws([r,s],0);return[o,a]}var hy=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ns(`Invalid padding: ${n}`);if(i<0)throw new Ns(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ns(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ns(`Invalid padding when bitmap length is 0: ${n}`);this.bitCount=e.length*8-n,this.bitCountInInteger=ws.fromNumber(this.bitCount)}getBitIndex(e,n,i){let r=e.add(n.multiply(ws.fromNumber(i)));return r.compare(m6)===1&&(r=new ws([r.getBits(0),r.getBits(1)],0)),r.modulo(this.bitCountInInteger).toNumber()}isBitSet(e){let n=this.bitmap[Math.floor(e/8)],i=e%8;return(n&1<<i)!==0}mightContain(e){if(this.bitCount===0)return!1;let n=dO(e),[i,r]=hO(n);for(let s=0;s<this.hashCount;s++){let o=this.getBitIndex(i,r,s);if(!this.isBitSet(o))return!1}return!0}static create(e,n,i){let r=e%8===0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.bitCount===0)return;let n=dO(e),[i,r]=hO(n);for(let s=0;s<this.hashCount;s++){let o=this.getBitIndex(i,r,s);this.setBit(o)}}setBit(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Ns=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Uh=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(ce.min(),r,new Xe(Ee),ar(),ye())}},lc=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,ye(),ye(),ye())}};var ca=class{constructor(e,n,i,r){this.updatedTargetIds=e,this.removedTargetIds=n,this.key=i,this.newDoc=r}},zh=class{constructor(e,n){this.targetId=e,this.existenceFilter=n}},qh=class{constructor(e,n,i=Jt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},jh=class{constructor(){this.pendingResponses=0,this.documentChanges=pO(),this._resumeToken=Jt.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return this.pendingResponses!==0}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=ye(),n=ye(),i=ye();return this.documentChanges.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ne()}}),new lc(this._resumeToken,this._current,e,n,i)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=pO()}addDocumentChange(e,n){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,n)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,Fe(this.pendingResponses>=0)}markCurrent(){this._hasPendingChanges=!0,this._current=!0}},g6="WatchChangeAggregator",fy=class{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=ar(),this.pendingDocumentTargetMapping=fO(),this.pendingTargetResets=new Xe(Ee)}handleDocumentChange(e){for(let n of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(n,e.newDoc):this.removeDocumentFromTarget(n,e.key,e.newDoc);for(let n of e.removedTargetIds)this.removeDocumentFromTarget(n,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,n=>{let i=this.ensureTargetState(n);switch(e.state){case 0:this.isActiveTarget(n)&&i.updateResumeToken(e.resumeToken);break;case 1:i.recordTargetResponse(),i.isPending||i.clearPendingChanges(),i.updateResumeToken(e.resumeToken);break;case 2:i.recordTargetResponse(),i.isPending||this.removeTarget(n);break;case 3:this.isActiveTarget(n)&&(i.markCurrent(),i.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(n)&&(this.resetTarget(n),i.updateResumeToken(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.targetStates.forEach((i,r)=>{this.isActiveTarget(r)&&n(r)})}handleExistenceFilter(e){let n=e.targetId,i=e.existenceFilter.count,r=this.targetDataForActiveTarget(n);if(r){let s=r.target;if(iy(s))if(i===0){let o=new X(s.path);this.removeDocumentFromTarget(n,o,li.newNoDocument(o,ce.min()))}else Fe(i===1);else{let o=this.getCurrentDocumentCountForTarget(n);if(o!==i){let a=this.parseBloomFilter(e),l=a?this.applyBloomFilter(a,e,o):1;if(l!==0){this.resetTarget(n);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(n,c)}O0?.notifyOnExistenceFilterMismatch(_6(o,e.existenceFilter,this.metadataProvider.getDatabaseId(),a,l))}}}}parseBloomFilter(e){let n=e.existenceFilter.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o;try{o=Jr(i).toUint8Array()}catch(l){if(l instanceof dy)return la("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}let a;try{a=new hy(o,r,s)}catch(l){return l instanceof Ns?la("BloomFilter error: ",l):la("Applying bloom filter failed: ",l),null}return a.bitCount===0?null:a}applyBloomFilter(e,n,i){let r=n.existenceFilter.count,s=this.filterRemovedDocuments(e,n.targetId);return r===i-s?0:2}filterRemovedDocuments(e,n){let i=this.metadataProvider.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.metadataProvider.getDatabaseId(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.removeDocumentFromTarget(n,s,null),r++)}),r}createRemoteEvent(e){let n=new Map;this.targetStates.forEach((s,o)=>{let a=this.targetDataForActiveTarget(o);if(a){if(s.current&&iy(a.target)){let l=new X(a.target.path);this.pendingDocumentUpdates.get(l)===null&&!this.targetContainsDocument(o,l)&&this.removeDocumentFromTarget(o,l,li.newNoDocument(l,e))}s.hasPendingChanges&&(n.set(o,s.toTargetChange()),s.clearPendingChanges())}});let i=ye();this.pendingDocumentTargetMapping.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.targetDataForActiveTarget(l);return c&&c.purpose!=="TargetPurposeLimboResolution"?(a=!1,!1):!0}),a&&(i=i.add(s))}),this.pendingDocumentUpdates.forEach((s,o)=>o.setReadTime(e));let r=new Uh(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,i);return this.pendingDocumentUpdates=ar(),this.pendingDocumentTargetMapping=fO(),this.pendingTargetResets=new Xe(Ee),r}addDocumentToTarget(e,n){if(!this.isActiveTarget(e))return;let i=this.targetContainsDocument(e,n.key)?2:0;this.ensureTargetState(e).addDocumentChange(n.key,i),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(n.key,n),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(n.key,this.ensureDocumentTargetMapping(n.key).add(e))}removeDocumentFromTarget(e,n,i){if(!this.isActiveTarget(e))return;let r=this.ensureTargetState(e);this.targetContainsDocument(e,n)?r.addDocumentChange(n,1):r.removeDocumentChange(n),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(n,this.ensureDocumentTargetMapping(n).delete(e)),i&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(n,i))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let i=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let n=this.targetStates.get(e);return n||(n=new jh,this.targetStates.set(e,n)),n}ensureDocumentTargetMapping(e){let n=this.pendingDocumentTargetMapping.get(e);return n||(n=new Bt(Ee),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,n)),n}isActiveTarget(e){let n=this.targetDataForActiveTarget(e)!==null;return n||z(g6,"Detected inactive target",e),n}targetDataForActiveTarget(e){let n=this.targetStates.get(e);return n&&n.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new jh),this.metadataProvider.getRemoteKeysForTarget(e).forEach(i=>{this.removeDocumentFromTarget(e,i,null)})}targetContainsDocument(e,n){return this.metadataProvider.getRemoteKeysForTarget(e).has(n)}};function fO(){return new Xe(X.comparator)}function pO(){return new Xe(X.comparator)}function _6(t,e,n,i,r){var s,o,a,l,c,u;let f={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},g=e.unchangedNames;return g&&(f.bloomFilter={applied:r===0,hashCount:(s=g?.hashCount)!==null&&s!==void 0?s:0,bitmapLength:(l=(a=(o=g?.bits)===null||o===void 0?void 0:o.bitmap)===null||a===void 0?void 0:a.length)!==null&&l!==void 0?l:0,padding:(u=(c=g?.bits)===null||c===void 0?void 0:c.padding)!==null&&u!==void 0?u:0,mightContain:_=>{var C;return(C=i?.mightContain(_))!==null&&C!==void 0?C:!1}}),f}var y6=(()=>{let t={};return t.asc="ASCENDING",t.desc="DESCENDING",t})(),v6=(()=>{let t={};return t["<"]="LESS_THAN",t["<="]="LESS_THAN_OR_EQUAL",t[">"]="GREATER_THAN",t[">="]="GREATER_THAN_OR_EQUAL",t["=="]="EQUAL",t["!="]="NOT_EQUAL",t["array-contains"]="ARRAY_CONTAINS",t.in="IN",t["not-in"]="NOT_IN",t["array-contains-any"]="ARRAY_CONTAINS_ANY",t})(),C6=(()=>{let t={};return t.and="AND",t.or="OR",t})();var py=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function b6(t){let e=t.code===void 0?O.UNKNOWN:xh(t.code);return new G(e,t.message||"")}function my(t,e){return t.useProto3Json||lf(e)?e:{value:e}}function w6(t){let e;return typeof t=="object"?e=t.value:e=t,lf(e)?null:e}function Gh(t,e){if(t.useProto3Json){let i=new Date(e.seconds*1e3).toISOString().replace(/\.\d*/,"").replace("Z",""),r=("000000000"+e.nanoseconds).slice(-9);return`${i}.${r}Z`}else return{seconds:""+e.seconds,nanos:e.nanoseconds}}function S6(t){let e=Yr(t);return new Tt(e.seconds,e.nanos)}function TD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T6(t,e){return t.useProto3Json?(Fe(e===void 0||typeof e=="string"),Jt.fromBase64String(e||"")):(Fe(e===void 0||e instanceof Uint8Array),Jt.fromUint8Array(e||new Uint8Array))}function E6(t,e){return Gh(t,e.toTimestamp())}function Ui(t){return Fe(!!t),ce.fromTimestamp(S6(t))}function Dv(t,e){return gy(t,e).canonicalString()}function gy(t,e){let n=O6(t).child("documents");return e===void 0?n:n.child(e)}function ED(t){let e=We.fromString(t);return Fe(ID(e)),e}function _y(t,e){return Dv(t.databaseId,e.path)}function D0(t,e){let n=ED(e);if(n.get(1)!==t.databaseId.projectId)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(OD(n))}function MD(t,e){return Dv(t.databaseId,e)}function M6(t){let e=ED(t);return e.length===4?We.emptyPath():OD(e)}function yy(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O6(t){return new We(["projects",t.projectId,"databases",t.database])}function OD(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function mO(t,e,n){return{name:_y(t,e),fields:n.value.mapValue.fields}}function D6(t,e){let n;if("targetChange"in e){e.targetChange;let i=P6(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=T6(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&b6(o);n=new qh(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=D0(t,i.document.name),s=Ui(i.document.updateTime),o=i.document.createTime?Ui(i.document.createTime):ce.min(),a=new oi({mapValue:{fields:i.document.fields}}),l=li.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new ca(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=D0(t,i.document),s=i.readTime?Ui(i.readTime):ce.min(),o=li.newNoDocument(r,s),a=i.removedTargetIds||[];n=new ca([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=D0(t,i.document),s=i.removedTargetIds||[];n=new ca([],s,r,null)}else if("filter"in e){e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new uy(r,s),a=i.targetId;n=new zh(a,o)}else return ne();return n}function P6(t){return t==="NO_CHANGE"?0:t==="ADD"?1:t==="REMOVE"?2:t==="CURRENT"?3:t==="RESET"?4:ne()}function I6(t){if(!("targetChange"in t))return ce.min();let e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?ce.min():Ui(e.readTime)}function x6(t,e){let n;if(e instanceof Ws)n={update:mO(t,e.key,e.value)};else if(e instanceof Vh)n={delete:_y(t,e.key)};else if(e instanceof lr)n={update:mO(t,e.key,e.data),updateMask:c8(e.fieldMask)};else if(e instanceof oy)n={verify:_y(t,e.key)};else return ne();return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>N6(t,i))),e.precondition.isNone||(n.currentDocument=A6(t,e.precondition)),n}function A6(t,e){return e.updateTime!==void 0?{updateTime:E6(t,e.updateTime)}:e.exists!==void 0?{exists:e.exists}:ne()}function k6(t,e){let n=t.updateTime?Ui(t.updateTime):Ui(e);return n.isEqual(ce.min())&&(n=Ui(e)),new sy(n,t.transformResults||[])}function R6(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>k6(n,e))):[]}function N6(t,e){let n=e.transform;if(n instanceof ma)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gs)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Hs)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ga)return{fieldPath:e.field.canonicalString(),increment:n.operand};throw ne()}function F6(t,e){return{documents:[MD(t,e.path)]}}function L6(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=MD(t,r);let s=q6(e.filters);s&&(n.structuredQuery.where=s);let o=G6(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=my(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=W6(e.startAt)),e.endAt&&(n.structuredQuery.endAt=$6(e.endAt)),{queryTarget:n,parent:r}}function B6(t){let e=M6(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Fe(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=j6(n.where));let o=[];n.orderBy&&(o=H6(n.orderBy));let a=null;n.limit&&(a=w6(n.limit));let l=null;n.startAt&&(l=K6(n.startAt));let c=null;return n.endAt&&(c=Q6(n.endAt)),k5(e,r,o,s,a,"F",l,c)}function V6(t,e){let n=U6(e.purpose);return n==null?null:{"goog-listen-tags":n}}function U6(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}function z6(t,e){let n,i=e.target;if(iy(i)?n={documents:F6(t,i)}:n={query:L6(t,i).queryTarget},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=TD(t,e.resumeToken);let r=my(t,e.expectedCount);r!==null&&(n.expectedCount=r)}else if(e.snapshotVersion.compareTo(ce.min())>0){n.readTime=Gh(t,e.snapshotVersion.toTimestamp());let r=my(t,e.expectedCount);r!==null&&(n.expectedCount=r)}return n}function q6(t){if(t.length!==0)return PD(ci.create(t,"and"))}function j6(t){let e=DD(t);return e instanceof ci&&iD(e)?e.getFilters():[e]}function DD(t){return t.unaryFilter!==void 0?o8(t):t.fieldFilter!==void 0?a8(t):t.compositeFilter!==void 0?l8(t):ne()}function G6(t){if(t.length!==0)return t.map(e=>n8(e))}function H6(t){return t.map(e=>i8(e))}function W6(t){return{before:t.inclusive,values:t.position}}function $6(t){return{before:!t.inclusive,values:t.position}}function K6(t){let e=!!t.before,n=t.values||[];return new ha(n,e)}function Q6(t){let e=!t.before,n=t.values||[];return new ha(n,e)}function Y6(t){return y6[t]}function J6(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function X6(t){return v6[t]}function Z6(t){return C6[t]}function e8(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne();default:return ne()}}function t8(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ne()}}function sa(t){return{fieldPath:t.canonicalString()}}function aa(t){return Cn.fromServerFormat(t.fieldPath)}function n8(t){return{field:sa(t.field),direction:Y6(t.dir)}}function i8(t){return new fa(aa(t.field),J6(t.direction))}function PD(t){return t instanceof ct?s8(t):t instanceof ci?r8(t):ne()}function r8(t){let e=t.getFilters().map(n=>PD(n));return e.length===1?e[0]:{compositeFilter:{op:Z6(t.op),filters:e}}}function s8(t){if(t.op==="=="){if(sO(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NAN"}};if(rO(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sO(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NAN"}};if(rO(t.value))return{unaryFilter:{field:sa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(t.field),op:X6(t.op),value:t.value}}}function o8(t){switch(t.unaryFilter.op){case"IS_NAN":let e=aa(t.unaryFilter.field);return ct.create(e,"==",{doubleValue:NaN});case"IS_NULL":let n=aa(t.unaryFilter.field);return ct.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let i=aa(t.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let r=aa(t.unaryFilter.field);return ct.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne();default:return ne()}}function a8(t){return ct.create(aa(t.fieldFilter.field),e8(t.fieldFilter.op),t.fieldFilter.value)}function l8(t){return ci.create(t.compositeFilter.filters.map(e=>DD(e)),t8(t.compositeFilter.op))}function c8(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ID(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var cc=class t{constructor(e,n,i,r,s=ce.min(),o=ce.min(),a=Jt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var vy=class{constructor(e){this.remoteSerializer=e}};function u8(t){let e=B6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ry(e,e.limit,"L"):e}function d8(t){return{name:t.name,query:u8(t.bundledQuery),readTime:Ui(t.readTime)}}function h8(t){return{id:t.id,version:t.version,createTime:Ui(t.createTime)}}var f8=5,p8=10,m8=13,gO=15,g8=20,_8=25,y8=30,v8=37,C8=45,b8=50,w8=55,S8=60,T8=2,Hh=class{constructor(){}writeIndexValue(e,n){this.writeIndexValueAux(e,n),n.writeInfinity()}writeIndexValueAux(e,n){if("nullValue"in e)this.writeValueTypeLabel(n,f8);else if("booleanValue"in e)this.writeValueTypeLabel(n,p8),n.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(n,gO),n.writeNumber(Je(e.integerValue));else if("doubleValue"in e){let i=Je(e.doubleValue);isNaN(i)?this.writeValueTypeLabel(n,m8):(this.writeValueTypeLabel(n,gO),rc(i)?n.writeNumber(0):n.writeNumber(i))}else if("timestampValue"in e){let i=e.timestampValue;this.writeValueTypeLabel(n,g8),typeof i=="string"?n.writeString(i):(n.writeString(`${i.seconds||""}`),n.writeNumber(i.nanos||0))}else if("stringValue"in e)this.writeIndexString(e.stringValue,n),this.writeTruncationMarker(n);else if("bytesValue"in e)this.writeValueTypeLabel(n,y8),n.writeBytes(Jr(e.bytesValue)),this.writeTruncationMarker(n);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.writeValueTypeLabel(n,C8),n.writeNumber(i.latitude||0),n.writeNumber(i.longitude||0)}else"mapValue"in e?ZO(e)?this.writeValueTypeLabel(n,Number.MAX_SAFE_INTEGER):(this.writeIndexMap(e.mapValue,n),this.writeTruncationMarker(n)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,n),this.writeTruncationMarker(n)):ne()}writeIndexString(e,n){this.writeValueTypeLabel(n,_8),this.writeUnlabeledIndexString(e,n)}writeUnlabeledIndexString(e,n){n.writeString(e)}writeIndexMap(e,n){let i=e.fields||{};this.writeValueTypeLabel(n,w8);for(let r of Object.keys(i))this.writeIndexString(r,n),this.writeIndexValueAux(i[r],n)}writeIndexArray(e,n){let i=e.values||[];this.writeValueTypeLabel(n,b8);for(let r of i)this.writeIndexValueAux(r,n)}writeIndexEntityRef(e,n){this.writeValueTypeLabel(n,v8),X.fromName(e).path.forEach(r=>{this.writeValueTypeLabel(n,S8),this.writeUnlabeledIndexString(r,n)})}writeValueTypeLabel(e,n){e.writeNumber(n)}writeTruncationMarker(e){e.writeNumber(T8)}};Hh.INSTANCE=new Hh;var Cy=class{constructor(){this.collectionParentIndex=new by}addToCollectionParentIndex(e,n){return this.collectionParentIndex.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.collectionParentIndex.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(zs.min())}updateCollectionGroup(e,n,i){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},by=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Bt(We.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Bt(We.comparator)).toArray()}};var K$=new Uint8Array(0);var P0=2,uc=class t{constructor(e){this.lastId=e}next(){return this.lastId+=P0,this.lastId}static forTargetCache(){return new t(2-P0)}static forSyncEngine(){return new t(1-P0)}};var xD=-1,AD=40*1024*1024,Bi=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Bi.DEFAULT_COLLECTION_PERCENTILE=10;Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3;Bi.DEFAULT=new Bi(AD,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);Bi.DISABLED=new Bi(xD,0,0);var _O=1*1024*1024,Q$=1*60*1e3,Y$=5*60*1e3;var wy=class{constructor(){this.changes=new Xr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,li.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?x.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Sy=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Ty=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&tc(i.mutation,r,Li.empty(),Tt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ye()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ye()){let r=Rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=Xl();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Rs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ye()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ar(),o=ac(),a=H5();return n.forEach((l,c)=>{let u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof lr)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),tc(u.mutation,c,u.mutation.getFieldMask(),Tt.now())):o.set(c.key,Li.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new Sy(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let i=ac(),r=new Xe((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=n.get(l);if(c===null)return;let u=i.get(l)||Li.empty();u=a.applyToLocalView(c,u),i.set(l,u);let f=(r.get(a.batchId)||ye()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,u=l.value,f=fD();u.forEach(g=>{if(!s.has(g)){let _=CD(n.get(g),i.get(g));_!==null&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return x.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return F5(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):lD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):x.resolve(Rs()),a=nc,l=s;return o.next(c=>x.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?x.resolve():this.remoteDocumentCache.getEntry(e,u).next(g=>{l=l.insert(u,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ye())).next(u=>({batchId:a,changes:hD(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(i=>{let r=Xl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=Xl();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,l=>{let c=R5(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{let u=c.getKey();o.get(u)===null&&(o=o.insert(u,li.newInvalidDocument(u)))});let a=Xl();return o.forEach((l,c)=>{let u=s.get(l);u!==void 0&&tc(u.mutation,c,Li.empty(),Tt.now()),uf(n,c)&&(a=a.insert(l,c))}),a})}};var Ey=class{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,n){return x.resolve(this.bundles.get(n))}saveBundleMetadata(e,n){return this.bundles.set(n.id,h8(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.namedQueries.get(n))}saveNamedQuery(e,n){return this.namedQueries.set(n.name,d8(n)),x.resolve()}};var My=class{constructor(){this.overlays=new Xe(X.comparator),this.overlayByBatchId=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Rs();return x.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.saveOverlay(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.overlayByBatchId.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.overlayByBatchId.delete(i)),x.resolve()}getOverlaysForCollection(e,n,i){let r=Rs(),s=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return x.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Xe((c,u)=>c-u),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let g=s.get(u.largestBatchId);g===null&&(g=Rs(),s=s.insert(u.largestBatchId,g)),g.set(u.getKey(),u)}}let a=Rs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((f,g)=>a.set(f,g)),!(a.size()>=r)););return x.resolve(a)}saveOverlay(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.overlayByBatchId.get(r.largestBatchId).delete(i.key);this.overlayByBatchId.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new cy(n,i));let s=this.overlayByBatchId.get(n);s===void 0&&(s=ye(),this.overlayByBatchId.set(n,s)),this.overlayByBatchId.set(n,s.add(i.key))}};var dc=class{constructor(){this.refsByKey=new Bt(lt.compareByKey),this.refsByTarget=new Bt(lt.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,n){let i=new lt(e,n);this.refsByKey=this.refsByKey.add(i),this.refsByTarget=this.refsByTarget.add(i)}addReferences(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.removeRef(new lt(e,n))}removeReferences(e,n){e.forEach(i=>this.removeReference(i,n))}removeReferencesForId(e){let n=new X(new We([])),i=new lt(n,e),r=new lt(n,e+1),s=[];return this.refsByTarget.forEachInRange([i,r],o=>{this.removeRef(o),s.push(o.key)}),s}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let n=new X(new We([])),i=new lt(n,e),r=new lt(n,e+1),s=ye();return this.refsByTarget.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new lt(e,0),i=this.refsByKey.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},lt=class{constructor(e,n){this.key=e,this.targetOrBatchId=n}static compareByKey(e,n){return X.comparator(e.key,n.key)||Ee(e.targetOrBatchId,n.targetOrBatchId)}static compareByTargetId(e,n){return Ee(e.targetOrBatchId,n.targetOrBatchId)||X.comparator(e.key,n.key)}};var Oy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new Bt(lt.compareByKey)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ay(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.findMutationBatch(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.indexOfBatchId(i),s=r<0?0:r;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?wv:this.nextBatchId-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new lt(n,0),r=new lt(n,Number.POSITIVE_INFINITY),s=[];return this.batchesByDocumentKey.forEachInRange([i,r],o=>{let a=this.findMutationBatch(o.targetOrBatchId);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Bt(Ee);return n.forEach(r=>{let s=new lt(r,0),o=new lt(r,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([s,o],a=>{i=i.add(a.targetOrBatchId)})}),x.resolve(this.findMutationBatches(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;X.isDocumentKey(s)||(s=s.child(""));let o=new lt(new X(s),0),a=new Bt(Ee);return this.batchesByDocumentKey.forEachWhile(l=>{let c=l.key.path;return i.isPrefixOf(c)?(c.length===r&&(a=a.add(l.targetOrBatchId)),!0):!1},o),x.resolve(this.findMutationBatches(a))}findMutationBatches(e){let n=[];return e.forEach(i=>{let r=this.findMutationBatch(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){let i=this.indexOfExistingBatchId(n.batchId,"removed");Fe(i===0),this.mutationQueue.shift();let r=this.batchesByDocumentKey;return x.forEach(n.mutations,s=>{let o=new lt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.batchesByDocumentKey=r})}removeCachedMutationKeys(e){}containsKey(e,n){let i=new lt(n,0),r=this.batchesByDocumentKey.firstAfterOrEqual(i);return x.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}indexOfExistingBatchId(e,n){return this.indexOfBatchId(e)}indexOfBatchId(e){if(this.mutationQueue.length===0)return 0;let n=this.mutationQueue[0].batchId;return e-n}findMutationBatch(e){let n=this.indexOfBatchId(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};function E8(){return new Xe(X.comparator)}var Dy=class{constructor(e){this.sizer=e,this.docs=E8(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.sizer(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return x.resolve(i?i.document.mutableCopy():li.newInvalidDocument(n))}getEntries(e,n){let i=ar();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():li.newInvalidDocument(r))}),x.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ar(),o=n.path,a=new X(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||AV(xV(u),i)<=0||!r.has(u.key)&&!uf(n,u)||(s=s.insert(u.key,u.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ne()}forEachDocumentKey(e,n){return x.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Py(this)}getSize(e){return x.resolve(this.size)}};function M8(t){return new Dy(t)}var Py=class extends wy{constructor(e){super(),this.documentCache=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.documentCache.addEntry(e,r)):this.documentCache.removeEntry(i)}),x.waitFor(n)}getFromCache(e,n){return this.documentCache.getEntry(e,n)}getAllFromCache(e,n){return this.documentCache.getEntries(e,n)}};var Iy=class{constructor(e){this.persistence=e,this.targets=new Xr(n=>Ev(n),Mv),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new dc,this.targetCount=0,this.targetIdGenerator=uc.forTargetCache()}forEachTarget(e,n){return this.targets.forEach((i,r)=>n(r)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.highestSequenceNumber&&(this.highestSequenceNumber=n),x.resolve()}saveTargetData(e){this.targets.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.targetIdGenerator=new uc(n),this.highestTargetId=n),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,n){return this.saveTargetData(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.saveTargetData(n),x.resolve()}removeTargetData(e,n){return this.targets.delete(n.target),this.references.removeReferencesForId(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.targets.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.targets.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),x.waitFor(s).next(()=>r)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let i=this.targets.get(n)||null;return x.resolve(i)}addMatchingKeys(e,n,i){return this.references.addReferences(n,i),x.resolve()}removeMatchingKeys(e,n,i){this.references.removeReferences(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.references.removeReferencesForId(n),x.resolve()}getMatchingKeysForTargetId(e,n){let i=this.references.referencesForId(n);return x.resolve(i)}containsKey(e,n){return x.resolve(this.references.containsKey(n))}};var O8="MemoryPersistence",xy=class{constructor(e,n){this.mutationQueues={},this.overlays={},this.listenSequence=new kO(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new Iy(this);let i=r=>this.referenceDelegate.documentSize(r);this.indexManager=new Cy,this.remoteDocumentCache=M8(i),this.serializer=new vy(n),this.bundleCache=new Ey(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new My,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.mutationQueues[e.toKey()];return i||(i=new Oy(n,this.referenceDelegate),this.mutationQueues[e.toKey()]=i),i}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,n,i){z(O8,"Starting transaction:",e);let r=new Ay(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),i(r).next(s=>this.referenceDelegate.onTransactionCommitted(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}mutationQueuesContainKey(e,n){return x.or(Object.values(this.mutationQueues).map(i=>()=>i.containsKey(e,n)))}},Ay=class extends U0{constructor(e){super(),this.currentSequenceNumber=e}},ky=class t{constructor(e){this.persistence=e,this.localViewReferences=new dc,this._orphanedDocuments=null}static factory(e){return new t(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw ne()}addReference(e,n,i){return this.localViewReferences.addReference(i,n),this.orphanedDocuments.delete(i.toString()),x.resolve()}removeReference(e,n,i){return this.localViewReferences.removeReference(i,n),this.orphanedDocuments.add(i.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.orphanedDocuments.add(n.toString()),x.resolve()}removeTarget(e,n){this.localViewReferences.removeReferencesForId(n.targetId).forEach(s=>this.orphanedDocuments.add(s.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.orphanedDocuments.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.orphanedDocuments,r=>{let s=X.fromPath(r);return this.isReferenced(e,s).next(o=>{o||i.removeEntry(s,ce.min())})}).next(()=>(this._orphanedDocuments=null,i.apply(e)))}updateLimboDocument(e,n){return this.isReferenced(e,n).next(i=>{i?this.orphanedDocuments.delete(n.toString()):this.orphanedDocuments.add(n.toString())})}documentSize(e){return 0}isReferenced(e,n){return x.or([()=>x.resolve(this.localViewReferences.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.mutationQueuesContainKey(e,n)])}};var J$=30*60*1e3;var Pv="LocalStore",D8=5*60*1e6,Ry=class{constructor(e,n,i,r){this.persistence=e,this.queryEngine=n,this.serializer=r,this.targetDataByTarget=new Xe(Ee),this.targetIdByTarget=new Xr(s=>Ev(s),Mv),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(i)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ty(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.targetDataByTarget))}};function P8(t,e,n,i){return new Ry(t,e,n,i)}function kD(t,e){return T(this,null,function*(){let n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.initializeUserComponents(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],l=[],c=ye();for(let u of s){a.push(u.batchId);for(let f of u.mutations)c=c.add(f.key)}for(let u of o){l.push(u.batchId);for(let f of u.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(u=>({affectedDocuments:u,removedBatchIds:a,addedBatchIds:l}))})})})}function I8(t,e){let n=ae(t),i=Tt.now(),r=e.reduce((a,l)=>a.add(l.key),ye()),s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",a=>{let l=ar(),c=ye();return n.remoteDocuments.getEntries(a,r).next(u=>{l=u,l.forEach((f,g)=>{g.isValidDocument()||(c=c.add(f))})}).next(()=>n.localDocuments.getOverlayedDocuments(a,l)).next(u=>{s=u;let f=[];for(let g of e){let _=s6(g,s.get(g.key).overlayedDocument);_!=null&&f.push(new lr(g.key,_,eD(_.value.mapValue),Ls.exists(!0)))}return n.mutationQueue.addMutationBatch(a,i,f,e)}).next(u=>{o=u;let f=u.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(a,u.batchId,f)})}).then(()=>({batchId:o.batchId,changes:hD(s)}))}function x8(t,e){let n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});return z8(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,A8(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function A8(t){let e=ye();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}function k8(t,e){let n=ae(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",i=>{let r;return n.mutationQueue.lookupMutationBatch(i,e).next(s=>(Fe(s!==null),r=s.keys(),n.mutationQueue.removeMutationBatch(i,s))).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,r)).next(()=>n.localDocuments.getDocuments(i,r))})}function RD(t){let e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.targetCache.getLastRemoteSnapshotVersion(n))}function R8(t,e){let n=ae(t),i=e.snapshotVersion,r=n.targetDataByTarget;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=n.targetDataByTarget;let a=[];e.targetChanges.forEach((u,f)=>{let g=r.get(f);if(!g)return;a.push(n.targetCache.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.targetCache.addMatchingKeys(s,u.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Jt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):u.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(u.resumeToken,i)),r=r.insert(f,_),F8(g,_,u)&&a.push(n.targetCache.updateTargetData(s,_))});let l=ar(),c=ye();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(N8(s,o,e.documentUpdates).next(u=>{l=u.changedDocuments,c=u.existenceChangedKeys})),!i.isEqual(ce.min())){let u=n.targetCache.getLastRemoteSnapshotVersion(s).next(f=>n.targetCache.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.targetDataByTarget=r,s))}function N8(t,e,n){let i=ye(),r=ye();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ar();return n.forEach((a,l)=>{let c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z(Pv,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{changedDocuments:o,existenceChangedKeys:r}})}function F8(t,e,n){return t.resumeToken.approximateByteSize()===0||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=D8?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}function L8(t,e){return T(this,null,function*(){let n=ae(t);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",i=>x.forEach(e,r=>x.forEach(r.addedKeys,s=>n.persistence.referenceDelegate.addReference(i,r.targetId,s)).next(()=>x.forEach(r.removedKeys,s=>n.persistence.referenceDelegate.removeReference(i,r.targetId,s)))))}catch(i){if(yc(i))z(Pv,"Failed to update sequence numbers: "+i);else throw i}for(let i of e){let r=i.targetId;if(!i.fromCache){let s=n.targetDataByTarget.get(r),o=s.snapshotVersion,a=s.withLastLimboFreeSnapshotVersion(o);n.targetDataByTarget=n.targetDataByTarget.insert(r,a)}}})}function B8(t,e){let n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=wv),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function V8(t,e){let n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.targetCache.getTargetData(i,e).next(s=>s?(r=s,x.resolve(r)):n.targetCache.allocateTargetId(i).next(o=>(r=new cc(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.targetCache.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.targetDataByTarget.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.targetDataByTarget=n.targetDataByTarget.insert(i.targetId,i),n.targetIdByTarget.set(e,i.targetId)),i})}function U8(t,e,n){let i=ae(t),r=i.targetIdByTarget.get(n);return r!==void 0?x.resolve(i.targetDataByTarget.get(r)):i.targetCache.getTargetData(e,n)}function Ny(t,e,n){return T(this,null,function*(){let i=ae(t),r=i.targetDataByTarget.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(yc(o))z(Pv,`Failed to update sequence numbers for target ${e}: ${o}`);else throw o}i.targetDataByTarget=i.targetDataByTarget.remove(e),i.targetIdByTarget.delete(r.target)})}function ND(t,e,n){let i=ae(t),r=ce.min(),s=ye();return i.persistence.runTransaction("Execute query","readwrite",o=>U8(i,o,Vi(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.targetCache.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.queryEngine.getDocumentsMatchingQuery(o,e,n?r:ce.min(),n?s:ye())).next(a=>(q8(i,q5(e),a),{documents:a,remoteKeys:s})))}function z8(t,e,n,i){let r=n.batch,s=r.keys(),o=x.resolve();return s.forEach(a=>{o=o.next(()=>i.getEntry(e,a)).next(l=>{let c=n.docVersions.get(a);Fe(c!==null),l.version.compareTo(c)<0&&(r.applyToRemoteDocument(l,n),l.isValidDocument()&&(l.setReadTime(n.commitVersion),i.addEntry(l)))})}),o.next(()=>t.mutationQueue.removeMutationBatch(e,r))}function q8(t,e,n){let i=t.collectionGroupReadTime.get(e)||ce.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.collectionGroupReadTime.set(e,i)}var Fy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var j8=100;function G8(){return q1()?8:Nh.getAndroidVersion(Ra())>0?6:4}var Ly=class{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=j8,this.relativeIndexReadCostPerDocument=G8()}initialize(e,n){this.localDocumentsView=e,this.indexManager=n,this.initialized=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.performQueryUsingIndex(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.performQueryUsingRemoteKeys(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Fy;return this.executeFullCollectionScan(e,n,o).next(a=>{if(s.result=a,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,n,o,a.size)})}).next(()=>s.result)}createCacheIndexes(e,n,i,r){return i.documentReadCount<this.indexAutoCreationMinCollectionSize?(Jl()<=$i.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",ra(n),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),x.resolve()):(Jl()<=$i.DEBUG&&z("QueryEngine","Query:",ra(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.relativeIndexReadCostPerDocument*r?(Jl()<=$i.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",ra(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vi(n))):x.resolve())}performQueryUsingIndex(e,n){if(lO(n))return x.resolve(null);let i=Vi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ry(n,null,"F"),i=Vi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=ye(...s);return this.localDocumentsView.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{let c=this.applyQuery(n,a);return this.needsRefill(n,c,o,l.readTime)?this.performQueryUsingIndex(e,ry(n,null,"F")):this.appendRemainingResults(e,c,n,l)}))})))}performQueryUsingRemoteKeys(e,n,i,r){return lO(n)||r.isEqual(ce.min())?x.resolve(null):this.localDocumentsView.getDocuments(e,i).next(s=>{let o=this.applyQuery(n,s);return this.needsRefill(n,o,i,r)?x.resolve(null):(Jl()<=$i.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ra(n)),this.appendRemainingResults(e,o,n,IV(r,nc)).next(a=>a))})}applyQuery(e,n){let i=new Bt(uD(e));return n.forEach((r,s)=>{uf(e,s)&&(i=i.add(s))}),i}needsRefill(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return s?s.hasPendingWrites||s.version.compareTo(r)>0:!1}executeFullCollectionScan(e,n,i){return Jl()<=$i.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",ra(n)),this.localDocumentsView.getDocumentsMatchingQuery(e,n,zs.min(),i)}appendRemainingResults(e,n,i,r){return this.localDocumentsView.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Wh=class{constructor(){this.activeTargetIds=Y5()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var By=class{constructor(){this.localState=new Wh,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,n,i){this.queryState[e]=n}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new Wh,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Vy=class{addCallback(e){}shutdown(){}};var Uy=class{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}};var Ph=null;function H8(){return 268435456+Math.round(2147483648*Math.random())}function I0(){return Ph===null?Ph=H8():Ph++,"0x"+Ph.toString(16)}function W8(t){return new Promise((e,n)=>{t((i,r)=>{i?n(i):e(r)})})}var $8="1.9.1",Yt="GrpcConnection",K8=`gl-node/${process.versions.node} fire/${Sa} grpc/${$8}`;function x0(t,e,n,i){Fe(e===null||e.type==="OAuth");let r=new Bs.Metadata;return e&&e.headers.forEach((s,o)=>r.set(o,s)),n&&n.headers.forEach((s,o)=>r.set(o,s)),i&&r.set("X-Firebase-GMPID",i),r.set("X-Goog-Api-Client",K8),r.set("Google-Cloud-Resource-Prefix",t),r.set("x-goog-request-params",t),r}var zy=class{constructor(e,n){this.databaseInfo=n,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${n.databaseId.projectId}/databases/${n.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){z(Yt,"Creating Firestore stub.");let e=this.databaseInfo.ssl?Bs.credentials.createSsl():Bs.credentials.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,n,i,r,s){let o=I0(),a=this.ensureActiveStub(),l=x0(this.databasePath,r,s,this.databaseInfo.appId),c=Object.assign({database:this.databasePath},i);return W8(u=>(z(Yt,`RPC '${e}' ${o} invoked with request:`,i),a[e](c,l,(f,g)=>{f?(z(Yt,`RPC '${e}' ${o} failed with error:`,f),u(new G(xh(f.code),f.message))):(z(Yt,`RPC '${e}' ${o} completed with response:`,g),u(void 0,g))})))}invokeStreamingRPC(e,n,i,r,s,o){let a=I0(),l=[],c=new jn;z(Yt,`RPC '${e}' ${a} invoked (streaming) with request:`,i);let u=this.ensureActiveStub(),f=x0(this.databasePath,r,s,this.databaseInfo.appId),g=Object.assign(Object.assign({},i),{database:this.databasePath}),_=u[e](g,f),C=!1;return _.on("data",v=>{z(Yt,`RPC ${e} ${a} received result:`,v),l.push(v),o!==void 0&&l.length===o&&(C=!0,c.resolve(l))}),_.on("end",()=>{z(Yt,`RPC '${e}' ${a} completed.`),C||(C=!0,c.resolve(l))}),_.on("error",v=>{z(Yt,`RPC '${e}' ${a} failed with error:`,v);let b=xh(v.code);c.reject(new G(b,v.message))}),c.promise}openStream(e,n,i){let r=I0(),s=this.ensureActiveStub(),o=x0(this.databasePath,n,i,this.databaseInfo.appId),a=s[e](o),l=!1,c=f=>{l||(l=!0,u.callOnClose(f),a.end())},u=new Uy({sendFn:f=>{if(l)z(Yt,`RPC '${e}' stream ${r} not sending because gRPC stream is closed:`,f);else{z(Yt,`RPC '${e}' stream ${r} sending:`,f);try{a.write(f)}catch(g){throw Hn("Failure sending:",f),Hn("Error:",g),g}}},closeFn:()=>{z(Yt,`RPC '${e}' stream ${r} closed locally via close().`),c()}});return a.on("data",f=>{l||(z(Yt,`RPC '${e}' stream ${r} received:`,f),u.callOnMessage(f))}),a.on("end",()=>{z(Yt,`RPC '${e}' stream ${r} ended.`),c()}),a.on("error",f=>{if(!l){la(Yt,`RPC '${e}' stream ${r} error. Code:`,f.code,"Message:",f.message);let g=xh(f.code);c(new G(g,f.message))}}),z(Yt,`Opening RPC '${e}' stream ${r} to ${this.databaseInfo.host}`),setTimeout(()=>{u.callOnOpen()},0),u}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}},FD={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}},Q8={nested:FD},Y8=Object.freeze({__proto__:null,nested:FD,default:Q8});var J8={longs:String,enums:String,defaults:!0,oneofs:!1};function X8(){let t=AO.fromJSON(Y8,J8);return Bs.loadPackageDefinition(t)}function Z8(t){let e=X8();return new zy(e,t)}function e9(){return new Vy}function hf(t){return new py(t,!1)}var t9="ExponentialBackoff",n9=1e3,i9=1.5,r9=60*1e3,$h=class{constructor(e,n,i=n9,r=i9,s=r9){this.queue=e,this.timerId=n,this.initialDelayMs=i,this.backoffFactor=r,this.maxDelayMs=s,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),i=Math.max(0,Date.now()-this.lastAttemptTime),r=Math.max(0,n-i);r>0&&z(t9,`Backing off for ${r} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,r,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){this.timerPromise!==null&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){this.timerPromise!==null&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}};var yO="PersistentStream",s9=60*1e3,o9=10*1e3,Kh=class{constructor(e,n,i,r,s,o,a,l){this.queue=e,this.idleTimerId=i,this.healthTimerId=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.backoff=new $h(e,n)}isStarted(){return this.state===1||this.state===5||this.isOpen()}isOpen(){return this.state===2||this.state===3}start(){if(this.state===4){this.performBackoff();return}this.auth()}stop(){return T(this,null,function*(){this.isStarted()&&(yield this.close(0))})}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&this.idleTimer===null&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,s9,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}handleIdleCloseTimer(){return T(this,null,function*(){if(this.isOpen())return this.close(0)})}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}close(e,n){return T(this,null,function*(){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,e!==4?this.backoff.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.onClose(n)})}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.closeCount===n&&this.startStream(i,r)},i=>{e(()=>{let r=new G(O.UNKNOWN,"Fetching auth token failed: "+i.message);return this.handleStreamClose(r)})})}startStream(e,n){let i=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,n),this.stream.onOpen(()=>{i(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,o9,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(r=>{i(()=>this.handleStreamClose(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(()=>T(this,null,function*(){this.state=0,this.start()}))}handleStreamClose(e){return z(yO,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return n=>{this.queue.enqueueAndForget(()=>this.closeCount===e?n():(z(yO,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},qy=class extends Kh{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}startRpc(e,n){return this.connection.openStream("Listen",e,n)}onMessage(e){this.backoff.reset();let n=D6(this.serializer,e),i=I6(e);return this.listener.onWatchChange(n,i)}watch(e){let n={};n.database=yy(this.serializer),n.addTarget=z6(this.serializer,e);let i=V6(this.serializer,e);i&&(n.labels=i),this.sendRequest(n)}unwatch(e){let n={};n.database=yy(this.serializer),n.removeTarget=e,this.sendRequest(n)}},jy=class extends Kh{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.handshakeComplete_=!1}get handshakeComplete(){return this.handshakeComplete_}start(){this.handshakeComplete_=!1,this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete_&&this.writeMutations([])}startRpc(e,n){return this.connection.openStream("Write",e,n)}onMessage(e){if(Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();let n=R6(e.writeResults,e.commitTime),i=Ui(e.commitTime);return this.listener.onMutationResult(i,n)}else return Fe(!e.writeResults||e.writeResults.length===0),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()}writeHandshake(){let e={};e.database=yy(this.serializer),this.sendRequest(e)}writeMutations(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>x6(this.serializer,i))};this.sendRequest(n)}};var Gy=class{},Hy=class extends Gy{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,n,i,r){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.invokeRPC(e,gy(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(O.UNKNOWN,s.toString())})}invokeStreamingRPC(e,n,i,r,s){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.invokeStreamingRPC(e,gy(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(O.UNKNOWN,o.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}};function a9(t,e,n,i){return new Hy(t,e,n,i)}function l9(t,e,n){let i=ae(t);return i.verifyInitialized(),new jy(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}function c9(t,e,n){let i=ae(t);return i.verifyInitialized(),new qy(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}var u9="OnlineStateTracker",vO=1,CO=10*1e3,Wy=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){this.watchStreamFailures===0&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",CO,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${CO/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){this.state==="Online"?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=vO&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${vO} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e==="Online"&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(Hn(n),this.shouldWarnClientIsOffline=!1):z(u9,n)}clearOnlineStateTimer(){this.onlineStateTimer!==null&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}};var $s="RemoteStore",d9=10,$y=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=s,this.connectivityMonitor.addCallback(o=>{i.enqueueAndForget(()=>T(this,null,function*(){Ks(this)&&(z($s,"Restarting streams for network reachability change."),yield M9(this))}))}),this.onlineStateTracker=new Wy(i,r)}};function h9(t,e,n,i,r){return new $y(t,e,n,i,r)}function ff(t){return T(this,null,function*(){if(Ks(t))for(let e of t.onNetworkStatusChange)yield e(!0)})}function vc(t){return T(this,null,function*(){for(let e of t.onNetworkStatusChange)yield e(!1)})}function f9(t){return T(this,null,function*(){let e=ae(t);z($s,"RemoteStore shutting down."),e.offlineCauses.add(5),yield vc(e),e.connectivityMonitor.shutdown(),e.onlineStateTracker.set("Unknown")})}function LD(t,e){let n=ae(t);n.listenTargets.has(e.targetId)||(n.listenTargets.set(e.targetId,e),kv(n)?Av(n):Ea(n).isOpen()&&xv(n,e))}function Iv(t,e){let n=ae(t),i=Ea(n);n.listenTargets.delete(e),i.isOpen()&&BD(n,e),n.listenTargets.size===0&&(i.isOpen()?i.markIdle():Ks(n)&&n.onlineStateTracker.set("Unknown"))}function xv(t,e){if(t.watchChangeAggregator.recordPendingTargetRequest(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ea(t).watch(e)}function BD(t,e){t.watchChangeAggregator.recordPendingTargetRequest(e),Ea(t).unwatch(e)}function Av(t){t.watchChangeAggregator=new fy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),getTargetDataForTarget:e=>t.listenTargets.get(e)||null,getDatabaseId:()=>t.datastore.serializer.databaseId}),Ea(t).start(),t.onlineStateTracker.handleWatchStreamStart()}function kv(t){return Ks(t)&&!Ea(t).isStarted()&&t.listenTargets.size>0}function Ks(t){return ae(t).offlineCauses.size===0}function VD(t){t.watchChangeAggregator=void 0}function p9(t){return T(this,null,function*(){t.listenTargets.forEach((e,n)=>{xv(t,e)})})}function m9(t,e){return T(this,null,function*(){VD(t),kv(t)?(t.onlineStateTracker.handleWatchStreamFailure(e),Av(t)):t.onlineStateTracker.set("Unknown")})}function g9(t,e,n){return T(this,null,function*(){if(t.onlineStateTracker.set("Online"),e instanceof qh&&e.state===2&&e.cause){try{yield y9(t,e)}catch(i){z($s,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Qh(t,i)}return}if(e instanceof ca?t.watchChangeAggregator.handleDocumentChange(e):e instanceof zh?t.watchChangeAggregator.handleExistenceFilter(e):t.watchChangeAggregator.handleTargetChange(e),!n.isEqual(ce.min()))try{let i=yield RD(t.localStore);n.compareTo(i)>=0&&(yield _9(t,n))}catch(i){z($s,"Failed to raise snapshot:",i),yield Qh(t,i)}})}function Qh(t,e,n){return T(this,null,function*(){if(yc(e))t.offlineCauses.add(1),yield vc(t),t.onlineStateTracker.set("Offline"),n||(n=()=>RD(t.localStore)),t.asyncQueue.enqueueRetryable(()=>T(this,null,function*(){z($s,"Retrying IndexedDB access"),yield n(),t.offlineCauses.delete(1),yield ff(t)}));else throw e})}function UD(t,e){return e().catch(n=>Qh(t,n,e))}function _9(t,e){let n=t.watchChangeAggregator.createRemoteEvent(e);return n.targetChanges.forEach((i,r)=>{if(i.resumeToken.approximateByteSize()>0){let s=t.listenTargets.get(r);s&&t.listenTargets.set(r,s.withResumeToken(i.resumeToken,e))}}),n.targetMismatches.forEach((i,r)=>{let s=t.listenTargets.get(i);if(!s)return;t.listenTargets.set(i,s.withResumeToken(Jt.EMPTY_BYTE_STRING,s.snapshotVersion)),BD(t,i);let o=new cc(s.target,i,r,s.sequenceNumber);xv(t,o)}),t.remoteSyncer.applyRemoteEvent(n)}function y9(t,e){return T(this,null,function*(){let n=e.cause;for(let i of e.targetIds)t.listenTargets.has(i)&&(yield t.remoteSyncer.rejectListen(i,n),t.listenTargets.delete(i),t.watchChangeAggregator.removeTarget(i))})}function pf(t){return T(this,null,function*(){let e=ae(t),n=es(e),i=e.writePipeline.length>0?e.writePipeline[e.writePipeline.length-1].batchId:wv;for(;v9(e);)try{let r=yield B8(e.localStore,i);if(r===null){e.writePipeline.length===0&&n.markIdle();break}else i=r.batchId,C9(e,r)}catch(r){yield Qh(e,r)}zD(e)&&qD(e)})}function v9(t){return Ks(t)&&t.writePipeline.length<d9}function C9(t,e){t.writePipeline.push(e);let n=es(t);n.isOpen()&&n.handshakeComplete&&n.writeMutations(e.mutations)}function zD(t){return Ks(t)&&!es(t).isStarted()&&t.writePipeline.length>0}function qD(t){es(t).start()}function b9(t){return T(this,null,function*(){es(t).writeHandshake()})}function w9(t){return T(this,null,function*(){let e=es(t);for(let n of t.writePipeline)e.writeMutations(n.mutations)})}function S9(t,e,n){return T(this,null,function*(){let i=t.writePipeline.shift(),r=ly.from(i,e,n);yield UD(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield pf(t)})}function T9(t,e){return T(this,null,function*(){e&&es(t).handshakeComplete&&(yield E9(t,e)),zD(t)&&qD(t)})}function E9(t,e){return T(this,null,function*(){if(f6(e.code)){let n=t.writePipeline.shift();es(t).inhibitBackoff(),yield UD(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),yield pf(t)}})}function M9(t){return T(this,null,function*(){let e=ae(t);e.offlineCauses.add(4),yield vc(e),e.onlineStateTracker.set("Unknown"),e.offlineCauses.delete(4),yield ff(e)})}function bO(t,e){return T(this,null,function*(){let n=ae(t);n.asyncQueue.verifyOperationInProgress(),z($s,"RemoteStore received new credentials");let i=Ks(n);n.offlineCauses.add(3),yield vc(n),i&&n.onlineStateTracker.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.offlineCauses.delete(3),yield ff(n)})}function O9(t,e){return T(this,null,function*(){let n=ae(t);e?(n.offlineCauses.delete(2),yield ff(n)):e||(n.offlineCauses.add(2),yield vc(n),n.onlineStateTracker.set("Unknown"))})}function Ea(t){return t.watchStream||(t.watchStream=c9(t.datastore,t.asyncQueue,{onOpen:p9.bind(null,t),onClose:m9.bind(null,t),onWatchChange:g9.bind(null,t)}),t.onNetworkStatusChange.push(e=>T(this,null,function*(){e?(t.watchStream.inhibitBackoff(),kv(t)?Av(t):t.onlineStateTracker.set("Unknown")):(yield t.watchStream.stop(),VD(t))}))),t.watchStream}function es(t){return t.writeStream||(t.writeStream=l9(t.datastore,t.asyncQueue,{onOpen:b9.bind(null,t),onClose:T9.bind(null,t),onHandshakeComplete:w9.bind(null,t),onMutationResult:S9.bind(null,t)}),t.onNetworkStatusChange.push(e=>T(this,null,function*(){e?(t.writeStream.inhibitBackoff(),yield pf(t)):(yield t.writeStream.stop(),t.writePipeline.length>0&&(z($s,`Stopping write stream with ${t.writePipeline.length} pending writes`),t.writePipeline=[]))}))),t.writeStream}var D9="AsyncQueue",Ky=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Rv(t,e){if(Hn(D9,`${e}: ${t}`),yc(t))return new G(O.UNAVAILABLE,`${e}: ${t}`);throw t}var Yh=class t{constructor(e){e?this.comparator=(n,i)=>e(n,i)||X.comparator(n.key,i.key):this.comparator=(n,i)=>X.comparator(n.key,i.key),this.keyedMap=Xl(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Jh=class{constructor(){this.changeMap=new Xe(X.comparator)}track(e){let n=e.doc.key,i=this.changeMap.get(n);if(!i){this.changeMap=this.changeMap.insert(n,e);return}e.type!==0&&i.type===3?this.changeMap=this.changeMap.insert(n,e):e.type===3&&i.type!==1?this.changeMap=this.changeMap.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.changeMap=this.changeMap.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.changeMap=this.changeMap.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.changeMap=this.changeMap.remove(n):e.type===1&&i.type===2?this.changeMap=this.changeMap.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.changeMap=this.changeMap.insert(n,{type:2,doc:e.doc}):ne()}getChanges(){let e=[];return this.changeMap.inorderTraversal((n,i)=>{e.push(i)}),e}},ya=class t{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Yh.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!cf(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var Qy=class{constructor(){this.viewSnap=void 0,this.listeners=[]}hasRemoteListeners(){return this.listeners.some(e=>e.listensToRemoteStore())}};function P9(){return new Yy}var Yy=class{constructor(){this.queries=new Xr(e=>cD(e),cf),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}};function I9(t,e){return T(this,null,function*(){let n=ae(t),i=3,r=e.query,s=n.queries.get(r);s?!s.hasRemoteListeners()&&e.listensToRemoteStore()&&(i=2):(s=new Qy,i=e.listensToRemoteStore()?0:1);try{switch(i){case 0:s.viewSnap=yield n.onListen(r,!0);break;case 1:s.viewSnap=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r);break;default:break}}catch(o){let a=Rv(o,`Initialization of query '${ra(e.query)}' failed`);e.onError(a);return}n.queries.set(r,s),s.listeners.push(e),e.applyOnlineStateChange(n.onlineState),s.viewSnap&&e.onViewSnapshot(s.viewSnap)&&Nv(n)})}function x9(t,e){return T(this,null,function*(){let n=ae(t),i=e.query,r=3,s=n.queries.get(i);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),s.listeners.length===0?r=e.listensToRemoteStore()?0:1:!s.hasRemoteListeners()&&e.listensToRemoteStore()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function A9(t,e){let n=ae(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let a of o.listeners)a.onViewSnapshot(r)&&(i=!0);o.viewSnap=r}}i&&Nv(n)}function k9(t,e,n){let i=ae(t),r=i.queries.get(e);if(r)for(let s of r.listeners)s.onError(n);i.queries.delete(e)}function R9(t,e){let n=ae(t);n.onlineState=e;let i=!1;n.queries.forEach((r,s)=>{for(let o of s.listeners)o.applyOnlineStateChange(e)&&(i=!0)}),i&&Nv(n)}function Nv(t){t.snapshotsInSyncListeners.forEach(e=>{e.next()})}var jD=function(t){return t.Default="default",t.Cache="cache",t}(jD||{}),Jy=class{constructor(e,n,i){this.query=e,this.queryObserver=n,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=i||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new ya(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),n=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),n=!0),this.snap=e,n}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let n=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),n=!0),n}shouldRaiseInitialEvent(e,n){if(!e.fromCache||!this.listensToRemoteStore())return!0;let i=n!=="Offline";return this.options.waitForSyncWhenOnline&&i?!1:!e.docs.isEmpty()||e.hasCachedResults||n==="Offline"}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let n=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return e.syncStateChanged||n?this.options.includeMetadataChanges===!0:!1}raiseInitialEvent(e){e=ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}listensToRemoteStore(){return this.options.source!==jD.Cache}};var Xy=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.addedKeys=i,this.removedKeys=r}static fromSnapshot(e,n){let i=ye(),r=ye();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key);break}return new t(e,n.fromCache,i,r)}};var Xh=class{constructor(e){this.key=e}},Zh=class{constructor(e){this.key=e}},Zy=class{constructor(e,n){this.query=e,this._syncedDocuments=n,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=ye(),this.mutatedKeys=ye(),this.docComparator=uD(e),this.documentSet=new Yh(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,n){let i=n?n.changeSet:new Jh,r=n?n.documentSet:this.documentSet,s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,f)=>{let g=r.get(u),_=uf(this.query,f)?f:null,C=g?this.mutatedKeys.has(g.key):!1,v=_?_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations:!1,b=!1;g&&_?g.data.isEqual(_.data)?C!==v&&(i.track({type:3,doc:_}),b=!0):this.shouldWaitForSyncedDocument(g,_)||(i.track({type:2,doc:_}),b=!0,(l&&this.docComparator(_,l)>0||c&&this.docComparator(_,c)<0)&&(a=!0)):!g&&_?(i.track({type:0,doc:_}),b=!0):g&&!_&&(i.track({type:1,doc:g}),b=!0,(l||c)&&(a=!0)),b&&(_?(o=o.add(_),v?s=s.add(u):s=s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{documentSet:o,changeSet:i,needsRefill:a,mutatedKeys:s}}shouldWaitForSyncedDocument(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let o=e.changeSet.getChanges();o.sort((f,g)=>N9(f.type,g.type)||this.docComparator(f.doc,g.doc)),this.applyTargetChange(i),r=r??!1;let a=n&&!r?this.updateLimboDocuments():[],c=this.limboDocuments.size===0&&this.current&&!r?1:0,u=c!==this.syncState;return this.syncState=c,o.length===0&&!u?{limboChanges:a}:{snapshot:new ya(this.query,e.documentSet,s,o,e.mutatedKeys,c===0,u,!1,i?i.resumeToken.approximateByteSize()>0:!1),limboChanges:a}}applyOnlineStateChange(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Jh,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!(this._syncedDocuments.has(e)||!this.documentSet.has(e)||this.documentSet.get(e).hasLocalMutations)}applyTargetChange(e){e&&(e.addedDocuments.forEach(n=>this._syncedDocuments=this._syncedDocuments.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this._syncedDocuments=this._syncedDocuments.delete(n)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=ye(),this.documentSet.forEach(i=>{this.shouldBeInLimbo(i.key)&&(this.limboDocuments=this.limboDocuments.add(i.key))});let n=[];return e.forEach(i=>{this.limboDocuments.has(i)||n.push(new Zh(i))}),this.limboDocuments.forEach(i=>{e.has(i)||n.push(new Xh(i))}),n}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=ye();let n=this.computeDocChanges(e.documents);return this.applyChanges(n,!0)}computeInitialSnapshot(){return ya.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===0,this.hasCachedResults)}};function N9(t,e){let n=i=>{switch(i){case 0:return 1;case 2:return 2;case 3:return 2;case 1:return 0;default:return ne()}};return n(t)-n(e)}var Fv="SyncEngine",ev=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},tv=class{constructor(e){this.key=e,this.receivedDocument=!1}},nv=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.syncEngineListener={},this.queryViewsByQuery=new Xr(a=>cD(a),cf),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new Xe(X.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new dc,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=uc.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return this._isPrimaryClient===!0}};function F9(t,e,n,i,r,s,o){let a=new nv(t,e,n,i,r,s);return o&&(a._isPrimaryClient=!0),a}function L9(t,e,n=!0){return T(this,null,function*(){let i=YD(t),r,s=i.queryViewsByQuery.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.computeInitialSnapshot()):r=yield GD(i,e,n,!0),r})}function B9(t,e){return T(this,null,function*(){let n=YD(t);yield GD(n,e,!0,!1)})}function GD(t,e,n,i){return T(this,null,function*(){let r=yield V8(t.localStore,Vi(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield V9(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&LD(t.remoteStore,r),a})}function V9(t,e,n,i,r){return T(this,null,function*(){t.applyDocChanges=(f,g,_)=>Q9(t,f,g,_);let s=yield ND(t.localStore,e,!0),o=new Zy(e,s.remoteKeys),a=o.computeDocChanges(s.documents),l=lc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);QD(t,n,c.limboChanges);let u=new ev(e,n,o);return t.queryViewsByQuery.set(e,u),t.queriesByTarget.has(n)?t.queriesByTarget.get(n).push(e):t.queriesByTarget.set(n,[e]),c.snapshot})}function U9(t,e,n){return T(this,null,function*(){let i=ae(t),r=i.queryViewsByQuery.get(e),s=i.queriesByTarget.get(r.targetId);if(s.length>1){i.queriesByTarget.set(r.targetId,s.filter(o=>!cf(o,e))),i.queryViewsByQuery.delete(e);return}i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ny(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Iv(i.remoteStore,r.targetId),iv(i,r.targetId)}).catch(_c))):(iv(i,r.targetId),yield Ny(i.localStore,r.targetId,!0))})}function z9(t,e){return T(this,null,function*(){let n=ae(t),i=n.queryViewsByQuery.get(e),r=n.queriesByTarget.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Iv(n.remoteStore,i.targetId))})}function q9(t,e,n){return T(this,null,function*(){let i=X9(t);try{let r=yield I8(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),$9(i,r.batchId,n),yield Cc(i,r.changes),yield pf(i.remoteStore)}catch(r){let s=Rv(r,"Failed to persist write");n.reject(s)}})}function HD(t,e){return T(this,null,function*(){let n=ae(t);try{let i=yield R8(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.activeLimboResolutionsByTarget.get(s);o&&(Fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.receivedDocument=!0:r.modifiedDocuments.size>0?Fe(o.receivedDocument):r.removedDocuments.size>0&&(Fe(o.receivedDocument),o.receivedDocument=!1))}),yield Cc(n,i,e)}catch(i){yield _c(i)}})}function wO(t,e,n){let i=ae(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.queryViewsByQuery.forEach((s,o)=>{let a=o.view.applyOnlineStateChange(e);a.snapshot&&r.push(a.snapshot)}),R9(i.eventManager,e),r.length&&i.syncEngineListener.onWatchChange(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function j9(t,e,n){return T(this,null,function*(){let i=ae(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.activeLimboResolutionsByTarget.get(e),s=r&&r.key;if(s){let o=new Xe(X.comparator);o=o.insert(s,li.newNoDocument(s,ce.min()));let a=ye().add(s),l=new Uh(ce.min(),new Map,new Xe(Ee),o,a);yield HD(i,l),i.activeLimboTargetsByKey=i.activeLimboTargetsByKey.remove(s),i.activeLimboResolutionsByTarget.delete(e),Lv(i)}else yield Ny(i.localStore,e,!1).then(()=>iv(i,e,n)).catch(_c)})}function G9(t,e){return T(this,null,function*(){let n=ae(t),i=e.batch.batchId;try{let r=yield x8(n.localStore,e);$D(n,i,null),WD(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Cc(n,r)}catch(r){yield _c(r)}})}function H9(t,e,n){return T(this,null,function*(){let i=ae(t);try{let r=yield k8(i.localStore,e);$D(i,e,n),WD(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Cc(i,r)}catch(r){yield _c(r)}})}function WD(t,e){(t.pendingWritesCallbacks.get(e)||[]).forEach(n=>{n.resolve()}),t.pendingWritesCallbacks.delete(e)}function W9(t,e){t.pendingWritesCallbacks.forEach(n=>{n.forEach(i=>{i.reject(new G(O.CANCELLED,e))})}),t.pendingWritesCallbacks.clear()}function $9(t,e,n){let i=t.mutationUserCallbacks[t.currentUser.toKey()];i||(i=new Xe(Ee)),i=i.insert(e,n),t.mutationUserCallbacks[t.currentUser.toKey()]=i}function $D(t,e,n){let i=ae(t),r=i.mutationUserCallbacks[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.mutationUserCallbacks[i.currentUser.toKey()]=r}}function iv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.queriesByTarget.get(e))t.queryViewsByQuery.delete(i),n&&t.syncEngineListener.onWatchError(i,n);t.queriesByTarget.delete(e),t.isPrimaryClient&&t.limboDocumentRefs.removeReferencesForId(e).forEach(r=>{t.limboDocumentRefs.containsKey(r)||KD(t,r)})}function KD(t,e){t.enqueuedLimboResolutions.delete(e.path.canonicalString());let n=t.activeLimboTargetsByKey.get(e);n!==null&&(Iv(t.remoteStore,n),t.activeLimboTargetsByKey=t.activeLimboTargetsByKey.remove(e),t.activeLimboResolutionsByTarget.delete(n),Lv(t))}function QD(t,e,n){for(let i of n)i instanceof Xh?(t.limboDocumentRefs.addReference(i.key,e),K9(t,i)):i instanceof Zh?(z(Fv,"Document no longer in limbo: "+i.key),t.limboDocumentRefs.removeReference(i.key,e),t.limboDocumentRefs.containsKey(i.key)||KD(t,i.key)):ne()}function K9(t,e){let n=e.key,i=n.path.canonicalString();!t.activeLimboTargetsByKey.get(n)&&!t.enqueuedLimboResolutions.has(i)&&(z(Fv,"New document in limbo: "+n),t.enqueuedLimboResolutions.add(i),Lv(t))}function Lv(t){for(;t.enqueuedLimboResolutions.size>0&&t.activeLimboTargetsByKey.size<t.maxConcurrentLimboResolutions;){let e=t.enqueuedLimboResolutions.values().next().value;t.enqueuedLimboResolutions.delete(e);let n=new X(We.fromString(e)),i=t.limboTargetIdGenerator.next();t.activeLimboResolutionsByTarget.set(i,new tv(n)),t.activeLimboTargetsByKey=t.activeLimboTargetsByKey.insert(n,i),LD(t.remoteStore,new cc(Vi(aD(n.path)),i,"TargetPurposeLimboResolution",kO.INVALID))}}function Cc(t,e,n){return T(this,null,function*(){let i=ae(t),r=[],s=[],o=[];i.queryViewsByQuery.isEmpty()||(i.queryViewsByQuery.forEach((a,l)=>{o.push(i.applyDocChanges(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){r.push(c);let u=Xy.fromSnapshot(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),i.syncEngineListener.onWatchChange(r),yield L8(i.localStore,s))})}function Q9(t,e,n,i){return T(this,null,function*(){let r=e.view.computeDocChanges(n);r.needsRefill&&(r=yield ND(t.localStore,e.query,!1).then(({documents:l})=>e.view.computeDocChanges(l,r)));let s=i&&i.targetChanges.get(e.targetId),o=i&&i.targetMismatches.get(e.targetId)!=null,a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return QD(t,e.targetId,a.limboChanges),a.snapshot})}function Y9(t,e){return T(this,null,function*(){let n=ae(t);if(!n.currentUser.isEqual(e)){z(Fv,"User change. New user:",e.toKey());let r=yield kD(n.localStore,e);n.currentUser=e,W9(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Cc(n,r.affectedDocuments)}})}function J9(t,e){let n=ae(t),i=n.activeLimboResolutionsByTarget.get(e);if(i&&i.receivedDocument)return ye().add(i.key);{let r=ye(),s=n.queriesByTarget.get(e);if(!s)return r;for(let o of s){let a=n.queryViewsByQuery.get(o);r=r.unionWith(a.view.syncedDocuments)}return r}}function YD(t){let e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j9.bind(null,e),e.syncEngineListener.onWatchChange=A9.bind(null,e.eventManager),e.syncEngineListener.onWatchError=k9.bind(null,e.eventManager),e}function X9(t){let e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H9.bind(null,e),e}var ef=class{constructor(){this.synchronizeTabs=!1}initialize(e){return T(this,null,function*(){this.serializer=hf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return P8(this.persistence,new Ly,e.initialUser,this.serializer)}createPersistence(e){return new xy(ky.factory,this.serializer)}createSharedClientState(e){return new By}terminate(){return T(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var rv=class{initialize(e,n){return T(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wO(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y9.bind(null,this.syncEngine),yield O9(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return P9()}createDatastore(e){let n=hf(e.databaseInfo.databaseId),i=Z8(e.databaseInfo);return a9(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return h9(this.localStore,this.datastore,e.asyncQueue,n=>wO(this.syncEngine,n,0),e9())}createSyncEngine(e,n){return F9(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return T(this,null,function*(){var e;yield f9(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function JD(t,e,n){if(!n)throw new G(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z9(t,e,n,i){if(e===!0&&i===!0)throw new G(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SO(t){if(!X.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function TO(t){if(X.isDocumentKey(t))throw new G(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eU(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function mf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=tU(t);return e?`a custom ${e} object`:"an object"}}else return typeof t=="function"?"a function":ne()}function tU(t){return t.constructor?t.constructor.name:null}function tf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=mf(t);throw new G(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var sv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.observer.error?this.scheduleEvent(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString())}mute(){this.muted=!0}scheduleEvent(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Zr="FirestoreClient",nU=100,iU=11,rU=20,sU=22,ov=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=vt.UNAUTHENTICATED,this.clientId=kh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>T(this,null,function*(){z(Zr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(z(Zr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:nU}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Rv(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function A0(t,e){return T(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),z(Zr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>T(this,null,function*(){i.isEqual(r)||(yield kD(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function EO(t,e){return T(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield aU(t);z(Zr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>bO(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>bO(e.remoteStore,r)),t._onlineComponents=e})}function oU(t){return t.name==="FirebaseError"?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:typeof DOMException<"u"&&t instanceof DOMException?t.code===sU||t.code===rU||t.code===iU:!0}function aU(t){return T(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z(Zr,"Using user provided OfflineComponentProvider");try{yield A0(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!oU(n))throw n;la("Error using user provided cache. Falling back to memory cache: "+n),yield A0(t,new ef)}}else z(Zr,"Using default OfflineComponentProvider"),yield A0(t,new ef);return t._offlineComponents})}function XD(t){return T(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(z(Zr,"Using user provided OnlineComponentProvider"),yield EO(t,t._uninitializedComponentsProvider._online)):(z(Zr,"Using default OnlineComponentProvider"),yield EO(t,new rv))),t._onlineComponents})}function lU(t){return XD(t).then(e=>e.syncEngine)}function cU(t){return T(this,null,function*(){let e=yield XD(t),n=e.eventManager;return n.onListen=L9.bind(null,e.syncEngine),n.onUnlisten=U9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=B9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z9.bind(null,e.syncEngine),n})}function uU(t,e,n={}){let i=new jn;return t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){let r=yield cU(t);return hU(r,t.asyncQueue,e,n,i)})),i.promise}function dU(t,e){let n=new jn;return t.asyncQueue.enqueueAndForget(()=>T(this,null,function*(){let i=yield lU(t);return q9(i,e,n)})),n.promise}function hU(t,e,n,i,r){let s=new sv({next:a=>{e.enqueueAndForget(()=>x9(t,o)),a.fromCache&&i.source==="server"?r.reject(new G(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(a)},error:a=>r.reject(a)}),o=new Jy(n,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return I9(t,o)}function fU(t,e){return t.timeoutSeconds===e.timeoutSeconds}function ZD(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var pU="ComponentProvider",MO=new Map;function mU(t){let e=MO.get(t);e&&(z(pU,"Removing Datastore"),MO.delete(t),e.terminate())}function gU(t,e,n,i){return new H0(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,ZD(i.experimentalLongPollingOptions),i.useFetchStreams)}var eP="firestore.googleapis.com",OO=!0,DO=5,PO=30,_U=!0,nf=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eP,this.ssl=OO}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:OO;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AD;else{if(e.cacheSizeBytes!==xD&&e.cacheSizeBytes<_O)throw new G(O.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${_O}`);this.cacheSizeBytes=e.cacheSizeBytes}Z9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=_U:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZD((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),yU(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&fU(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}};function yU(t){if(t.timeoutSeconds!==void 0){if(isNaN(t.timeoutSeconds))throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<DO)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is ${DO})`);if(t.timeoutSeconds>PO)throw new G(O.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is ${PO})`)}}var va=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nf(e),e.credentials!==void 0&&(this._authCredentials=OV(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return mU(this),Promise.resolve()}};function tP(t,e,n,i={}){var r;t=tf(t,va);let s=t._getSettings(),o=`${e}:${n}`;if(s.host!==eP&&s.host!==o&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=vt.MOCK_USER;else{a=z1(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new G(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new vt(c)}t._authCredentials=new R0(new Ah(a,l))}}var Ca=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Gn=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Qr=class t extends Ca{constructor(e,n,i){super(e,n,aD(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new X(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function nP(t,e,...n){if(t=gr(t),JD("collection","path",e),t instanceof va){let i=We.fromString(e,...n);return TO(i),new Qr(t,null,i)}else{if(!(t instanceof Gn)&&!(t instanceof Qr))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(We.fromString(e,...n));return TO(i),new Qr(t.firestore,null,i)}}function iP(t,e,...n){if(t=gr(t),arguments.length===1&&(e=kh.newId()),JD("doc","path",e),t instanceof va){let i=We.fromString(e,...n);return SO(i),new Gn(t,null,new X(i))}else{if(!(t instanceof Gn)&&!(t instanceof Qr))throw new G(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(We.fromString(e,...n));return SO(i),new Gn(t.firestore,t instanceof Qr?t.converter:null,new X(i))}}var vU="AsyncQueue",av=class{constructor(){this.tail=Promise.resolve(),this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new $h(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()}}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let n=new jn;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}retryNextOp(){return T(this,null,function*(){if(this.retryableOps.length!==0){try{yield this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(yc(e))z(vU,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}})}enqueueInternal(e){let n=this.tail.then(()=>(this.operationInProgress=!0,e().catch(i=>{this.failure=i,this.operationInProgress=!1;let r=bU(i);throw Hn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.operationInProgress=!1,i))));return this.tail=n,n}enqueueAfterDelay(e,n,i){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(n=0);let r=Ky.createAndSchedule(this,e,n,i,s=>this.removeDelayedOperation(s));return this.delayedOperations.push(r),r}verifyNotFailed(){this.failure&&ne()}verifyOperationInProgress(){}drain(){return T(this,null,function*(){let e;do e=this.tail,yield e;while(e!==this.tail)})}containsDelayedOperation(e){for(let n of this.delayedOperations)if(n.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{this.delayedOperations.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.delayedOperations)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let n=this.delayedOperations.indexOf(e);this.delayedOperations.splice(n,1)}};function CU(){return new av}function bU(t){let e=t.message||"";return t.stack&&(t.stack.includes(t.message)?e=t.stack:e=t.message+`
`+t.stack),e}var hc=class extends va{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=CU(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||oP(this),this._firestoreClient.terminate()}};function rP(t,e){let n=typeof t=="object"?t:La(),i=typeof t=="string"?t:e||W0,r=$f(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=U1("firestore");s&&tP(r,...s)}return r}function sP(t){return t._firestoreClient||oP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function oP(t){var e,n,i;let r=t._freezeSettings(),s=gU(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new ov(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function wU(t,e=!0){EV(H1),Fa(new Na("firestore",(n,{instanceIdentifier:i,options:r})=>{let s=n.getProvider("app").getImmediate(),o=new hc(new N0(n.getProvider("auth-internal")),new V0(n.getProvider("app-check-internal")),e5(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),It(QM,YM,t),It(QM,YM,"esm2017")}var fc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Jt.fromBase64String(e))}catch(n){throw new G(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rf=class{constructor(e){this._methodName=e}};var mc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}};var SU=/^__.*__$/,lv=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ws(e,this.data,n,this.fieldTransforms)}};function aP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var cv=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.contextWith({path:i,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.contextWith({path:i,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return sf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(aP(this.dataSource)&&SU.test(e))throw this.createError('Document fields cannot begin and end with "__"')}},uv=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||hf(e)}createContext(e,n,i,r=!1){return new cv({dataSource:e,methodName:n,targetDoc:i,path:Cn.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lP(t){let e=t._freezeSettings(),n=hf(t._databaseId);return new uv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TU(t,e,n,i,r,s={}){let o=t.createContext(s.merge||s.mergeFields?2:0,e,n,r);dP("Data must be an object, but it was:",o,i);let a=cP(i,o),l,c;if(s.merge)l=new Li(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let f of s.mergeFields){let g=PU(e,f,n);if(!o.contains(g))throw new G(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);xU(u,g)||u.push(g)}l=new Li(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new lv(new oi(a),l,c)}function EU(t,e,n,i=!1){let r=t.createContext(i?4:3,e);return Bv(n,r)}function Bv(t,e){if(t=gr(t),uP(t))return dP("Unsupported field value:",e,t),cP(t,e);if(t instanceof rf)return OU(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return MU(t,e)}else return DU(t,e)}function cP(t,e){let n={};return $O(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(t,(i,r)=>{let s=Bv(r,e.childContextForField(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function MU(t,e){let n=[],i=0;for(let r of t){let s=Bv(r,e.childContextForArray(i));s==null&&(s={nullValue:"NULL_VALUE"}),n.push(s),i++}return{arrayValue:{values:n}}}function OU(t,e){if(!aP(e.dataSource))throw e.createError(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.createError(`${t._methodName}() is not currently supported inside arrays`);let n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}function DU(t,e){if(t=gr(t),t===null)return{nullValue:"NULL_VALUE"};if(typeof t=="number")return J5(e.serializer,t);if(typeof t=="boolean")return{booleanValue:t};if(typeof t=="string")return{stringValue:t};if(t instanceof Date){let n=Tt.fromDate(t);return{timestampValue:Gh(e.serializer,n)}}else if(t instanceof Tt){let n=new Tt(t.seconds,Math.floor(t.nanoseconds/1e3)*1e3);return{timestampValue:Gh(e.serializer,n)}}else{if(t instanceof mc)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fc)return{bytesValue:TD(e.serializer,t._byteString)};if(t instanceof Gn){let n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.createError(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Dv(t.firestore._databaseId||e.databaseId,t._key.path)}}else throw e.createError(`Unsupported field value: ${mf(t)}`)}}function uP(t){return typeof t=="object"&&t!==null&&!(t instanceof Array)&&!(t instanceof Date)&&!(t instanceof Tt)&&!(t instanceof mc)&&!(t instanceof fc)&&!(t instanceof Gn)&&!(t instanceof rf)}function dP(t,e,n){if(!uP(n)||!eU(n)){let i=mf(n);throw i==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+i)}}function PU(t,e,n){if(e=gr(e),e instanceof pc)return e._internalPath;if(typeof e=="string")return hP(t,e);throw sf("Field path arguments must be of type string or ",t,!1,void 0,n)}var IU=new RegExp("[~\\*/\\[\\]]");function hP(t,e,n){if(e.search(IU)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pc(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sf(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new G(O.INVALID_ARGUMENT,a+t+l)}function xU(t,e){return t.some(n=>n.isEqual(e))}var of=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document)if(this._converter){let e=new dv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}else return this._userDataWriter.convertValue(this._document.data.value);else return}get(e){if(this._document){let n=this._document.data.field(Vv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},dv=class extends of{data(){return super.data()}};function Vv(t,e){return typeof e=="string"?hP(t,e):e instanceof pc?e._internalPath:e._delegate._internalPath}function AU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gc=class{},hv=class extends gc{};function fP(t,e,...n){let i=[];e instanceof gc&&i.push(e),i=i.concat(n),LU(i);for(let r of i)t=r._apply(t);return t}var af=class t extends hv{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return mP(e._query,n),new Ca(e.firestore,e.converter,Ov(e._query,n))}_parse(e){let n=lP(e.firestore);return kU(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function pP(t,e,n){let i=e,r=Vv("where",t);return af._create(r,i,n)}var fv=class t extends gc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ci.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(NU(e._query,n),new Ca(e.firestore,e.converter,Ov(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function kU(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if(s==="array-contains"||s==="array-contains-any")throw new G(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if(s==="in"||s==="not-in"){xO(o,s);let c=[];for(let u of o)c.push(IO(i,t,u));a={arrayValue:{values:c}}}else a=IO(i,t,o)}else(s==="in"||s==="not-in"||s==="array-contains-any")&&xO(o,s),a=EU(n,e,o,s==="in"||s==="not-in");return ct.create(r,s,a)}function IO(t,e,n){if(n=gr(n),typeof n=="string"){if(n==="")throw new G(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lD(e)&&n.indexOf("/")!==-1)throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(We.fromString(n));if(!X.isDocumentKey(i))throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return iO(t,new X(i))}else{if(n instanceof Gn)return iO(t,n._key);throw new G(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mf(n)}.`)}}function xO(t,e){if(!Array.isArray(t)||t.length===0)throw new G(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RU(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function mP(t,e){let n=FU(t.filters,RU(e.op));if(n!==null)throw n===e.op?new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function NU(t,e){let n=t,i=e.getFlattenedFilters();for(let r of i)mP(n,r),n=Ov(n,r)}function FU(t,e){for(let n of t)for(let i of n.getFlattenedFilters())if(e.indexOf(i.op)>=0)return i.op;return null}function LU(t){let e=t.filter(i=>i instanceof fv).length,n=t.filter(i=>i instanceof af).length;if(e>1||e>0&&n>0)throw new G(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}var pv=class{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Ta(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new mc(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=bv(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ic(e));default:return null}}convertTimestamp(e){let n=Yr(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=We.fromString(e);Fe(ID(i));let r=new Lh(i.get(1),i.get(3)),s=new X(i.popFirst(5));return r.isEqual(n)||Hn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function BU(t,e,n){let i;return t?n&&(n.merge||n.mergeFields)?i=t.toFirestore(e,n):i=t.toFirestore(e):i=e,i}var ba=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},mv=class extends of{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document)if(this._converter){let n=new wa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}else return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);else return}get(e,n={}){if(this._document){let i=this._document.data.field(Vv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},wa=class extends mv{data(e={}){return super.data(e)}},gv=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ba(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new wa(this._firestore,this._userDataWriter,i.key,i,new ba(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return(!this._cachedChanges||this._cachedChangesIncludeMetadataChanges!==n)&&(this._cachedChanges=VU(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function VU(t,e){if(t._snapshot.oldDocs.isEmpty()){let n=0;return t._snapshot.docChanges.map(i=>{let r=new wa(t._firestore,t._userDataWriter,i.doc.key,i.doc,new ba(t._snapshot.mutatedKeys.has(i.doc.key),t._snapshot.fromCache),t.query.converter);return i.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}})}else{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(i=>e||i.type!==3).map(i=>{let r=new wa(t._firestore,t._userDataWriter,i.doc.key,i.doc,new ba(t._snapshot.mutatedKeys.has(i.doc.key),t._snapshot.fromCache),t.query.converter),s=-1,o=-1;return i.type!==0&&(s=n.indexOf(i.doc.key),n=n.delete(i.doc.key)),i.type!==1&&(n=n.add(i.doc),o=n.indexOf(i.doc.key)),{type:UU(i.type),doc:r,oldIndex:s,newIndex:o}})}}function UU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}var _v=class extends pv{constructor(e){super(),this.firestore=e}convertBytes(e){return new fc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,n)}};function gP(t){t=tf(t,Ca);let e=tf(t.firestore,hc),n=sP(e),i=new _v(e);return AU(t._query),uU(n,t._query).then(r=>new gv(e,i,t,r))}function _P(t,e){let n=tf(t.firestore,hc),i=iP(t),r=BU(t.converter,e),s=lP(t.firestore),a=TU(s,"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ls.exists(!1));return zU(n,[a]).then(()=>i)}function zU(t,e){let n=sP(t);return dU(n,e)}wU("node");var Qs=class{constructor(e){return e}},yP="firestore",Uv=class{constructor(){return Ba(yP)}};var zv=new _e("angularfire2.firestore-instances");function qU(t,e){let n=jc(yP,t,e);return n&&new Qs(n)}function jU(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Qs(i)}}var GU={provide:Uv,deps:[[new Zt,zv]]},HU={provide:Qs,useFactory:qU,deps:[[new Zt,zv],Qi]},WU=(()=>{class t{constructor(){It("angularfire",Dn.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ee({type:t});static \u0275inj=Z({providers:[HU,GU]})}return t})();function vP(t,...e){return{ngModule:WU,providers:[{provide:zv,useFactory:jU(t),multi:!0,deps:[Oe,dn,_r,ps,[new Zt,$a],[new Zt,Ki],...e]}]}}var CP=$n(_P,!0);var qv=$n(nP,!0);var bP=$n(gP,!0);var wP=$n(rP,!0);var SP=$n(fP,!0);var TP=$n(pP,!0);var KU="firebase",QU="10.10.0";Wn.registerVersion(KU,QU,"app-compat");var YU=["ngOnDestroy"],MP=(t,e,n,i={})=>new Proxy(t,{get:(r,s)=>n.runOutsideAngular(()=>{if(t[s])return i?.spy?.get&&i.spy.get(s,t[s]),t[s];if(YU.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let l=a?.[s];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{let f=u?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,f),f})})})});var gf=class{constructor(e){return e}},_f=new _e("angularfire2.app.options"),yf=new _e("angularfire2.app.name");function jv(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let o=Wn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Wn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;JU("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new gf(o)}var JU=(t,...e)=>{qf()&&typeof console<"u"&&console[t](...e)},XU={provide:gf,useFactory:jv,deps:[_f,Oe,[new Zt,yf]]},OP=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:_f,useValue:n},{provide:yf,useValue:i}]}}constructor(n){Wn.registerVersion("angularfire",Dn.full,"core"),Wn.registerVersion("angularfire",Dn.full,"app-compat"),Wn.registerVersion("angular",xc.full,n.toString())}static \u0275fac=function(i){return new(i||t)(le(fi))};static \u0275mod=ee({type:t});static \u0275inj=Z({providers:[XU]})}return t})();function DP(t,e,n,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return ZU(r,o)||(EP("error",`${e} was already initialized on the ${n} Firebase App with different settings.${e7?" You may need to reload as Firebase is not HMR aware.":""}`),EP("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function ZU(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var e7=typeof module<"u"&&!!module.hot,EP=(t,...e)=>{qf()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var t7=new Map,n7={activated:!1,tokenObservers:[]},i7={initialized:!1,enabled:!1};function ui(t){return t7.get(t)||Object.assign({},n7)}function kP(){return i7}var r7="https://content-firebaseappcheck.googleapis.com/v1";var s7="exchangeDebugToken",PP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},kQ=24*60*60*1e3;var Hv=class{constructor(e,n,i,r,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return T(this,null,function*(){this.stop();try{this.pending=new Wf,this.pending.promise.catch(n=>{}),yield o7(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Wf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function o7(t){return new Promise(e=>{setTimeout(e,t)})}var a7={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ts=new G1("appCheck","AppCheck",a7);function RP(t){if(!ui(t).activated)throw ts.create("use-before-activation",{appName:t.name})}function NP(i,r){return T(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let _=yield o.getHeartbeatsHeader();_&&(s["X-Firebase-Client"]=_)}let a={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(t,a)}catch(_){throw ts.create("fetch-network-error",{originalErrorMessage:_?.message})}if(l.status!==200)throw ts.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(_){throw ts.create("fetch-parse-error",{originalErrorMessage:_?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let f=Number(u[1])*1e3,g=Date.now();return{token:c.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function FP(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${r7}/projects/${n}/apps/${i}:${s7}?key=${r}`,body:{debug_token:e}}}var l7="firebase-app-check-database",c7=1,Wv="firebase-app-check-store";var vf=null;function u7(){return vf||(vf=new Promise((t,e)=>{try{let n=indexedDB.open(l7,c7);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(ts.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Wv,{keyPath:"compositeKey"})}}}catch(n){e(ts.create("storage-open",{originalErrorMessage:n?.message}))}}),vf)}function d7(t,e){return h7(f7(t),e)}function h7(t,e){return T(this,null,function*(){let i=(yield u7()).transaction(Wv,"readwrite"),s=i.objectStore(Wv).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(ts.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function f7(t){return`${t.options.appId}-${t.name}`}var $v=new Vc("@firebase/app-check");function Gv(t,e){return Bc()?d7(t,e).catch(n=>{$v.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function LP(){return kP().enabled}function BP(){return T(this,null,function*(){let t=kP();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var p7={error:"UNKNOWN_ERROR"};function m7(t){return V1.encodeString(JSON.stringify(t),!1)}function Kv(t,e=!1){return T(this,null,function*(){let n=t.app;RP(n);let i=ui(n),r=i.token,s;if(r&&!bc(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(bc(l)?r=l:yield Gv(n,void 0))}if(!e&&r&&bc(r))return{token:r.token};let o=!1;if(LP()){i.exchangeTokenPromise||(i.exchangeTokenPromise=NP(FP(n,yield BP()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield Gv(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield ui(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?$v.warn(l.message):$v.error(l),s=l}let a;return r?s?bc(r)?a={token:r.token,internalError:s}:a=xP(s):(a={token:r.token},i.token=r,yield Gv(n,r)):a=xP(s),o&&v7(n,a),a})}function g7(t){return T(this,null,function*(){let e=t.app;RP(e);let{provider:n}=ui(e);if(LP()){let i=yield BP(),{token:r}=yield NP(FP(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function _7(t,e,n,i){let{app:r}=t,s=ui(r),o={next:n,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&bc(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),IP(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>IP(t))}function VP(t,e){let n=ui(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function IP(t){let{app:e}=t,n=ui(e),i=n.tokenRefresher;i||(i=y7(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function y7(t){let{app:e}=t;return new Hv(()=>T(this,null,function*(){let n=ui(e),i;if(n.token?i=yield Kv(t,!0):i=yield Kv(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=ui(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},PP.RETRIAL_MIN_WAIT,PP.RETRIAL_MAX_WAIT)}function v7(t,e){let n=ui(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function bc(t){return t.expireTimeMillis-Date.now()>0}function xP(t){return{token:m7(p7),error:t}}var Qv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=ui(this.app);for(let n of e)VP(this.app,n.next);return Promise.resolve()}};function C7(t,e){return new Qv(t,e)}function b7(t){return{getToken:e=>Kv(t,e),getLimitedUseToken:()=>g7(t),addTokenListener:e=>_7(t,"INTERNAL",e),removeTokenListener:e=>VP(t.app,e)}}var w7="@firebase/app-check",S7="0.8.3";var T7="app-check",AP="app-check-internal";function E7(){Fa(new Na(T7,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return C7(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(AP).initialize()})),Fa(new Na(AP,t=>{let e=t.getProvider("app-check").getImmediate();return b7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),It(w7,S7)}E7();var M7=["localhost","0.0.0.0","127.0.0.1"],HQ=typeof window<"u"&&M7.includes(window.location.hostname);var D7=new _e("angularfire2.auth.use-emulator"),P7=new _e("angularfire2.auth.settings"),I7=new _e("angularfire2.auth.tenant-id"),x7=new _e("angularfire2.auth.langugage-code"),A7=new _e("angularfire2.auth.use-device-language"),k7=new _e("angularfire.auth.persistence"),R7=(t,e,n,i,r,s,o,a)=>DP(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(let[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[n,i,r,s,o,a]),Yv=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,s,o,a,l,c,u,f,g,_){let C=new Dt,v=di(void 0).pipe(hr(o.outsideAngular),hi(()=>s.runOutsideAngular(()=>import("./chunk-CBWHWBEM.mjs"))),zt(()=>jv(n,s,i)),zt(b=>R7(b,s,a,c,u,f,l,g)),kf({bufferSize:1,refCount:!1}));if(x1(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=di(null);else{v.pipe(m1()).subscribe();let b=v.pipe(hi(R=>R.getRedirectResult().then(k=>k,()=>null)),Yf,kf({bufferSize:1,refCount:!1})),A=v.pipe(hi(R=>new bn(k=>({unsubscribe:s.runOutsideAngular(()=>R.onAuthStateChanged(J=>k.next(J),J=>k.error(J),()=>k.complete()))})))),S=v.pipe(hi(R=>new bn(k=>({unsubscribe:s.runOutsideAngular(()=>R.onIdTokenChanged(J=>k.next(J),J=>k.error(J),()=>k.complete()))}))));this.authState=b.pipe(Nf(A),ss(o.outsideAngular),hr(o.insideAngular)),this.user=b.pipe(Nf(S),ss(o.outsideAngular),hr(o.insideAngular)),this.idToken=this.user.pipe(hi(R=>R?os(R.getIdToken()):di(null))),this.idTokenResult=this.user.pipe(hi(R=>R?os(R.getIdTokenResult()):di(null))),this.credential=xf(b,C,this.authState.pipe(as(R=>!R))).pipe(zt(R=>R?.user?R:null),ss(o.outsideAngular),hr(o.insideAngular))}return MP(this,v,s,{spy:{apply:(b,A,S)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&S.then(R=>C.next(R))}}})}static \u0275fac=function(i){return new(i||t)(le(_f),le(yf,8),le(fi),le(Oe),le(_r),le(D7,8),le(P7,8),le(I7,8),le(x7,8),le(A7,8),le(k7,8),le(Ki,8))};static \u0275prov=he({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),UP=(()=>{class t{constructor(){Wn.registerVersion("angularfire",Dn.full,"auth-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ee({type:t});static \u0275inj=Z({providers:[Yv]})}return t})();var F7="@",L7=(()=>{let e=class e{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=U(C1,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-ORAIV5LD.mjs")).catch(r=>{throw new ls(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Jv(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(i,r);o.use(l)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){v1()},e.\u0275prov=he({token:e,factory:e.\u0275fac});let t=e;return t})(),Jv=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,r){this.delegate.insertBefore(e,n,i,r)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(F7)}};function zP(t="animations"){return w1("NgAsyncAnimations"),g1([{provide:b1,useFactory:(e,n,i)=>new L7(e,n,i,t),deps:[Mn,R1,Oe]},{provide:eo,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}function Cf(t){t||(_1(Cf),t=U(Oc));let e=new bn(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(bt(e))}var B7=["*"];function V7(t,e){if(t&1){let n=ue();d(0,"button",7),q("click",function(){let r=H(n).$implicit,s=N();return s.focus(),W(s.select(r.id,s.NgbSlideEventSource.INDICATOR))}),h()}if(t&2){let n=e.$implicit,i=N();dt("active",n.id===i.activeId),Sn("aria-labelledby","slide-"+n.id)("aria-controls","slide-"+n.id)("aria-selected",n.id===i.activeId)}}function U7(t,e){}function z7(t,e){if(t&1&&(d(0,"div",6)(1,"span",8),Pc(2,0),h(),ie(3,U7,0,0,"ng-template",9),h()),t&2){let n=e.$implicit,i=e.$index,r=e.$count;L("id","slide-"+n.id),y(2),S1(i+1)(r),T1(2),y(),L("ngTemplateOutlet",n.templateRef)}}function q7(t,e){if(t&1){let n=ue();d(0,"button",10),q("click",function(){H(n);let r=N();return W(r.arrowLeft())}),I(1,"span",11),d(2,"span",12),Pc(3,1),h()(),d(4,"button",13),q("click",function(){H(n);let r=N();return W(r.arrowRight())}),I(5,"span",14),d(6,"span",12),Pc(7,2),h()()}if(t&2){let n=N();Sn("aria-labelledby",n.id+"-previous"),y(2),L("id",n.id+"-previous"),y(2),Sn("aria-labelledby",n.id+"-next"),y(2),L("id",n.id+"-next")}}var j7=["dialog"];function G7(t,e){if(t&1&&m(0),t&2){let n=e.fill;Ve(n===100?"\u2605":"\u2606")}}function H7(t,e){}function W7(t,e){if(t&1){let n=ue();d(0,"span",1),m(1),h(),d(2,"span",2),q("mouseenter",function(){let r=H(n).$index,s=N();return W(s.enter(r+1))})("click",function(){let r=H(n).$index,s=N();return W(s.handleClick(r+1))}),ie(3,H7,0,0,"ng-template",3),h()}if(t&2){let n=e.$index,i=N(),r=pi(1);y(),ge("(",n<i.nextRate?"*":" ",")"),y(),ji("cursor",i.isInteractive()?"pointer":"default"),y(),L("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||r)("ngTemplateOutletContext",i.contexts[n])}}var jP={animation:!0,transitionTimerDelayMs:5},GP=(()=>{let e=class e{constructor(){this.animation=jP.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $7(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),r=parseFloat(n);return(i+r)*1e3}function qP(t,e,n=0){return Math.max(Math.min(t,e),n)}function HP(t){return typeof t=="string"}function Xv(t){return t!=null}function K7(t){return t&&t.then}function t1(t){return(t||document.body).getBoundingClientRect()}function Q7(t){return e=>new bn(n=>{let i=o=>t.run(()=>n.next(o)),r=o=>t.run(()=>n.error(o)),s=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:r,complete:s})})}var Y7=()=>{},{transitionTimerDelayMs:J7}=jP,wc=new Map,ur=(t,e,n,i)=>{let r=i.context||{},s=wc.get(e);if(s)switch(i.runningTransition){case"continue":return a1;case"stop":t.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),wc.delete(e)}let o=n(e,i.animation,r)||Y7;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>o()),di(void 0).pipe(Q7(t));let a=new Dt,l=new Dt,c=a.pipe(p1(!0));wc.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let u=$7(e);return t.runOutsideAngular(()=>{let f=zi(e,"transitionend").pipe(bt(c),as(({target:_})=>_===e)),g=If(u+J7).pipe(bt(c));h1(g,f,l).pipe(bt(c)).subscribe(()=>{wc.delete(e),t.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()},X7=t=>{wc.get(t)?.complete()};var WP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var $P=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})(),Z7=(()=>{let e=class e{constructor(){this._ngbConfig=U(GP),this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ma=function(t){return t.START="start",t.END="end",t}(Ma||{}),KP=({classList:t})=>t.contains("carousel-item-start")||t.contains("carousel-item-end"),Tc=t=>{t.remove("carousel-item-start"),t.remove("carousel-item-end")},bf=t=>{Tc(t),t.remove("carousel-item-prev"),t.remove("carousel-item-next")},ez=(t,e,{direction:n})=>{let{classList:i}=t;if(!e){Tc(i),bf(i),i.add("active");return}return KP(t)?Tc(i):(i.add("carousel-item-"+(n===Ma.START?"next":"prev")),t1(t),i.add("carousel-item-"+n)),()=>{bf(i),i.add("active")}},tz=(t,e,{direction:n})=>{let{classList:i}=t;if(!e){Tc(i),bf(i),i.remove("active");return}return KP(t)?Tc(i):i.add("carousel-item-"+n),()=>{bf(i),i.remove("active")}},nz=0,iz=0,n1=(()=>{let e=class e{constructor(){this.templateRef=U(Dc),this.id=`ngb-slide-${nz++}`,this.slid=new He}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Be({type:e,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0});let t=e;return t})(),QP=(()=>{let e=class e{constructor(){this.NgbSlideEventSource=Sc,this._config=U(Z7),this._platformId=U(fi),this._ngZone=U(Oe),this._cd=U(En),this._container=U(Ge),this._destroyRef=U(Oc),this._interval$=new wn(this._config.interval),this._mouseHover$=new wn(!1),this._focused$=new wn(!1),this._pauseOnHover$=new wn(this._config.pauseOnHover),this._pauseOnFocus$=new wn(this._config.pauseOnFocus),this._pause$=new wn(!1),this._wrap$=new wn(this._config.wrap),this.id=`ngb-carousel-${iz++}`,this.animation=this._config.animation,this.keyboard=this._config.keyboard,this.showNavigationArrows=this._config.showNavigationArrows,this.showNavigationIndicators=this._config.showNavigationIndicators,this.slide=new He,this.slid=new He,this._transitionIds=null}set interval(i){this._interval$.next(i)}get interval(){return this._interval$.value}set wrap(i){this._wrap$.next(i)}get wrap(){return this._wrap$.value}set pauseOnHover(i){this._pauseOnHover$.next(i)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(i){this._pauseOnFocus$.next(i)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(i){this._mouseHover$.next(i)}get mouseHover(){return this._mouseHover$.value}set focused(i){this._focused$.next(i)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(Sc.ARROW_LEFT)}arrowRight(){this.focus(),this.next(Sc.ARROW_RIGHT)}ngAfterContentInit(){Nc(this._platformId)&&this._ngZone.runOutsideAngular(()=>{let i=Da([this.slide.pipe(zt(r=>r.current),Ia(this.activeId)),this._wrap$,this.slides.changes.pipe(Ia(null))]).pipe(zt(([r,s])=>{let o=this.slides.toArray(),a=this._getSlideIdxById(r);return s?o.length>1:a<o.length-1}),Af());Da([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,i]).pipe(zt(([r,s,o,a,l,c,u])=>r||s&&o||a&&l||!u?0:c),Af(),hi(r=>r>0?If(r,r):d1),Cf(this._destroyRef)).subscribe(()=>this._ngZone.run(()=>this.next(Sc.TIMER)))}),this.slides.changes.pipe(Cf(this._destroyRef)).subscribe(()=>{this._transitionIds?.forEach(i=>X7(this._getSlideElement(i))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(qi(1)).subscribe(()=>{for(let{id:i}of this.slides){let r=this._getSlideElement(i);i===this.activeId?r.classList.add("active"):r.classList.remove("active")}})})}ngAfterContentChecked(){let i=this._getSlideById(this.activeId);this.activeId=i?i.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){let i=this._getSlideElement(this.activeId);i&&i.classList.add("active")}}select(i,r){this._cycleToSelected(i,this._getSlideEventDirection(this.activeId,i),r)}prev(i){this._cycleToSelected(this._getPrevSlide(this.activeId),Ma.END,i)}next(i){this._cycleToSelected(this._getNextSlide(this.activeId),Ma.START,i)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(i,r,s){let o=this._transitionIds;if(o&&(o[0]!==i||o[1]!==this.activeId))return;let a=this._getSlideById(i);if(a&&a.id!==this.activeId){this._transitionIds=[this.activeId,i],this.slide.emit({prev:this.activeId,current:a.id,direction:r,paused:this._pause$.value,source:s});let l={animation:this.animation,runningTransition:"stop",context:{direction:r}},c=[],u=this._getSlideById(this.activeId);if(u){let C=ur(this._ngZone,this._getSlideElement(u.id),tz,l);C.subscribe(()=>{u.slid.emit({isShown:!1,direction:r,source:s})}),c.push(C)}let f=this.activeId;this.activeId=a.id;let g=this._getSlideById(this.activeId),_=ur(this._ngZone,this._getSlideElement(a.id),ez,l);_.subscribe(()=>{g?.slid.emit({isShown:!0,direction:r,source:s})}),c.push(_),Pa(...c).pipe(qi(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:f,current:a.id,direction:r,paused:this._pause$.value,source:s})})}this._cd.markForCheck()}_getSlideEventDirection(i,r){let s=this._getSlideIdxById(i),o=this._getSlideIdxById(r);return s>o?Ma.END:Ma.START}_getSlideById(i){return this.slides.find(r=>r.id===i)||null}_getSlideIdxById(i){let r=this._getSlideById(i);return r!=null?this.slides.toArray().indexOf(r):-1}_getNextSlide(i){let r=this.slides.toArray(),s=this._getSlideIdxById(i);return s===r.length-1?this.wrap?r[0].id:r[r.length-1].id:r[s+1].id}_getPrevSlide(i){let r=this.slides.toArray(),s=this._getSlideIdxById(i);return s===0?this.wrap?r[r.length-1].id:r[0].id:r[s-1].id}_getSlideElement(i){return this._container.nativeElement.querySelector(`#slide-${i}`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["ngb-carousel"]],contentQueries:function(r,s,o){if(r&1&&ro(o,n1,4),r&2){let a;hn(a=fn())&&(s.slides=a)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(r,s){r&1&&q("keydown.arrowLeft",function(){return s.keyboard&&s.arrowLeft()})("keydown.arrowRight",function(){return s.keyboard&&s.arrowRight()})("mouseenter",function(){return s.mouseHover=!0})("mouseleave",function(){return s.mouseHover=!1})("focusin",function(){return s.focused=!0})("focusout",function(){return s.focused=!1}),r&2&&(Sn("aria-activedescendant","slide-"+s.activeId),ji("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[Hi],decls:7,vars:3,consts:()=>{let i;i=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\uFFFD0\uFFFD"}:INTERPOLATION: of ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: `;let r;r=$localize`:@@ngb.carousel.previous:Previous`;let s;return s=$localize`:@@ngb.carousel.next:Next`,[i,r,s,["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active"],[1,"carousel-inner"],["role","tabpanel",1,"carousel-item",3,"id"],["type","button","data-bs-target","","role","tab",3,"click"],[1,"visually-hidden"],[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden",3,"id"],["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"]]},template:function(r,s){r&1&&(d(0,"div",3),no(1,V7,1,5,"button",4,to),h(),d(3,"div",5),no(4,z7,4,4,"div",6,to),h(),ie(6,q7,8,4)),r&2&&(dt("visually-hidden",!s.showNavigationIndicators),y(),io(s.slides),y(3),io(s.slides),y(2),pr(6,s.showNavigationArrows?6:-1))},dependencies:[Gf],encapsulation:2,changeDetection:0});let t=e;return t})(),Sc=function(t){return t.TIMER="timer",t.ARROW_LEFT="arrowLeft",t.ARROW_RIGHT="arrowRight",t.INDICATOR="indicator",t}(Sc||{}),YP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})(),JP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var cr=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(cr||{});var iJ=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})();var rz=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function XP(t){let e=Array.from(t.querySelectorAll(rz)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var sz=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=zi(e,"focusin").pipe(bt(n),zt(s=>s.target));zi(e,"keydown").pipe(bt(n),as(s=>s.which===cr.Tab),Ff(r)).subscribe(([s,o])=>{let[a,l]=XP(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&zi(e,"click").pipe(bt(n),Ff(r),zt(s=>s[1])).subscribe(s=>s.focus())})};var rJ=new Date(1882,10,12),sJ=new Date(2174,10,25);var oJ=1e3*60*60*24;var i1=1080,oz=24*i1,az=12*i1+793,aJ=29*oz+az,lJ=11*i1+204;var ZP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var eI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})(),lz=(()=>{let e=class e{constructor(){this._ngbConfig=U(GP),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Oa=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}};var cz=(()=>{let e=class e{constructor(){this._document=U(Mn)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,s=r.style,{overflow:o,paddingRight:a}=s;if(i>0){let l=parseFloat(window.getComputedStyle(r).paddingRight);s.paddingRight=`${l+i}px`}return s.overflow="hidden",()=>{i>0&&(s.paddingRight=a),s.overflow=o}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uz=(()=>{let e=class e{constructor(){this._nativeElement=U(Ge).nativeElement,this._zone=U(Oe)}ngOnInit(){this._zone.onStable.asObservable().pipe(qi(1)).subscribe(()=>{ur(this._zone,this._nativeElement,(i,r)=>{r&&t1(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ur(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,s){r&2&&(us("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),dt("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Hi],decls:0,vars:0,template:function(r,s){},encapsulation:2});let t=e;return t})(),wf=class{update(e){}close(e){}dismiss(e){}},dz=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],hz=["animation","backdropClass"],Zv=class{_applyWindowOptions(e,n){dz.forEach(i=>{Xv(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){hz.forEach(i=>{Xv(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(bt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(bt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Dt,this._dismissed=new Dt,this._hidden=new Dt,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();K7(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():di(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Pa(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},e1=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(e1||{}),fz=(()=>{let e=class e{constructor(){this._document=U(Mn),this._elRef=U(Ge),this._zone=U(Oe),this._closed$=new Dt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new He,this.shown=new Dt,this.hidden=new Dt}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":HP(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(qi(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},s=ur(this._zone,i,()=>i.classList.remove("show"),r),o=ur(this._zone,this._dialogEl.nativeElement,()=>{},r),a=Pa(s,o);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},r=ur(this._zone,this._elRef.nativeElement,(o,a)=>{a&&t1(o),o.classList.add("show")},i),s=ur(this._zone,this._dialogEl.nativeElement,()=>{},i);Pa(r,s).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{zi(i,"keydown").pipe(bt(this._closed$),as(s=>s.which===cr.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(e1.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;zi(this._dialogEl.nativeElement,"mousedown").pipe(bt(this._closed$),Mc(()=>r=!1),hi(()=>zi(i,"mouseup").pipe(bt(this._closed$),qi(1))),as(({target:s})=>i===s)).subscribe(()=>{r=!0}),zi(i,"click").pipe(bt(this._closed$)).subscribe(({target:s})=>{i===s&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(e1.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),s=XP(i)[0];(r||s||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,s;r&&r.focus&&i.contains(r)?s=r:s=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&ur(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,s){if(r&1&&Gi(j7,7),r&2){let o;hn(o=fn())&&(s._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,s){r&2&&(Sn("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy),us("modal d-block"+(s.windowClass?" "+s.windowClass:"")),dt("fade",s.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Hi],ngContentSelectors:B7,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,s){r&1&&(Aa(),d(0,"div",1,0)(2,"div",2),ka(3),h()()),r&2&&us("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+s.fullscreenClass+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),pz=(()=>{let e=class e{constructor(){this._applicationRef=U(D1),this._injector=U(dn),this._environmentInjector=U(Lf),this._document=U(Mn),this._scrollBar=U(cz),this._activeWindowCmptHasChanged=new Dt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new He;let i=U(Oe);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];sz(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,s){let o=s.container instanceof HTMLElement?s.container:Xv(s.container)?this._document.querySelector(s.container):this._document.body;if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new wf;i=s.injector||i;let l=i.get(Lf,null)||this._environmentInjector,c=this._getContentRef(i,l,r,a,s),u=s.backdrop!==!1?this._attachBackdrop(o):void 0,f=this._attachWindowComponent(o,c.nodes),g=new Zv(f,c,u,s.beforeDismiss);return this._registerModalRef(g),this._registerWindowCmpt(f),g.hidden.pipe(qi(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=_=>{g.close(_)},a.dismiss=_=>{g.dismiss(_)},a.update=_=>{g.update(_)},g.update(s),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),g}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=Ac(uz,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let s=Ac(fz,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_getContentRef(i,r,s,o,a){return s?s instanceof Dc?this._createFromTemplateRef(s,o):HP(s)?this._createFromString(s):this._createFromComponent(i,r,s,o,a):new Oa([])}_createFromTemplateRef(i,r){let s={$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}},o=i.createEmbeddedView(s);return this._applicationRef.attachView(o),new Oa([o.rootNodes],o)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new Oa([[r]])}_createFromComponent(i,r,s,o,a){let l=dn.create({providers:[{provide:wf,useValue:o}],parent:i}),c=Ac(s,{environmentInjector:r,elementInjector:l}),u=c.location.nativeElement;return a.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new Oa([[u]],c.hostView,c)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(s=>{s!==i&&s.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let s=this._modalRefs.indexOf(i);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mz=(()=>{let e=class e{constructor(){this._injector=U(dn),this._modalStack=U(pz),this._config=U(lz)}open(i,r={}){let s=Ie(cn(Ie({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({providers:[mz]});let t=e;return t})();var nI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var iI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var rI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var sI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})(),r1=(()=>{let e=class e{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oI=(()=>{let e=class e{constructor(){this.contexts=[],this._config=U(r1),this._changeDetectorRef=U(En),this.disabled=!1,this.max=this._config.max,this.readonly=this._config.readonly,this.resettable=this._config.resettable,this.tabindex=this._config.tabindex,this.hover=new He,this.leave=new He,this.rateChange=new He(!0),this.onChange=i=>{},this.onTouched=()=>{}}ariaValueText(i,r){return`${i} out of ${r}`}isInteractive(){return!this.readonly&&!this.disabled}enter(i){this.isInteractive()&&this._updateState(i),this.hover.emit(i)}handleBlur(){this.onTouched()}handleClick(i){this.isInteractive()&&this.update(this.resettable&&this.rate===i?0:i)}handleKeyDown(i){switch(i.which){case cr.ArrowDown:case cr.ArrowLeft:this.update(this.rate-1);break;case cr.ArrowUp:case cr.ArrowRight:this.update(this.rate+1);break;case cr.Home:this.update(0);break;case cr.End:this.update(this.max);break;default:return}i.preventDefault()}ngOnChanges(i){i.rate&&this.update(this.rate),i.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(i){this.disabled=i}update(i,r=!0){let s=qP(i,this.max,0);this.isInteractive()&&this.rate!==s&&(this.rate=s,this.rateChange.emit(this.rate)),r&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(i){this.update(i,!1),this._changeDetectorRef.markForCheck()}_updateState(i){this.nextRate=i,this.contexts.forEach((r,s)=>r.fill=Math.round(qP(i-s,1,0)*100))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(i,r)=>({fill:0,index:r}))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["ngb-rating"]],contentQueries:function(r,s,o){if(r&1&&ro(o,Dc,5),r&2){let a;hn(a=fn())&&(s.starTemplateFromContent=a.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:6,hostBindings:function(r,s){r&1&&q("blur",function(){return s.handleBlur()})("keydown",function(a){return s.handleKeyDown(a)})("mouseleave",function(){return s.reset()}),r&2&&(Bf("tabindex",s.disabled?-1:s.tabindex),Sn("aria-valuemax",s.max)("aria-valuenow",s.nextRate)("aria-valuetext",s.ariaValueText(s.nextRate,s.max))("aria-readonly",s.readonly&&!s.disabled?!0:null)("aria-disabled",s.disabled?!0:null))},inputs:{disabled:"disabled",max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[ht([{provide:Pn,useExisting:Xt(()=>e),multi:!0}]),cs,Hi],decls:4,vars:0,consts:[["t",""],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,s){r&1&&(ie(0,G7,1,1,"ng-template",null,0,mi),no(2,W7,4,5,null,null,to)),r&2&&(y(2),io(s.contexts))},dependencies:[Gf],encapsulation:2,changeDetection:0});let t=e;return t})(),aI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var lI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var cI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var uI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var dI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var cJ=new _e("live announcer delay",{providedIn:"root",factory:()=>100});var hI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})();var fI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({});let t=e;return t})(),gz=[WP,$P,YP,JP,ZP,eI,tI,nI,fI,iI,rI,sI,aI,lI,cI,uI,dI,hI],pI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({imports:[gz,WP,$P,YP,JP,ZP,eI,tI,nI,fI,iI,rI,sI,aI,lI,cI,uI,dI,hI]});let t=e;return t})();var gI={production:!1,firebaseConfig:{apiKey:"AIzaSyDwZ18TS6Am9awxZIKh6clCSxUJXDAQVfg",authDomain:"flowershop-15faa.firebaseapp.com",projectId:"flowershop-15faa",storageBucket:"flowershop-15faa.appspot.com",messagingSenderId:"541465629622",appId:"1:541465629622:web:dd3219fdfd714a830c6717"}};var ns=(()=>{let e=class e{constructor(i){this.http=i,this.categories=[{name:"House Plants",counters:33,state:!0},{name:"Potter Plants",counters:12,state:!0},{name:"Seeds",counters:65,state:!0},{name:"Small Plants",counters:39,state:!0},{name:"Big Plants",counters:23,state:!0},{name:"Succulents",counters:17,state:!0},{name:"Terrariums",counters:19,state:!0},{name:"Gardening",counters:13,state:!0},{name:"Accessories",counters:18,state:!0}],this.sizes=[{name:"Small",counters:119,state:!0},{name:"Medium",counters:86,state:!0},{name:"Large",counters:78,state:!0}],this.products=[{id:1,categories:"House Plants",size:{name:"Small",state:!0},name:"Barberton Daisy",price:120,grade:4,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"A modern decorative plant in a minimalist metal design. The black metal frame creates a stylish geometric accent, and inside there is a bowl with thick artificial green leaves, creating a natural effect. This accessory is suitable for adding freshness and brightness to the interior without the need for care.",livingRoom:"In the living room, this decor can be placed on a shelf, coffee table or cabinet. Its modern and laconic design will perfectly complement the loft, minimalist or modern style, creating a contrast between the greenery and the strict lines of the metal frame.",diningRoom:"On the dining table or sideboard, this plant will add a stylish accent and freshness. The compact size allows you to use it as a central element of decor or part of the composition, creating a cozy atmosphere.",office:"In the office, this accessory will fit perfectly on a desk, shelf or windowsill, adding greenery and modernity to the space. Its strict design combines with a professional environment, while creating visual comfort and a sense of natural harmony.",img:"assets/IconsProduct/product1.png"},{id:2,categories:"Big Plants",size:{name:"Medium",state:!0},name:"Angel Wing Begonia",price:169,grade:3,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"This stylish plant pot features a minimalist design, combining a matte white top with a textured grey concrete base. It houses an artificial plant with large green leaves, imitating a monstera. The pot is perfect for decorating your interior and creating a fresh, modern accent without the need for maintenance.",livingRoom:"In the living room, this pot will add a bright green accent on a coffee table, shelf or in the corner of the room. Its modern design fits perfectly with minimalist, Scandinavian or eco-themes, giving the space a cozy and lively feel.",diningRoom:"In the dining area, this pot can become an elegant decorative element on a sideboard, windowsill or even in the center of the dining table. Greenery and simple design create a relaxing atmosphere that is well suited for family and friendly gatherings.",office:"For the office, this plant will become a source of visual calm and help create a comfortable workspace. The pot can be placed on a desk, shelf or in the corner of the office to add greenery and modern style to the interior.",img:"assets/IconsProduct/product2.png"},{id:3,categories:"Big Plants",size:{name:"Large",state:!0},name:"African Violet",price:219,grade:5,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"A modern decorative plant in a minimalist metal design. The black metal frame creates a stylish geometric accent, and inside there is a bowl with thick artificial green leaves, creating a natural effect. This accessory is suitable for adding freshness and brightness to the interior without the need for care.",livingRoom:"In the living room, this decor can be placed on a shelf, coffee table or cabinet. Its modern and laconic design will perfectly complement the loft, minimalist or modern style, creating a contrast between the greenery and the strict lines of the metal frame.",diningRoom:"On the dining table or sideboard, this plant will add a stylish accent and freshness. The compact size allows you to use it as a central element of decor or part of the composition, creating a cozy atmosphere.",office:"In the office, this accessory will fit perfectly on a desk, shelf or windowsill, adding greenery and modernity to the space. Its strict design combines with a professional environment, while creating visual comfort and a sense of natural harmony.",img:"assets/IconsProduct/product3.png"},{id:4,categories:"House Plants",size:{name:"Medium",state:!0},name:"Beach Spider Lily",price:129,grade:5,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"This stylish plant pot features a minimalist design, combining a matte white top with a textured grey concrete base. It houses an artificial plant with large green leaves, imitating a monstera. The pot is perfect for decorating your interior and creating a fresh, modern accent without the need for maintenance.",livingRoom:"In the living room, this pot will add a bright green accent on a coffee table, shelf or in the corner of the room. Its modern design fits perfectly with minimalist, Scandinavian or eco-themes, giving the space a cozy and lively feel.",diningRoom:"In the dining area, this pot can become an elegant decorative element on a sideboard, windowsill or even in the center of the dining table. Greenery and simple design create a relaxing atmosphere that is well suited for family and friendly gatherings.",office:"For the office, this plant will become a source of visual calm and help create a comfortable workspace. The pot can be placed on a desk, shelf or in the corner of the office to add greenery and modern style to the interior.",img:"assets/IconsProduct/product4.png"},{id:5,categories:"House Plants",size:{name:"Medium",state:!0},name:"Blushing Bromeliad",price:139,grade:5,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"This stylish plant pot features a minimalist design, combining a matte white top with a textured grey concrete base. It houses an artificial plant with large green leaves, imitating a monstera. The pot is perfect for decorating your interior and creating a fresh, modern accent without the need for maintenance.",livingRoom:"In the living room, this pot will add a bright green accent on a coffee table, shelf or in the corner of the room. Its modern design fits perfectly with minimalist, Scandinavian or eco-themes, giving the space a cozy and lively feel.",diningRoom:"In the dining area, this pot can become an elegant decorative element on a sideboard, windowsill or even in the center of the dining table. Greenery and simple design create a relaxing atmosphere that is well suited for family and friendly gatherings.",office:"For the office, this plant will become a source of visual calm and help create a comfortable workspace. The pot can be placed on a desk, shelf or in the corner of the office to add greenery and modern style to the interior.",img:"assets/IconsProduct/product5.png"},{id:6,categories:"House Plants",size:{name:"Large",state:!0},name:"Aluminum Plant",price:179,grade:3,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"This stylish plant pot features a minimalist design, combining a matte white top with a textured grey concrete base. It houses an artificial plant with large green leaves, imitating a monstera. The pot is perfect for decorating your interior and creating a fresh, modern accent without the need for maintenance.",livingRoom:"In the living room, this pot will add a bright green accent on a coffee table, shelf or in the corner of the room. Its modern design fits perfectly with minimalist, Scandinavian or eco-themes, giving the space a cozy and lively feel.",diningRoom:"In the dining area, this pot can become an elegant decorative element on a sideboard, windowsill or even in the center of the dining table. Greenery and simple design create a relaxing atmosphere that is well suited for family and friendly gatherings.",office:"For the office, this plant will become a source of visual calm and help create a comfortable workspace. The pot can be placed on a desk, shelf or in the corner of the office to add greenery and modern style to the interior.",img:"assets/IconsProduct/product6.png"},{id:7,categories:"Small Plants",size:{name:"Large",state:!0},name:"Bird's Nest Fern",price:99,grade:4,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"A modern decorative plant in a minimalist metal design. The black metal frame creates a stylish geometric accent, and inside there is a bowl with thick artificial green leaves, creating a natural effect. This accessory is suitable for adding freshness and brightness to the interior without the need for care.",livingRoom:"In the living room, this decor can be placed on a shelf, coffee table or cabinet. Its modern and laconic design will perfectly complement the loft, minimalist or modern style, creating a contrast between the greenery and the strict lines of the metal frame.",diningRoom:"On the dining table or sideboard, this plant will add a stylish accent and freshness. The compact size allows you to use it as a central element of decor or part of the composition, creating a cozy atmosphere.",office:"In the office, this accessory will fit perfectly on a desk, shelf or windowsill, adding greenery and modernity to the space. Its strict design combines with a professional environment, while creating visual comfort and a sense of natural harmony.",img:"assets/IconsProduct/product7.png"},{id:8,categories:"Big Plants",size:{name:"Small",state:!0},name:"Broadleaf Lady Palm",price:60,grade:5,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"A modern decorative plant in a minimalist metal design. The black metal frame creates a stylish geometric accent, and inside there is a bowl with thick artificial green leaves, creating a natural effect. This accessory is suitable for adding freshness and brightness to the interior without the need for care.",livingRoom:"In the living room, this decor can be placed on a shelf, coffee table or cabinet. Its modern and laconic design will perfectly complement the loft, minimalist or modern style, creating a contrast between the greenery and the strict lines of the metal frame.",diningRoom:"On the dining table or sideboard, this plant will add a stylish accent and freshness. The compact size allows you to use it as a central element of decor or part of the composition, creating a cozy atmosphere.",office:"In the office, this accessory will fit perfectly on a desk, shelf or windowsill, adding greenery and modernity to the space. Its strict design combines with a professional environment, while creating visual comfort and a sense of natural harmony.",img:"assets/IconsProduct/product8.png"},{id:9,categories:"House Plants",size:{name:"Small",state:!0},name:"Chinese Evergreen",price:39,grade:4,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"A modern decorative plant in a minimalist metal design. The black metal frame creates a stylish geometric accent, and inside there is a bowl with thick artificial green leaves, creating a natural effect. This accessory is suitable for adding freshness and brightness to the interior without the need for care.",livingRoom:"In the living room, this decor can be placed on a shelf, coffee table or cabinet. Its modern and laconic design will perfectly complement the loft, minimalist or modern style, creating a contrast between the greenery and the strict lines of the metal frame.",diningRoom:"On the dining table or sideboard, this plant will add a stylish accent and freshness. The compact size allows you to use it as a central element of decor or part of the composition, creating a cozy atmosphere.",office:"In the office, this accessory will fit perfectly on a desk, shelf or windowsill, adding greenery and modernity to the space. Its strict design combines with a professional environment, while creating visual comfort and a sense of natural harmony.",img:"assets/IconsProduct/product9.png"},{id:10,categories:"House Plants",size:{name:"Small",state:!0},name:"Chinese Evergreen",price:39,grade:4,description:"The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. The ceramic cylinder planters come with a wooden stand to help elevate your plants off the ground. ",productDescription:"A modern decorative plant in a minimalist metal design. The black metal frame creates a stylish geometric accent, and inside there is a bowl with thick artificial green leaves, creating a natural effect. This accessory is suitable for adding freshness and brightness to the interior without the need for care.",livingRoom:"In the living room, this decor can be placed on a shelf, coffee table or cabinet. Its modern and laconic design will perfectly complement the loft, minimalist or modern style, creating a contrast between the greenery and the strict lines of the metal frame.",diningRoom:"On the dining table or sideboard, this plant will add a stylish accent and freshness. The compact size allows you to use it as a central element of decor or part of the composition, creating a cozy atmosphere.",office:"In the office, this accessory will fit perfectly on a desk, shelf or windowsill, adding greenery and modernity to the space. Its strict design combines with a professional environment, while creating visual comfort and a sense of natural harmony.",img:"assets/IconsProduct/product9.png"}],this.updateCategoryCounters(),this.updateSizeCounters()}updateCategoryCounters(){this.categories.forEach(i=>{i.counters=this.products.filter(r=>r.categories===i.name).length})}updateSizeCounters(){this.sizes.forEach(i=>{i.counters=this.products.filter(r=>r.size.name===i.name&&r.size.state).length})}findProductsByCategory(i){return this.products.filter(r=>i.includes(r.categories))}findProductsBySize(i){return this.products.filter(r=>i.includes(r.size.name)&&r.size.state)}findProductsByCategoryAndSize(i,r){return this.products.filter(s=>i.includes(s.categories)&&r.includes(s.size.name)&&s.size.state)}getProductById(i){let r=this.products.find(s=>s.id===i);return r?di(r):(console.error(`Product with ID ${i} not found`),l1(()=>new Error("Product not found")))}};e.\u0275fac=function(r){return new(r||e)(le(A1))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _I=(()=>{let e=class e{constructor(i){this.firestore=i}getComments(i){let r=qv(this.firestore,"comments"),s=SP(r,TP("productId","==",i));return os(bP(s).then(o=>o.docs.map(l=>l.data())))}addComment(i,r,s,o){let a={productId:i,comment:r,userName:s,rating:o,timestamp:new Date};return CP(qv(this.firestore,"comments"),a)}};e.\u0275fac=function(r){return new(r||e)(le(Qs))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vJ=new zc,is=(()=>{let e=class e{constructor(i,r){this.fireauth=i,this.router=r,this.user$=this.fireauth.authState}login(i,r){this.fireauth.signInWithEmailAndPassword(i,r).then(()=>{localStorage.setItem("token","true")},s=>{alert("Something went wrong")})}register(i,r,s,o){if(r!==s){alert("Passwords do not match");return}this.fireauth.createUserWithEmailAndPassword(i,r).then(a=>{a.user&&a.user.updateProfile({displayName:o}).then(()=>{alert("Registration successful")}).catch(l=>{alert("Error updating display name")})},a=>{alert("Something went wrong")})}logout(){return T(this,null,function*(){yield this.fireauth.signOut(),localStorage.removeItem("token"),this.router.navigate(["/"])})}signInWithGoogle(){return T(this,null,function*(){try{let i=new zc,r=yield this.fireauth.signInWithPopup(i);r.user&&(console.log("\u0423\u0441\u043F\u0435\u0448\u043D\u044B\u0439 \u0432\u0445\u043E\u0434:",r.user),localStorage.setItem("token","true"),this.router.navigate(["/shop"]))}catch(i){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430 \u0447\u0435\u0440\u0435\u0437 Google:",i),alert("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430")}})}};e.\u0275fac=function(r){return new(r||e)(le(Yv),le(_i))},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rs=(()=>{let e=class e{constructor(){this.cartItems=[]}getCartItems(){return this.cartItems}addToCart(i){let r=this.cartItems.find(s=>s.id===i.id);r?r.quantity+=1:this.cartItems.push(cn(Ie({},i),{quantity:1}))}removeFromCart(i){this.cartItems=this.cartItems.filter(r=>r.id!==i)}updateQuantity(i,r){let s=this.cartItems.find(o=>o.id===i);s&&(s.quantity=r>0?r:1)}getTotalAmount(){return this.cartItems.reduce((i,r)=>i+r.price*r.quantity,0)}getTotalItem(i){let r=this.cartItems.find(s=>s.id===i);return r?r.price*r.quantity:0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _z(t,e){t&1&&(d(0,"button"),m(1,"<3"),h())}function yz(t,e){t&1&&(d(0,"div",44)(1,"button",45),m(2,"<3"),h(),d(3,"span",46),m(4,"\u0412\u043E\u0439\u0434\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0436\u0435\u043B\u0430\u0435\u043C\u043E\u0435"),h()()),t&2&&(y(),L("disabled",!0))}function vz(t,e){if(t&1){let n=ue();d(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),I(4,"img",8),h(),d(5,"div",7),I(6,"img",8),h(),d(7,"div",7),I(8,"img",8),h(),d(9,"div",7),I(10,"img",8),h()(),d(11,"div",9),I(12,"img",10),h()(),d(13,"div",11)(14,"div",12)(15,"div",13),m(16),h(),d(17,"div",14)(18,"div",15),m(19),h(),d(20,"div",16)(21,"ngb-rating",17),nt("rateChange",function(r){H(n);let s=N();return tt(s.product.grade,r)||(s.product.grade=r),W(r)}),h(),m(22),h()(),d(23,"div",18)(24,"div",19),m(25," Short Description: "),h(),d(26,"div",20),m(27),h()(),d(28,"div",21)(29,"div",22),m(30," Size: "),h(),d(31,"div",23),m(32),h()(),d(33,"div",24)(34,"div",25)(35,"button",26),q("click",function(){H(n);let r=N();return W(r.addToCart(r.product))}),m(36,"BUY NOW"),h(),ds(37),ie(38,_z,2,0,"button",27),jt(39,"async"),hs(),ie(40,yz,5,1,"ng-template",null,0,mi),h()(),d(42,"div",28)(43,"div",29)(44,"div",30),m(45," SKU: "),h(),d(46,"div",31),m(47," 1995751877966 "),h()(),d(48,"div",32)(49,"div",33),m(50," Categories: "),h(),d(51,"div",34),m(52," Potter Plants "),h()(),d(53,"div",35)(54,"div",36),m(55," Tags: "),h(),d(56,"div",37),m(57," Home, Garden, Plants "),h()()(),d(58,"div",38)(59,"div",39),m(60," Share this products: "),h(),d(61,"div",40),I(62,"img",41)(63,"img",42)(64,"img",43),h()()()()()}if(t&2){let n=pi(41),i=N();y(4),Tn("alt",i.product.name),L("src",i.product.img,Pt),y(2),Tn("alt",i.product.name),L("src",i.product.img,Pt),y(2),Tn("alt",i.product.name),L("src",i.product.img,Pt),y(2),Tn("alt",i.product.name),L("src",i.product.img,Pt),y(2),Tn("alt",i.product.name),L("src",i.product.img,Pt),y(4),ge(" ",i.product.name," "),y(3),ge(" $",i.product.price," "),y(2),et("rate",i.product.grade),y(),ge(" ",i.comments.length," Customer Review "),y(5),ge(" ",i.product.description," "),y(5),ge(" ",i.product.size.name[0]||"\u2014"," "),y(3),L("routerLink","/shop"),y(3),L("ngIf",tn(39,19,i.user$))("ngIfElse",n)}}function Cz(t,e){if(t&1&&(d(0,"div",54)(1,"div",55),m(2),h(),d(3,"div",56)(4,"div",57),m(5," Living Room: "),h(),d(6,"div",58),m(7),h()(),d(8,"div",59)(9,"div",60),m(10," Dining Room "),h(),d(11,"div",61),m(12),h()(),d(13,"div",62)(14,"div",63),m(15," Office: "),h(),d(16,"div",64),m(17),h()()()),t&2){let n=N(2);y(2),ge(" ",n.product.productDescription," "),y(5),ge(" ",n.product.livingRoom," "),y(5),ge(" ",n.product.diningRoom," "),y(5),ge(" ",n.product.office," ")}}function bz(t,e){if(t&1){let n=ue();d(0,"div",73)(1,"div",74)(2,"div",75),m(3),h(),d(4,"div",76),m(5),jt(6,"date"),h(),d(7,"ngb-rating",17),nt("rateChange",function(r){let s=H(n).$implicit;return tt(s.rating,r)||(s.rating=r),W(r)}),h()(),d(8,"div",77),m(9),h()()}if(t&2){let n=e.$implicit;y(3),Ve(n.userName),y(2),Ve(M1(6,4,n.timestamp,"dd.MM.yyyy, HH:mm")),y(2),et("rate",n.rating),y(2),ge(" ",n.comment," ")}}function wz(t,e){if(t&1){let n=ue();d(0,"div",65)(1,"div",66),ie(2,bz,10,7,"div",67),h(),d(3,"div",68)(4,"div",69),m(5," \u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0441\u0432\u043E\u0439 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439 "),d(6,"textarea",70),nt("ngModelChange",function(r){H(n);let s=N(2);return tt(s.newComment,r)||(s.newComment=r),W(r)}),h()(),d(7,"div",71)(8,"div"),m(9," \u0412\u0430\u0448\u0430 \u043E\u0446\u0435\u043D\u043A\u0430: "),d(10,"ngb-rating",17),nt("rateChange",function(r){H(n);let s=N(2);return tt(s.newRating,r)||(s.newRating=r),W(r)}),h()(),d(11,"div")(12,"button",72),q("click",function(){H(n);let r=N(2);return W(r.addComment(r.newComment,r.newRating))}),m(13,"Post Comment"),h()()()()()}if(t&2){let n=N(2);y(2),L("ngForOf",n.comments),y(4),et("ngModel",n.newComment),y(4),et("rate",n.newRating)}}function Sz(t,e){if(t&1){let n=ue();d(0,"div",47)(1,"div",48)(2,"div",49),q("click",function(){H(n);let r=N();return W(r.selectedChoice="description")}),m(3," Product Description "),h(),d(4,"div",50),q("click",function(){H(n);let r=N();return W(r.selectedChoice="reviews")}),m(5),h(),I(6,"div",51),h(),ie(7,Cz,18,4,"div",52)(8,wz,14,3,"div",53),h()}if(t&2){let n=N();y(2),dt("active",n.selectedChoice==="description"),y(2),dt("active",n.selectedChoice==="reviews"),y(),ge(" Reviews (",n.comments.length,") "),y(),ji("left",n.selectedChoice==="description"?"0px":n.selectedChoice!=="reviews"?"148.02px":"197px")("width",n.selectedChoice==="description"?"148.02px":"91px"),y(),L("ngIf",n.selectedChoice==="description"),y(),L("ngIf",n.selectedChoice==="reviews")}}var yI=(()=>{let e=class e{constructor(i){this.route=U(Fc),this.productsService=U(ns),this.commentsService=U(_I),this.cartService=U(rs),this.authService=U(is),this.product=null,this.comments=[],this.newComment="",this.user$=this.authService.user$,this.newRating=0,this.selectedChoice="description",i.max=5,i.readonly=!1}ngOnInit(){this.route.paramMap.subscribe(i=>{let r=i.get("id");r&&(this.productId=+r,this.loadProductDetails(),this.loadComments())})}ngOnDestroy(){}loadProductDetails(){this.productsService.getProductById(this.productId).subscribe(i=>{this.product=i},i=>{console.error("Error loading product:",i)})}loadComments(){this.commentsService.getComments(this.productId).subscribe(i=>{this.comments=i.map(r=>cn(Ie({},r),{timestamp:r.timestamp.toDate()})),this.updateProductRating()},i=>{console.error("Error loading comments:",i)})}addComment(i,r){i.trim()&&this.user$.subscribe(s=>{s&&s.displayName?this.commentsService.addComment(this.productId,i,s.displayName,r).then(()=>{this.comments.push({comment:i,userName:s.displayName,rating:r,timestamp:new Date}),this.newComment="",this.newRating=0,this.updateProductRating()}).catch(o=>console.error("Error adding comment:",o)):console.log("User not logged in or user has no displayName")})}updateProductRating(){if(this.product&&this.comments.length>0){let i=this.comments.reduce((r,s)=>r+s.rating,0);this.product.grade=i/this.comments.length}else this.product&&(this.product.grade=0)}addToCart(i){this.cartService.addToCart(i)}};e.\u0275fac=function(r){return new(r||e)($(r1))},e.\u0275cmp=de({type:e,selectors:[["app-product-details"]],decls:3,vars:2,consts:[["notLoggedOut",""],[1,"container"],["class","productDetails--main",4,"ngIf"],["class","productDetails--info--main--description--reviews--main",4,"ngIf"],[1,"productDetails--main"],[1,"productDetails--photo--main"],[1,"productDetails--photo-small"],[1,"productDetails--photo-small--item"],["width","100","height","100",3,"src","alt"],[1,"productDetails--photo--big"],["width","404","height","404",3,"src","alt"],[1,"productDetails--info--main"],[1,"productDetails--info--titles-main"],[1,"productDetails--info--titles-main-title"],[1,"productDetails--info--titles-main--costAndRating"],[1,"productDetails--info--titles-main--costAndRating--COST"],[1,"productDetails--info--titles-main--costAndRating--RATING"],[3,"rateChange","rate"],[1,"productDetails--info--Description"],[1,"productDetails--info--Description--title"],[1,"productDetails--info--Description--subtitle"],[1,"productDetails--info--Size"],[1,"productDetails--info--Size--title"],[1,"productDetails--info--Size--choice"],[1,"productDetails--info--action"],[1,"productDetails--info--buyAndAdd--action"],[3,"click","routerLink"],[4,"ngIf","ngIfElse"],[1,"productDetails--info--SCT"],[1,"productDetails--info--SCT-S"],[1,"productDetails--info--SCT-S-title"],[1,"productDetails--info--SCT-S-subtitle"],[1,"productDetails--info--SCT-C"],[1,"productDetails--info--SCT-C-title"],[1,"productDetails--info--SCT-C-subtitle"],[1,"productDetails--info--SCT-T"],[1,"productDetails--info--SCT-T-title"],[1,"productDetails--info--SCT-T-subtitle"],[1,"productDetails--info--ShareProducts"],[1,"productDetails--info--ShareProducts--title"],[1,"productDetails--info--ShareProducts--image"],["src","assets/Icons/face.png","width","7.5","height","15","alt","f"],["src","assets/Icons/twitt.png","width","15","height","12","alt","t"],["src","assets/Icons/linkk.png","width","15","height","15","alt","in"],[1,"tooltip-container"],[1,"disabled",3,"disabled"],[1,"tooltip-text"],[1,"productDetails--info--main--description--reviews--main"],[1,"productDetails--info--main--description--reviews--choice--main"],[1,"productDetails--info--main--description--choice",3,"click"],[1,"productDetails--info--main--reviews--choice",3,"click"],[1,"underline"],["class","productDetails--info--main--description--reviews--main--block",4,"ngIf"],["class","productDetails--info--main--description--reviewsComment--main",4,"ngIf"],[1,"productDetails--info--main--description--reviews--main--block"],[1,"productDetails--info--main--description--ProductDescription"],[1,"productDetails--info--main--description--LivingRoom"],[1,"productDetails--info--main--description--LivingRoom--title"],[1,"productDetails--info--main--description--LivingRoom--subtitle"],[1,"productDetails--info--main--description--DiningsRoom"],[1,"productDetails--info--main--description--DiningsRoom--title"],[1,"productDetails--info--main--description--DiningsRoom--subtitle"],[1,"productDetails--info--main--description--Office"],[1,"productDetails--info--main--description--Office--title"],[1,"productDetails--info--main--description--Office--subtitle"],[1,"productDetails--info--main--description--reviewsComment--main"],[1,"productDetails--info--main--description--reviews--list"],["class","comment",4,"ngFor","ngForOf"],[1,"productDetails--info--main--description--reviews--form"],[1,"productDetails--info--main--description--reviews--form--addComment"],["placeholder","",3,"ngModelChange","ngModel"],[1,"productDetails--info--main--description--reviews--form--addComment--action"],[3,"click"],[1,"comment"],[1,"comment-title"],[1,"comment-user-title"],[1,"comment-user-date"],[1,"comment-user-comment"]],template:function(r,s){r&1&&(d(0,"div",1),ie(1,vz,65,21,"div",2)(2,Sz,9,11,"div",3),h()),r&2&&(y(),L("ngIf",s.product),y(),L("ngIf",s.product))},dependencies:[nn,On,mr,rn,In,Qn,oI,so,kc],styles:[".productDetails--main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:100px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--photo--main[_ngcontent-%COMP%]{display:flex;width:574px;height:458px;justify-content:space-between}.productDetails--main[_ngcontent-%COMP%]   .productDetails--photo--main[_ngcontent-%COMP%]   .productDetails--photo-small[_ngcontent-%COMP%]{border-radius:6px;justify-content:space-between;display:flex;flex-direction:column}.productDetails--main[_ngcontent-%COMP%]   .productDetails--photo--main[_ngcontent-%COMP%]   .productDetails--photo-small[_ngcontent-%COMP%]   .productDetails--photo-small--item[_ngcontent-%COMP%]{background:#fbfbfb}.productDetails--main[_ngcontent-%COMP%]   .productDetails--photo--main[_ngcontent-%COMP%]   .productDetails--photo--big[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:6px;background:#fbfbfb}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]{width:574px;height:458px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--titles-main[_ngcontent-%COMP%]   .productDetails--info--titles-main-title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:28px;font-weight:700;text-align:left}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--titles-main[_ngcontent-%COMP%]   .productDetails--info--titles-main--costAndRating[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:.3px solid rgba(70,163,88,.5);margin-bottom:15px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--titles-main[_ngcontent-%COMP%]   .productDetails--info--titles-main--costAndRating[_ngcontent-%COMP%]   .productDetails--info--titles-main--costAndRating--COST[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:22px;font-weight:700;text-align:left}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--titles-main[_ngcontent-%COMP%]   .productDetails--info--titles-main--costAndRating[_ngcontent-%COMP%]   .productDetails--info--titles-main--costAndRating--RATING[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;line-height:16px;letter-spacing:0%;text-align:left}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--Description[_ngcontent-%COMP%]   .productDetails--info--Description--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:500;text-align:left;padding-bottom:10px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--Description[_ngcontent-%COMP%]   .productDetails--info--Description--subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:24px;letter-spacing:0%;text-align:left;padding-bottom:24px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--Size[_ngcontent-%COMP%]{padding-bottom:23px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--Size[_ngcontent-%COMP%]   .productDetails--info--Size--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:500;line-height:16px;text-align:left;padding-bottom:10px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--Size[_ngcontent-%COMP%]   .productDetails--info--Size--choice[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;box-sizing:border-box;border:1px solid rgb(70,163,88);color:#46a358;border-radius:50%;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]{display:flex;align-items:center;padding-bottom:26px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--quantity--action[_ngcontent-%COMP%]{padding-right:20px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--quantity--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:33px;height:33px;border-radius:29px;background:linear-gradient(180deg,#46a358,#46a358cc);color:#fff;border:none}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--quantity--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){margin-right:15px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--quantity--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){margin-left:15px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   .tooltip-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   .tooltip-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:14px;font-weight:700;line-height:20px;text-transform:uppercase;width:40px;height:40px;box-sizing:border-box;border:1px solid rgb(70,163,88);border-radius:6px;background:#fff}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   .tooltip-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   .tooltip-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover{cursor:not-allowed}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   .tooltip-text[_ngcontent-%COMP%]{visibility:hidden;background-color:green;color:#fff;text-align:center;padding:5px 10px;border-radius:5px;position:absolute;bottom:100%;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s;white-space:nowrap}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   .tooltip-container[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(1){width:130px;height:40px;background:linear-gradient(180deg,#46a358,#46a358cc);color:#fff;border:none}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){color:#46a358;font-family:Oswald,sans-serif;font-size:14px;font-weight:700;line-height:20px;text-transform:uppercase;width:40px;height:40px;box-sizing:border-box;border:1px solid rgb(70,163,88);border-radius:6px;background:#fff}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2):disabled{background-color:#ccc}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--action[_ngcontent-%COMP%]   .productDetails--info--buyAndAdd--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2):disabled:hover{cursor:not-allowed}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]{display:flex;flex-direction:column}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-S[_ngcontent-%COMP%]{display:flex;padding-bottom:10px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-S[_ngcontent-%COMP%]   .productDetails--info--SCT-S-title[_ngcontent-%COMP%]{color:#acacac;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;text-align:left;padding-right:7px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-S[_ngcontent-%COMP%]   .productDetails--info--SCT-S-subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;text-align:left}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-C[_ngcontent-%COMP%]{display:flex;padding-bottom:10px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-C[_ngcontent-%COMP%]   .productDetails--info--SCT-C-title[_ngcontent-%COMP%]{color:#acacac;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;text-align:left;padding-right:7px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-C[_ngcontent-%COMP%]   .productDetails--info--SCT-C-subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;text-align:left}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-T[_ngcontent-%COMP%]{display:flex;padding-bottom:10px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-T[_ngcontent-%COMP%]   .productDetails--info--SCT-T-title[_ngcontent-%COMP%]{color:#acacac;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;text-align:left;padding-right:7px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--SCT[_ngcontent-%COMP%]   .productDetails--info--SCT-T[_ngcontent-%COMP%]   .productDetails--info--SCT-T-subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;text-align:left}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--ShareProducts[_ngcontent-%COMP%]{display:flex}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--ShareProducts[_ngcontent-%COMP%]   .productDetails--info--ShareProducts--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:500;text-align:left;padding-right:7px}.productDetails--main[_ngcontent-%COMP%]   .productDetails--info--main[_ngcontent-%COMP%]   .productDetails--info--ShareProducts[_ngcontent-%COMP%]   .productDetails--info--ShareProducts--image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]{padding-bottom:128px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--choice--main[_ngcontent-%COMP%]{max-width:288px;min-width:288px;display:flex;justify-content:space-between;position:relative;padding-bottom:10.5px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--choice--main[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{cursor:pointer;transition:color .3s}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--choice--main[_ngcontent-%COMP%]   div.active[_ngcontent-%COMP%]{color:green}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--choice--main[_ngcontent-%COMP%]   .underline[_ngcontent-%COMP%]{position:absolute;bottom:0;height:3px;background-color:green;width:50%;transition:all .3s ease}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--choice--main[_ngcontent-%COMP%]   .productDetails--info--main--description--choice[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--choice--main[_ngcontent-%COMP%]   .productDetails--info--main--reviews--choice[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--ProductDescription[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:16px;font-weight:400;line-height:24px;letter-spacing:0%;text-align:left;padding-top:20px;padding-bottom:18px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--LivingRoom[_ngcontent-%COMP%]{padding-bottom:18px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--LivingRoom[_ngcontent-%COMP%]   .productDetails--info--main--description--LivingRoom--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:700;line-height:24px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--LivingRoom[_ngcontent-%COMP%]   .productDetails--info--main--description--LivingRoom--subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:16px;font-weight:400;line-height:24px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--DiningsRoom[_ngcontent-%COMP%]{padding-bottom:18px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--DiningsRoom[_ngcontent-%COMP%]   .productDetails--info--main--description--DiningsRoom--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:700;line-height:24px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--DiningsRoom[_ngcontent-%COMP%]   .productDetails--info--main--description--DiningsRoom--subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:16px;font-weight:400;line-height:24px;letter-spacing:0%;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--Office[_ngcontent-%COMP%]   .productDetails--info--main--description--Office--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:700;line-height:24px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--main--block[_ngcontent-%COMP%]   .productDetails--info--main--description--Office[_ngcontent-%COMP%]   .productDetails--info--main--description--Office--subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:16px;font-weight:400;line-height:24px;letter-spacing:0%;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]{display:flex;flex-direction:column}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{width:600px;border-top:1px solid #e3e3e3;padding:20px 0 28px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:15px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-title[_ngcontent-%COMP%]   .comment-user-title[_ngcontent-%COMP%]{color:#000;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:24px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-title[_ngcontent-%COMP%]   .comment-user-date[_ngcontent-%COMP%]{color:#000;font-family:Oswald,sans-serif;font-size:18px;font-weight:600;line-height:24px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--list[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]   .comment-user-comment[_ngcontent-%COMP%]{color:#000;font-family:Oswald,sans-serif;font-size:16px;font-weight:300;line-height:24px;text-align:left}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form[_ngcontent-%COMP%]{width:600px;display:flex;justify-content:space-between}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form--addComment[_ngcontent-%COMP%]{display:flex;flex-direction:column}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form--addComment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:350px;height:150px}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form--addComment--action[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.productDetails--info--main--description--reviews--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviewsComment--main[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form[_ngcontent-%COMP%]   .productDetails--info--main--description--reviews--form--addComment--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;width:200px;height:35px;border:none;border-radius:6px;background:#46a358}ngb-rating[_ngcontent-%COMP%]{color:#ffac0c!important}"]});let t=e;return t})();var Sf=(()=>{let e=class e{constructor(){this.showLoginComponent=!1}toggleLoginComponent(){this.showLoginComponent=!this.showLoginComponent}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vI=()=>({color:"rgb(70, 163, 88)"});function Tz(t,e){t&1&&(d(0,"p",15),m(1,"Login"),h()),t&2&&L("ngStyle",Vf(1,vI))}function Ez(t,e){t&1&&(d(0,"p"),m(1,"Login"),h())}function Mz(t,e){t&1&&(d(0,"p",15),m(1,"Register"),h()),t&2&&L("ngStyle",Vf(1,vI))}function Oz(t,e){t&1&&(d(0,"p"),m(1,"Register"),h())}function Dz(t,e){if(t&1){let n=ue();d(0,"div",16)(1,"div",17),m(2," Enter your username and password to login. "),h(),d(3,"div",18)(4,"input",19),nt("ngModelChange",function(r){H(n);let s=N();return tt(s.email,r)||(s.email=r),W(r)}),h()(),d(5,"div",20)(6,"input",21),nt("ngModelChange",function(r){H(n);let s=N();return tt(s.password,r)||(s.password=r),W(r)}),h()(),d(7,"div",22)(8,"a",23),m(9,"Forgot Password?"),h()(),d(10,"div",24)(11,"button",5),q("click",function(){H(n);let r=N();return W(r.login())}),m(12,"Login"),h()()()}if(t&2){let n=N();y(4),et("ngModel",n.email),y(2),et("ngModel",n.password)}}function Pz(t,e){if(t&1){let n=ue();d(0,"div",16)(1,"div",17),m(2," Enter your email and password to register. "),h(),d(3,"div",25)(4,"input",26),nt("ngModelChange",function(r){H(n);let s=N();return tt(s.username,r)||(s.username=r),W(r)}),h()(),d(5,"div",18)(6,"input",19),nt("ngModelChange",function(r){H(n);let s=N();return tt(s.email,r)||(s.email=r),W(r)}),h()(),d(7,"div",20)(8,"input",21),nt("ngModelChange",function(r){H(n);let s=N();return tt(s.password,r)||(s.password=r),W(r)}),h()(),d(9,"div",27)(10,"input",28),nt("ngModelChange",function(r){H(n);let s=N();return tt(s.confirmPassword,r)||(s.confirmPassword=r),W(r)}),h()(),d(11,"div",24)(12,"button",5),q("click",function(){H(n);let r=N();return W(r.register())}),m(13,"Register"),h()()()}if(t&2){let n=N();y(4),et("ngModel",n.username),y(2),et("ngModel",n.email),y(2),et("ngModel",n.password),y(2),et("ngModel",n.confirmPassword)}}function Iz(t,e){t&1&&(d(0,"div",29)(1,"p"),m(2,"Or login with"),h()())}function xz(t,e){t&1&&(d(0,"div",29)(1,"p"),m(2,"Or register with"),h()())}var CI=(()=>{let e=class e{constructor(){this.auth=U(is),this.loginService=U(Sf),this.email="",this.password="",this.username="",this.confirmPassword="",this.showLoginOrRegister=!0}login(){if(this.email==""){alert("Please enter Email");return}if(this.password==""){alert("Please enter Password");return}this.auth.login(this.email,this.password),this.email="",this.password=""}register(){if(this.username==""){alert("Please enter Username");return}if(this.email==""){alert("Please enter Email");return}if(this.password==""){alert("Please enter Password");return}if(this.confirmPassword==""){alert("Please enter Confirm Password");return}this.auth.register(this.email,this.password,this.confirmPassword,this.username),this.email="",this.password="",this.username="",this.confirmPassword=""}showLogin(){this.showLoginOrRegister=!0}showRegister(){this.showLoginOrRegister=!1}toggleLoginComponent(){this.loginService.toggleLoginComponent()}signInWithGoogle(){this.auth.signInWithGoogle(),this.toggleLoginComponent()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-login"]],decls:25,vars:8,consts:[[1,"Login","container"],[1,"login--main"],[1,"close",3,"click"],[1,"choicelogOrReg"],[1,"choiceLogin"],[3,"click"],[3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"choicelogOrRegbetween"],[1,"choiceRegister"],["class","PersonData",4,"ngIf"],[1,"AlternativeEntrance"],["class","AlternativeEntrance--title",4,"ngIf"],[1,"AlternativeEntrance--Google-btn"],[1,"AlternativeEntrance--Facebook-btn"],[3,"ngStyle"],[1,"PersonData"],[1,"PersonData--Title"],[1,"PersonData--Email"],["type","text","name","","placeholder","Enter your email address",3,"ngModelChange","ngModel"],[1,"PersonData--Password"],["type","password","name","","placeholder","Password",3,"ngModelChange","ngModel"],[1,"PersonData--Forgot"],["href","#"],[1,"PersonData--Login-btn"],[1,"PersonData--Username"],["type","text","name","","placeholder","Username",3,"ngModelChange","ngModel"],[1,"PersonData--ConfirmPassword"],["type","password","name","","placeholder","Confirm Password",3,"ngModelChange","ngModel"],[1,"AlternativeEntrance--title"]],template:function(r,s){r&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),q("click",function(){return s.toggleLoginComponent()}),h(),d(3,"div",3)(4,"div",4)(5,"button",5),q("click",function(){return s.showLogin()}),ie(6,Tz,2,2,"p",6)(7,Ez,2,0,"p",7),h()(),d(8,"div",8),m(9," | "),h(),d(10,"div",9)(11,"button",5),q("click",function(){return s.showRegister()}),ie(12,Mz,2,2,"p",6)(13,Oz,2,0,"p",7),h()()(),ie(14,Dz,13,2,"div",10)(15,Pz,14,4,"div",10),d(16,"div",11),ie(17,Iz,3,0,"div",12)(18,xz,3,0,"div",12),d(19,"div",13)(20,"button",5),q("click",function(){return s.signInWithGoogle()}),m(21,"Google"),h()(),d(22,"div",14)(23,"button"),m(24,"Facebook"),h()()()()()),r&2&&(y(6),L("ngIf",s.showLoginOrRegister),y(),L("ngIf",!s.showLoginOrRegister),y(5),L("ngIf",!s.showLoginOrRegister),y(),L("ngIf",s.showLoginOrRegister),y(),L("ngIf",s.showLoginOrRegister),y(),L("ngIf",!s.showLoginOrRegister),y(2),L("ngIf",s.showLoginOrRegister),y(),L("ngIf",!s.showLoginOrRegister))},dependencies:[On,I1,rn,In,Qn],styles:['@charset "UTF-8";.show[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}.Login[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;width:500px;height:100%;display:flex;justify-content:center;align-items:center;position:fixed;inset:0;z-index:100}.Login[_ngcontent-%COMP%]   .choiceLogin[_ngcontent-%COMP%]   p.selected[_ngcontent-%COMP%]{color:green}.Login[_ngcontent-%COMP%]   .choiceRegister[_ngcontent-%COMP%]   p.selected[_ngcontent-%COMP%]{color:red}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;flex-direction:column;align-items:center;width:100vh;max-width:500px;background-color:#fff;padding:20px;border-radius:10px;border:1px solid rgb(234,234,234)}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:18px;height:18px;background-color:#fff;text-align:right;cursor:pointer}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:before, .Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:after{content:"";position:absolute;width:2px;height:100%;background-color:#46a358;top:0;left:calc(50% - 1px);transition:transform .3s ease-in-out,background-color .3s ease-in-out}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:before{transform:rotate(45deg)}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:after{transform:rotate(-45deg)}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover:before{transform:rotate(90deg)}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover:after{transform:rotate(-90deg)}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover:before, .Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover:after{background-color:#46a358}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .choicelogOrReg[_ngcontent-%COMP%]{width:150px;display:flex;justify-content:space-evenly;font-size:20px;font-weight:500;line-height:16px;letter-spacing:0%;text-align:left;margin:0 0 53px}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .choicelogOrReg[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:#fff;color:#3d3d3d;font-size:20px;font-weight:500;line-height:16px;letter-spacing:0%;text-align:left;cursor:pointer}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .PersonData[_ngcontent-%COMP%]{height:341px;display:flex;align-items:center;flex-direction:column;justify-content:space-between}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .PersonData[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px;height:40px;box-sizing:border-box;border:1px solid rgb(234,234,234);border-radius:5px;padding:0 14px}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .PersonData[_ngcontent-%COMP%]   .PersonData--Title[_ngcontent-%COMP%]{color:#3d3d3d;font-size:13px;font-weight:400;line-height:16px;letter-spacing:0%;text-align:left}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .PersonData[_ngcontent-%COMP%]   .PersonData--Email[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px;height:40px;box-sizing:border-box;border:1px solid rgb(234,234,234);border-radius:5px;padding:0 14px}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .PersonData[_ngcontent-%COMP%]   .PersonData--Password[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px;height:40px;box-sizing:border-box;border:1px solid rgb(234,234,234);border-radius:5px}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .PersonData[_ngcontent-%COMP%]   .PersonData--Forgot[_ngcontent-%COMP%]{color:#46a358;font-size:14px;font-weight:400;line-height:16px;letter-spacing:0%;text-align:right;margin:0 0 14px}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .PersonData[_ngcontent-%COMP%]   .PersonData--Forgot[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#46a358}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .PersonData[_ngcontent-%COMP%]   .PersonData--Login-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:300px;height:45px;border-radius:5px;background:#46a358;color:#fff;font-size:16px;font-weight:700;line-height:16px;letter-spacing:0%;border:none;text-align:center;cursor:pointer}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .AlternativeEntrance[_ngcontent-%COMP%]   .AlternativeEntrance--title[_ngcontent-%COMP%]{color:#3d3d3d;font-size:13px;font-weight:400;line-height:16px;letter-spacing:0%;text-align:center;margin:0 0 27px}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .AlternativeEntrance[_ngcontent-%COMP%]   .AlternativeEntrance--Google-btn[_ngcontent-%COMP%]{margin:0 0 15px}.Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .AlternativeEntrance[_ngcontent-%COMP%]   .AlternativeEntrance--Google-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .Login[_ngcontent-%COMP%]   .login--main[_ngcontent-%COMP%]   .AlternativeEntrance[_ngcontent-%COMP%]   .AlternativeEntrance--Facebook-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:300px;height:40px;box-sizing:border-box;background:#fff;border:1px solid rgb(234,234,234);border-radius:5px;cursor:pointer}']});let t=e;return t})();function kz(t,e){t&1&&(d(0,"div",30),I(1,"app-login"),h())}function Rz(t,e){if(t&1){let n=ue();d(0,"div",35)(1,"div",36),I(2,"img",37),h(),d(3,"div",38)(4,"div",39),m(5),h(),d(6,"div",40),m(7),h()(),d(8,"div",41)(9,"button",42),q("click",function(){let r=H(n).$implicit,s=N(2);return W(s.addtoCart(r))}),m(10,"Buy"),h(),d(11,"button",43),q("click",function(){let r=H(n).$implicit,s=N(2);return W(s.goToProductDetails(r.id))}),m(12,"Details"),h()()()}if(t&2){let n=e.$implicit;y(2),L("src",n.img,Pt),y(3),Ve(n.name),y(2),ge("$",n.price,""),y(2),L("routerLink","/shop")}}function Nz(t,e){if(t&1){let n=ue();d(0,"div",31)(1,"h3"),m(2,"\u0421\u043F\u0438\u0441\u043E\u043A"),h(),d(3,"div",32),ie(4,Rz,13,4,"div",33),h(),d(5,"button",34),q("click",function(){H(n);let r=N();return W(r.toggleSearchCartModal())}),m(6,"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"),h()()}if(t&2){let n=N();y(4),L("ngForOf",n.filteredObjects)}}function Fz(t,e){if(t&1&&(d(0,"span",44),m(1),h()),t&2){let n=N();y(),Ve(n.cartItemsCount)}}function Lz(t,e){if(t&1){let n=ue();ds(0,45),d(1,"p"),m(2),h(),d(3,"button",46),q("click",function(){H(n);let r=N();return W(r.logOut())}),m(4,"Logout"),h(),hs()}if(t&2){let n=e.ngIf;y(2),ge("\u041F\u0440\u0438\u0432\u0435\u0442, ",n.displayName||"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C","!")}}function Bz(t,e){if(t&1){let n=ue();d(0,"button",46),q("click",function(){H(n);let r=N();return W(r.toggleLoginComponent())}),m(1,"Login"),h()}}var Tf=(()=>{let e=class e{constructor(){this.loginService=U(Sf),this.cartService=U(rs),this.productService=U(ns),this.router=U(_i),this.authService=U(is),this.showSearchModal=!1,this.searchText="",this.filteredObjects=[],this.placeholderText="",this.fullText="Search",this.isMenuOpen=!1,this.user$=this.authService.user$,this.addtoCart=this.cartService.addToCart}ngOnInit(){let i=0,r=setInterval(()=>{this.placeholderText=this.fullText.slice(0,i),i++,i>this.fullText.length&&clearInterval(r)},300)}goToProductDetails(i){console.log("Attempting to navigate to product:",i),this.router.navigate(["/shop/product",i]).then(r=>console.log("Navigation success:",r),r=>console.error("Navigation error:",r)),this.searchText="",this.toggleSearchCartModal()}infoProductServiceFindSearch(i){let r=this.productService.products,s=i.target,o=s.value.toLowerCase();console.log(r,"infoProductServiceFindSearch"),console.log(s.value),this.showSearchModal=o!=="",this.filteredObjects=r.filter(a=>a.name.toLowerCase().includes(o))}toggleLoginComponent(){this.loginService.toggleLoginComponent()}checkLoginStatus(){return this.loginService.showLoginComponent}get cartItems(){return this.cartService.getCartItems()}get cartItemsCount(){return this.cartService.getCartItems().length}toggleSearchCartModal(){this.showSearchModal=!this.showSearchModal}logOut(){this.authService.logout()}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-header"]],decls:43,vars:13,consts:[["notLoggedIn",""],["class","container-sm",4,"ngIf"],[1,"Header--main","container"],[1,"Header--logo",3,"routerLink"],["width","151.000000","height","35.000000","viewBox","0 0 151 35","fill","none","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Vector","d","M17.15 0C7.67 0 0 7.67 0 17.15C0 26.02 6.73 33.31 15.37 34.2C14.84 29.91 15.04 26.4 15.7 23.51C15.33 21.72 14.48 19.07 12.57 17.18C12.57 17.18 13.83 19.07 14.51 21.62C14.51 21.62 14.52 21.62 14.52 21.63C14.59 21.9 14.65 22.17 14.71 22.46C14.72 22.52 14.74 22.59 14.75 22.66C14.8 22.95 14.85 23.24 14.88 23.54C5.19 22.35 3.12 13.65 3.35 10.37C13.66 10.94 15.77 17.82 16.08 22.09C19.45 11.04 30.18 10.4 31.06 10.37C31.45 18.87 25.15 25.5 17.61 26.08C17.66 25.85 17.71 25.61 17.77 25.39C17.79 25.32 17.81 25.26 17.83 25.19C17.87 25.02 17.92 24.86 17.97 24.7C17.99 24.63 18.01 24.56 18.03 24.49C18.09 24.31 18.15 24.14 18.21 23.96C18.23 23.92 18.24 23.88 18.26 23.84C18.33 23.63 18.41 23.43 18.5 23.23C18.5 23.21 18.51 23.19 18.52 23.17C18.52 23.17 18.52 23.17 18.52 23.17C20.45 18.5 24.02 15.44 24.02 15.44C17.02 19.48 15.84 29.99 15.65 34.22C16.15 34.26 16.64 34.29 17.15 34.29C26.62 34.29 34.3 26.62 34.3 17.15C34.3 7.67 26.62 0 17.15 0Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M46.7 10.74C48.97 10.74 50.82 11.71 52.02 13.49L49.77 15.41C48.97 14.28 47.99 13.7 46.64 13.7C44.56 13.7 43.27 15.07 43.27 17.15C43.27 19.27 44.64 20.69 46.83 20.69C48.01 20.69 48.95 20.28 49.55 19.59L49.55 19L46.66 19L46.66 16.23L52.77 16.23L52.77 20.13C52.19 21.16 51.36 21.98 50.3 22.62C49.23 23.24 48.03 23.56 46.7 23.56C42.99 23.61 39.92 20.73 39.97 17.15C39.91 13.59 42.99 10.68 46.7 10.74Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M61.95 23.33L59.16 19.49L57.83 19.49L57.83 23.33L54.61 23.33L54.61 10.96L59.46 10.96C62.22 10.96 64.24 12.65 64.24 15.22C64.24 16.73 63.51 17.99 62.29 18.74L65.55 23.33L61.95 23.33ZM57.83 16.68L59.48 16.68C60.38 16.68 60.96 16.09 60.96 15.22C60.96 14.34 60.38 13.77 59.48 13.77L57.83 13.77L57.83 16.68Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M66.83 10.96L75.41 10.96L75.41 13.87L70.05 13.87L70.05 15.57L73.87 15.57L73.87 18.27L70.05 18.27L70.05 20.42L75.63 20.42L75.63 23.33L66.83 23.33L66.83 10.96Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M77.64 10.96L86.22 10.96L86.22 13.87L80.86 13.87L80.86 15.57L84.68 15.57L84.68 18.27L80.86 18.27L80.86 20.42L86.44 20.42L86.44 23.33L77.64 23.33L77.64 10.96Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M99.41 10.96L99.41 23.55L98.38 23.55L91.68 17.05L91.68 23.33L88.45 23.33L88.45 10.74L89.48 10.74L96.19 17.15L96.19 10.96L99.41 10.96Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M103.26 19.13C103.99 20.1 104.76 20.72 106.01 20.72C106.86 20.72 107.29 20.42 107.29 19.82C107.29 19.28 107 19.11 106.03 18.68L104.76 18.12C102.71 17.21 101.63 16.05 101.63 14.39C101.63 12.2 103.43 10.73 105.95 10.73C107.99 10.73 109.44 11.71 110.18 13.22L108.03 14.87C107.43 13.98 106.87 13.56 105.99 13.56C105.31 13.56 104.88 13.83 104.88 14.35C104.88 14.8 105.15 15.05 105.95 15.36L107.38 15.96C109.53 16.86 110.54 17.95 110.54 19.69C110.54 22.09 108.57 23.55 106 23.55C103.78 23.55 101.98 22.48 101.08 20.78L103.26 19.13Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M112.39 10.96L115.61 10.96L115.61 15.48L120.13 15.48L120.13 10.96L123.35 10.96L123.35 23.33L120.13 23.33L120.13 18.38L115.61 18.38L115.61 23.33L112.39 23.33L112.39 10.96Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M131.84 10.74C135.44 10.66 138.6 13.6 138.53 17.15C138.6 20.72 135.44 23.61 131.84 23.55C128.22 23.61 125.11 20.72 125.19 17.15C125.11 13.6 128.22 10.66 131.84 10.74ZM131.85 13.7C129.87 13.7 128.48 15.1 128.48 17.15C128.48 18.18 128.8 19.02 129.42 19.66C130.04 20.27 130.86 20.59 131.85 20.59C133.77 20.59 135.23 19.21 135.23 17.15C135.23 15.1 133.77 13.7 131.85 13.7Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M140.37 10.96L145.22 10.96C147.97 10.96 150 12.65 150 15.22C150 17.75 147.92 19.49 145.22 19.49L143.59 19.49L143.59 23.33L140.37 23.33L140.37 10.96ZM145.24 16.68C146.13 16.68 146.72 16.09 146.72 15.22C146.72 14.34 146.13 13.77 145.24 13.77L143.59 13.77L143.59 16.68L145.24 16.68Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],[1,"Header--navigation"],[3,"routerLink"],[1,"Header--info"],[1,"Header--search"],["type","text",1,"Header--search--item",3,"ngModelChange","input","ngModel","placeholder"],["class","cart-search-modal",4,"ngIf"],["width","20.000000","height","20.000000","viewBox","0 0 21 20","fill","none","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Vector","d","M14.57 16C10.57 19.18 4.98 18.3 2.02 14.65C-0.83 11.12 -0.65 6.04 2.44 2.82C5.65 -0.51 10.68 -0.95 14.33 1.78C15.64 2.76 16.61 4 17.25 5.5C17.89 7.02 18.08 8.59 17.86 10.22C17.64 11.83 17 13.27 15.94 14.62C16.03 14.67 16.12 14.71 16.19 14.78C17.34 15.93 18.49 17.08 19.64 18.23C19.92 18.5 20.05 18.82 19.97 19.2C19.81 19.96 18.91 20.25 18.32 19.73C18.05 19.49 17.8 19.22 17.54 18.96C16.6 18.01 15.65 17.06 14.7 16.12C14.66 16.08 14.62 16.05 14.57 16ZM15.96 8.98C15.97 5.12 12.85 2 8.98 2C5.12 1.99 2 5.09 1.99 8.94C1.97 12.81 5.08 15.94 8.96 15.96C12.81 15.98 15.95 12.85 15.96 8.98Z","fill","#3D3D3D","fill-opacity","1.000000","fill-rule","nonzero"],[1,"Header--shop"],["width","24.000000","height","24.000000","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",3,"routerLink"],["id","Vector","d","M16.15 20.25L8.89 20.25C5.79 20.25 3.26 17.72 3.26 14.62L3.26 8.85C3.26 5.97 1.82 3.3 -0.58 1.72C-1.01 1.43 -1.13 0.85 -0.85 0.42C-0.56 -0.02 0.02 -0.14 0.45 0.15C1.82 1.06 2.94 2.25 3.74 3.63C3.91 3.82 5.3 5.29 7.57 5.29L18.37 5.29C21.32 5.24 23.62 8.19 22.85 11.04L21.61 15.99C20.98 18.49 18.74 20.25 16.15 20.25ZM4.9 6.64C5.06 7.36 5.14 8.1 5.14 8.85L5.14 14.62C5.14 16.69 6.82 18.37 8.89 18.37L16.15 18.37C17.87 18.37 19.37 17.2 19.79 15.53L21.03 10.58C21.49 8.89 20.12 7.13 18.37 7.17L7.57 7.17C6.54 7.17 5.65 6.94 4.9 6.64ZM8.42 22.82C8.42 22.18 7.89 21.65 7.25 21.65C5.69 21.71 5.69 23.93 7.25 24C7.89 24 8.42 23.47 8.42 22.82ZM17.75 22.82C17.75 22.18 17.22 21.65 16.57 21.65C15.02 21.71 15.02 23.93 16.57 24C17.22 24 17.75 23.47 17.75 22.82ZM19.31 9.98C19.31 9.46 18.89 9.04 18.37 9.04L7.95 9.04C6.71 9.09 6.71 10.87 7.95 10.92L18.37 10.92C18.89 10.92 19.31 10.5 19.31 9.98Z","fill","#3D3D3D","fill-opacity","1.000000","fill-rule","nonzero"],["class","cart-count",4,"ngIf"],[1,"Header--login"],["class","LoggedIn",4,"ngIf","ngIfElse"],[1,"notLoggedIn"],[1,"container-sm"],[1,"cart-search-modal"],[1,"cart-items"],["class","cart-search-item",4,"ngFor","ngForOf"],[1,"close-cart",3,"click"],[1,"cart-search-item"],[1,"Products--body"],["alt","","width","100","height","100",3,"src"],[1,"Products--Info"],[1,"Products--Name"],[1,"Products--Price"],[1,"Product--action"],["mat-flat-button","",3,"click","routerLink"],["mat-flat-button","",3,"click"],[1,"cart-count"],[1,"LoggedIn"],[3,"click"]],template:function(r,s){if(r&1){let o=ue();d(0,"header"),ie(1,kz,2,0,"div",1),d(2,"div",2)(3,"div",3),en(),d(4,"svg",4),I(5,"defs")(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8)(10,"path",9)(11,"path",10)(12,"path",11)(13,"path",12)(14,"path",13)(15,"path",14),h()(),un(),d(16,"div",15)(17,"ul")(18,"li",16),m(19,"Home"),h(),d(20,"li",16),m(21,"Shop"),h(),d(22,"li"),m(23,"Plant Care"),h(),d(24,"li"),m(25,"Blogs"),h()()(),d(26,"div",17)(27,"div",18)(28,"input",19),nt("ngModelChange",function(l){return H(o),tt(s.searchText,l)||(s.searchText=l),W(l)}),q("input",function(l){return H(o),W(s.infoProductServiceFindSearch(l))}),h(),ie(29,Nz,7,1,"div",20),en(),d(30,"svg",21),I(31,"defs")(32,"path",22),h()(),un(),d(33,"div",23),en(),d(34,"svg",24),I(35,"defs")(36,"path",25),h(),ie(37,Fz,2,1,"span",26),h(),un(),d(38,"div",27),ie(39,Lz,5,1,"ng-container",28),jt(40,"async"),ie(41,Bz,2,0,"ng-template",29,0,mi),h()()()()}if(r&2){let o=pi(42);y(),L("ngIf",s.checkLoginStatus()),y(2),L("routerLink",""),y(15),L("routerLink",""),y(2),L("routerLink","/shop"),y(8),et("ngModel",s.searchText),L("placeholder",s.placeholderText),y(),L("ngIf",s.showSearchModal),y(5),L("routerLink","/shop"),y(3),L("ngIf",s.cartItemsCount>0),y(2),L("ngIf",tn(40,11,s.user$))("ngIfElse",o)}},dependencies:[nn,On,mr,rn,In,Qn,CI,so],styles:['header[_ngcontent-%COMP%]{margin:26px 0 12px;position:sticky;left:0;top:0;z-index:1000}.Header--main[_ngcontent-%COMP%]{display:flex;height:53px;align-items:center;justify-content:space-between;border-bottom:.3px solid rgba(70,163,88,.5);background:#fbfbfb}.Header--main[_ngcontent-%COMP%]   .Header--logo[_ngcontent-%COMP%]{cursor:pointer}.Header--main[_ngcontent-%COMP%]   .Header--navigation[_ngcontent-%COMP%]{width:351px}.Header--main[_ngcontent-%COMP%]   .Header--navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .Header--main[_ngcontent-%COMP%]   .Header--navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:400;line-height:20px;letter-spacing:0%;text-align:left;display:flex;align-items:center;justify-content:space-between;list-style:none;padding:0;margin:0}.Header--main[_ngcontent-%COMP%]   .Header--navigation[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;cursor:pointer}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]{width:400px;display:flex;align-items:center;justify-content:space-between}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--search[_ngcontent-%COMP%]{display:flex;position:relative}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:9px;border-radius:6px;border:none;max-height:40px;box-shadow:0 0 20px #0000000f;background:#fff;border:1px solid rgb(70,163,88)}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border:2px solid rgb(70,163,88)}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--search[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:3px;left:150px}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--shop[_ngcontent-%COMP%]{position:relative}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--shop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:17px;height:17px;font-family:Oswald,sans-serif;position:absolute;font-size:10px;top:0;left:12px;border-radius:50%;border:2px solid rgb(255,255,255);background:#46a358;text-align:center;color:#fff}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{scale:.6;padding:0 52px;width:160px;height:64px;background:#46a358;color:#fff;border:none;border-radius:32px;font-size:24px;font-weight:700;font-family:Oswald,sans-serif;cursor:pointer;position:relative;z-index:1;overflow:hidden}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#000;border:none}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:after{content:"";background:#fff;position:absolute;z-index:-1;inset:0 -20%;transform:skew(-45deg) scaleX(0);transition:all .5s}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   .Header--login[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:after{transform:skew(-45deg) scale(1);-webkit-transition:all .5s;transition:all .5s}.Header--main[_ngcontent-%COMP%]   .Header--info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px;height:35px;border-radius:6px;border:none;font-family:Oswald,sans-serif;color:#fff;background:#46a358;cursor:pointer;transition:all .7s}.cart-items[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.cart-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.cart-search-modal[_ngcontent-%COMP%]{position:fixed;top:11%;right:10.5%;width:400px;background:#fff;border:1px solid #ccc;padding:15px;z-index:1000;box-shadow:0 4px 8px #0000001a}.cart-search-modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;text-align:left}.cart-search-item[_ngcontent-%COMP%]{border:1px solid #ccc;display:flex;justify-content:space-between;margin-bottom:10px}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.close-cart[_ngcontent-%COMP%]{margin-top:10px;width:100%}.Product--action[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:space-around}.Product--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:75px!important}.Products--Info[_ngcontent-%COMP%]{width:50%}.Products--Name[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:400;text-align:left}.Products--Price[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;text-align:left}']});let t=e;return t})();function Vz(t,e){if(t&1){let n=ue();d(0,"div",4),I(1,"img",5)(2,"img",6),h(),d(3,"div",7)(4,"h3"),m(5,"Welcome to GreenShop"),h(),d(6,"h1"),m(7,"Let\u2019s Make a Better"),h(),d(8,"h1",8),m(9,"Planet"),h(),d(10,"p"),m(11,"We are an online plant shop offering a wide range of cheap and trendy plants. Use our plants to create an unique Urban Jungle. Order your favorite plants!"),h(),d(12,"button",9),q("click",function(){H(n);let r=N();return W(r.handleAlert())}),m(13,"SHOP NOW"),h()()}}function Uz(t,e){if(t&1){let n=ue();d(0,"div",4),I(1,"img",5)(2,"img",6),h(),d(3,"div",7)(4,"h3"),m(5,"Welcome to GreenShop"),h(),d(6,"h1"),m(7,"Let\u2019s Make a Better"),h(),d(8,"h1",8),m(9,"Planet"),h(),d(10,"p"),m(11,"We are an online plant shop offering a wide range of cheap and trendy plants. Use our plants to create an unique Urban Jungle. Order your favorite plants!"),h(),d(12,"button",9),q("click",function(){H(n);let r=N();return W(r.handleAlert())}),m(13,"SHOP NOW"),h()()}}function zz(t,e){if(t&1){let n=ue();d(0,"div",4),I(1,"img",5)(2,"img",6),h(),d(3,"div",7)(4,"h3"),m(5,"Welcome to GreenShop"),h(),d(6,"h1"),m(7,"Let\u2019s Make a Better"),h(),d(8,"h1",8),m(9,"Planet"),h(),d(10,"p"),m(11,"We are an online plant shop offering a wide range of cheap and trendy plants. Use our plants to create an unique Urban Jungle. Order your favorite plants!"),h(),d(12,"button",9),q("click",function(){H(n);let r=N();return W(r.handleAlert())}),m(13,"SHOP NOW"),h()()}}var wI=(()=>{let e=class e{handleAlert(){alert("SSS")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-main-banner"]],decls:6,vars:0,consts:[[1,"Banner",2,"width","100%"],[1,"sidebar-body"],[1,"container"],["ngbSlide",""],[1,"picsum-img-wrapper"],["src","assets/Icons/shadow.jpg","alt","Random second slide"],["src","assets/Icons/flower.png","alt","","width","100","height","450",1,"image2"],[1,"carousel-title"],[1,"green"],[3,"click"]],template:function(r,s){r&1&&(d(0,"div",0)(1,"div",1)(2,"ngb-carousel",2),ie(3,Vz,14,0,"ng-template",3)(4,Uz,14,0,"ng-template",3)(5,zz,14,0,"ng-template",3),h()()())},dependencies:[QP,n1],styles:[".Banner[_ngcontent-%COMP%]{margin:0 0 46px}.Banner[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]{max-width:700px;min-height:480px;position:absolute;top:68px;bottom:0;left:40px;padding-top:0;padding-bottom:0;color:#fff}.Banner[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:14px;font-weight:500;line-height:16px;letter-spacing:10%;text-align:left;text-transform:uppercase}.Banner[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:70px;font-weight:900;line-height:70px;letter-spacing:0%;text-align:left;text-transform:uppercase;color:#000}.Banner[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{color:green}.Banner[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:24px;letter-spacing:0%;text-align:left}.Banner[_ngcontent-%COMP%]   .carousel-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;width:140px;height:40px;border:none;border-radius:6px;background:#46a358;color:#fff;font-family:Oswald,sans-serif;font-size:16px;font-weight:700;line-height:20px;letter-spacing:0%;text-align:left;text-transform:uppercase;text-align:center;z-index:10}.Banner[_ngcontent-%COMP%]   .picsum-img-wrapper[_ngcontent-%COMP%]{min-height:480px!important}.Banner[_ngcontent-%COMP%]   .picsum-img-wrapper[_ngcontent-%COMP%]   .image2[_ngcontent-%COMP%]{position:absolute;width:450px;height:450px;top:0;left:750px;object-fit:cover;z-index:1}"]});let t=e;return t})();var Ef=(()=>{let e=class e{constructor(){this.categoriesArray=new wn([]),this.sizesArray=new wn([]),this.filteredProductsSubject=new wn([]),this.categoriesArray$=this.categoriesArray.asObservable(),this.sizesArray$=this.sizesArray.asObservable(),this.filteredProducts$=this.filteredProductsSubject.asObservable()}updateCategoriesArray(i){this.categoriesArray.next(i)}updateSizesArray(i){this.sizesArray.next(i)}updateFilteredProducts(i){this.filteredProductsSubject.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=he({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jz(t,e){if(t&1){let n=ue();d(0,"div",15)(1,"div",16)(2,"input",17),nt("ngModelChange",function(r){let s=H(n).index,o=N();return tt(o.isCheckedCategory[s],r)||(o.isCheckedCategory[s]=r),W(r)}),q("click",function(r){let s=H(n).index,o=N();return o.activateCheckboxCategory(r,s),W(o.findCategory())}),h(),d(3,"label",18),q("click",function(r){let s=H(n).index,o=N();return W(o.activateCheckboxCategory(r,s))}),d(4,"p"),m(5),h(),d(6,"p"),m(7),h()()()()}if(t&2){let n=e.$implicit,i=e.index,r=N();y(2),et("ngModel",r.isCheckedCategory[i]),y(3),Ve(n.name),y(2),ge("(",n.counters,")")}}function Gz(t,e){if(t&1){let n=ue();d(0,"div",19)(1,"div",16)(2,"input",17),nt("ngModelChange",function(r){let s=H(n).index,o=N();return tt(o.isCheckedSize[s],r)||(o.isCheckedSize[s]=r),W(r)}),q("click",function(r){let s=H(n).index,o=N();return o.activateCheckboxSize(r,s),W(o.findCategory())}),h(),d(3,"label",18),q("click",function(r){let s=H(n).index,o=N();return W(o.activateCheckboxSize(r,s))}),d(4,"p"),m(5),h(),d(6,"p"),m(7),h()()()()}if(t&2){let n=e.$implicit,i=e.index,r=N();y(2),et("ngModel",r.isCheckedSize[i]),y(3),Ve(n.name),y(2),ge("(",n.counters,")")}}var SI=(()=>{let e=class e{constructor(){this.ProductsService=U(ns),this.checkboxStateService=U(Ef),this.categories=[],this.sizes=[],this.products=[],this.isCheckedCategory=[],this.isCheckedSize=[],this.startVal=0,this.endVal=1e3}ngOnInit(){this.categories=this.ProductsService.categories,this.sizes=this.ProductsService.sizes,this.products=this.ProductsService.products,this.isCheckedCategory=new Array(this.categories.length).fill(!0),this.isCheckedSize=new Array(this.sizes.length).fill(!0),this.checkboxStateService.updateCategoriesArray(this.categories),this.checkboxStateService.updateSizesArray(this.sizes),this.checkboxStateService.categoriesArray$.subscribe(i=>{this.categories=i,this.findCategory()}),this.checkboxStateService.sizesArray$.subscribe(i=>{this.sizes=i,this.findCategory()}),this.findCategory()}activateCheckboxCategory(i,r){this.isCheckedCategory[r]=!this.isCheckedCategory[r],this.categories[r].state=this.isCheckedCategory[r],this.checkboxStateService.updateCategoriesArray(this.categories),this.findCategory()}activateCheckboxSize(i,r){this.isCheckedSize[r]=!this.isCheckedSize[r],this.sizes[r].state=this.isCheckedSize[r],this.checkboxStateService.updateSizesArray(this.sizes),this.findCategory()}findCategory(){let i=this.categories.filter(o=>o.state).map(o=>o.name),r=this.sizes.filter(o=>o.state).map(o=>o.name),s=[];i.length===0?s=[]:(i.length&&r.length?s=this.sortProducts(i,r):i.length?s=this.ProductsService.findProductsByCategory(i):r.length&&(s=this.ProductsService.findProductsBySize(r)),s=s.filter(o=>o.price>=this.startVal&&o.price<=this.endVal)),this.checkboxStateService.updateFilteredProducts(s)}sortProducts(i,r){let s=[];return i.forEach(o=>{r.forEach(a=>{let l=this.ProductsService.findProductsByCategoryAndSize([o],[a]);s.push(...l)})}),s.sort((o,a)=>o.price-a.price)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-sidebar"]],decls:23,vars:6,consts:[[1,"Sidebar--Main"],[1,"Sidebar--Main--Categories"],[1,"Categories--title"],["class","Categories-choice",4,"ngFor","ngForOf"],[1,"Sidebar--Main--Size"],[1,"Size--title"],["class","Size-choice",4,"ngFor","ngForOf"],[1,"Sidebar--Main--Price-Range"],[1,"Price-Range-title"],["min","0","max","1000",3,"input"],["matSliderStartThumb","",3,"ngModelChange","ngModel"],["matSliderEndThumb","",3,"ngModelChange","ngModel"],[1,"Price-Range--range"],[1,"Sidebar--Main--banner"],["src","/assets/Icons/flower.jpg","alt","","width","310","height","472"],[1,"Categories-choice"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModelChange","click","ngModel"],[1,"form-check-label",3,"click"],[1,"Size-choice"]],template:function(r,s){r&1&&(d(0,"aside")(1,"div",0)(2,"div",1)(3,"div",2),m(4," Categories "),h(),ie(5,jz,8,3,"div",3),h(),d(6,"div",4)(7,"div",5),m(8," Size "),h(),ie(9,Gz,8,3,"div",6),h(),d(10,"div",7)(11,"div",8),m(12," Price Range "),h(),d(13,"mat-slider",9),q("input",function(){return s.findCategory()}),d(14,"input",10),nt("ngModelChange",function(a){return tt(s.startVal,a)||(s.startVal=a),a}),h(),d(15,"input",11),nt("ngModelChange",function(a){return tt(s.endVal,a)||(s.endVal=a),a}),h()(),d(16,"div",12)(17,"div"),m(18," Price: "),h(),d(19,"div"),m(20),h()()(),d(21,"div",13),I(22,"img",14),h()()()),r&2&&(y(5),L("ngForOf",s.categories),y(4),L("ngForOf",s.sizes),y(5),et("ngModel",s.startVal),y(),et("ngModel",s.endVal),y(5),E1(" $",s.startVal," - $",s.endVal," "))},dependencies:[nn,rn,hp,In,Qn,ZC,yp],styles:[".Sidebar--Main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;width:310px;height:1244px;background:#fbfbfb}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Categories[_ngcontent-%COMP%]{padding:14px 24px 14px 18px}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Categories[_ngcontent-%COMP%]   .Categories--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;text-align:left;margin:0 0 10px}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Categories[_ngcontent-%COMP%]   .Categories-choice[_ngcontent-%COMP%]{padding:0 0 0 10px}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Categories[_ngcontent-%COMP%]   .Categories-choice[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;text-align:left}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Categories[_ngcontent-%COMP%]   .Categories-choice[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Categories[_ngcontent-%COMP%]   .Categories-choice[_ngcontent-%COMP%]   .form-check[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{cursor:pointer}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Categories[_ngcontent-%COMP%]   .Categories-choice[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:green;border-color:green}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Size[_ngcontent-%COMP%]{padding:14px 24px 14px 18px;margin:0 0 20px}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Size[_ngcontent-%COMP%]   .Size--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;text-align:left;margin:0 0 10px}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Size[_ngcontent-%COMP%]   .Size-choice[_ngcontent-%COMP%]{padding:0 0 0 10px}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Size[_ngcontent-%COMP%]   .Size-choice[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;text-align:left}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Size[_ngcontent-%COMP%]   .Size-choice[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:green;border-color:green}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Price-Range[_ngcontent-%COMP%]{padding:14px 24px 14px 18px;margin:0 0 20px}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Price-Range[_ngcontent-%COMP%]   .Price-Range-title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Price-Range[_ngcontent-%COMP%]   .Price-Range--range[_ngcontent-%COMP%]{display:flex;align-items:center}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Price-Range[_ngcontent-%COMP%]   .Price-Range--range[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{font-family:Oswald,sans-serif;font-size:15px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left;margin:0 5px 0 0}.Sidebar--Main[_ngcontent-%COMP%]   .Sidebar--Main--Price-Range[_ngcontent-%COMP%]   .Price-Range--range[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{color:green;font-family:Oswald,sans-serif;font-size:15px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left}mat-slider[_ngcontent-%COMP%]{width:200px}  .mat-mdc-slider .mdc-slider__thumb-knob{background-color:green!important;border-color:green!important}  .mat-mdc-slider .mdc-slider__track--active_fill{border-color:green!important}"]});let t=e;return t})();function Wz(t,e){if(t&1){let n=ue();d(0,"div",7)(1,"div",8)(2,"img",9),q("click",function(){let r=H(n).$implicit,s=N();return W(s.goToProductDetails(r.id))}),h()(),d(3,"div",10)(4,"button",11),q("click",function(){let r=H(n).$implicit,s=N();return W(s.addToCart(r))}),m(5,"Buy"),h(),d(6,"button",12),q("click",function(){let r=H(n).$implicit,s=N();return W(s.goToProductDetails(r.id))}),m(7,"Details"),h()(),d(8,"div",13)(9,"div",14),m(10),h(),d(11,"div",15),m(12),h()()()}if(t&2){let n=e.$implicit;y(2),L("src",n.img,Pt),y(2),L("routerLink","/shop"),y(6),Ve(n.name),y(2),ge("$",n.price,"")}}function $z(t,e){if(t&1){let n=ue();d(0,"li",16),q("click",function(){H(n);let r=N();return W(r.setPage(r.currentPage-1))}),m(1,"<"),h()}}function Kz(t,e){if(t&1){let n=ue();d(0,"li",16),q("click",function(){let r=H(n).$implicit,s=N();return W(s.setPage(r))}),m(1),h()}if(t&2){let n=e.$implicit,i=N();dt("active",n===i.currentPage),y(),ge(" ",n," ")}}function Qz(t,e){if(t&1){let n=ue();d(0,"li",16),q("click",function(){H(n);let r=N();return W(r.setPage(r.currentPage+1))}),m(1,">"),h()}}var TI=(()=>{let e=class e{constructor(){this.checkboxService=U(Ef),this.router=U(_i),this.cartService=U(rs),this.products=[],this.filteredProducts=[],this.currentPage=1,this.itemsPerPage=9,this.totalItems=0,this.totalPages=0,this.pageNumbers=[]}ngOnInit(){this.watcherFilteredProduct=this.checkboxService.filteredProducts$.subscribe(i=>{this.filteredProducts=i,this.totalItems=i.length,this.calculateTotalPages(),this.paginateProducts()})}ngOnDestroy(){this.watcherFilteredProduct?.unsubscribe()}addToCart(i){this.cartService.addToCart(i)}setPage(i){i<1||i>this.totalPages||(this.currentPage=i,this.paginateProducts())}paginateProducts(){let i=(this.currentPage-1)*this.itemsPerPage,r=i+this.itemsPerPage;this.products=this.filteredProducts.slice(i,r)}calculateTotalPages(){this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage),this.pageNumbers=Array.from({length:this.totalPages},(i,r)=>r+1)}goToProductDetails(i){this.router.navigate(["/shop/product",i])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-productsbody"]],decls:8,vars:4,consts:[[1,"BodyProduct--wrapper"],[1,"BodyProduct--main"],["class","BodyProduct--item",4,"ngFor","ngForOf"],[1,"BodyProduct--pagination"],[1,"BodyProduct--pagination-ul"],[3,"click",4,"ngIf"],[3,"active","click",4,"ngFor","ngForOf"],[1,"BodyProduct--item"],[1,"Products--body"],["alt","","width","258","height","250",3,"click","src"],[1,"Product--action"],["mat-flat-button","",3,"click","routerLink"],["mat-flat-button","",3,"click"],[1,"Products--Info"],[1,"Products--Name"],[1,"Products--Price"],[3,"click"]],template:function(r,s){r&1&&(d(0,"div",0)(1,"div",1),ie(2,Wz,13,4,"div",2),h(),d(3,"div",3)(4,"ul",4),ie(5,$z,2,0,"li",5)(6,Kz,2,3,"li",6)(7,Qz,2,0,"li",5),h()()()),r&2&&(y(2),L("ngForOf",s.products),y(3),L("ngIf",s.currentPage>1),y(),L("ngForOf",s.pageNumbers),y(),L("ngIf",s.currentPage<s.totalPages))},dependencies:[nn,On,mr],styles:[".BodyProduct--wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:33px;align-items:center;max-width:840px}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]   .BodyProduct--item[_ngcontent-%COMP%]{width:258px;height:350px;display:flex;flex-direction:column;justify-content:space-between;align-items:center;background:#fbfbfb;transition:opacity .6s ease}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]   .BodyProduct--item[_ngcontent-%COMP%]   .Products--body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]   .BodyProduct--item[_ngcontent-%COMP%]   .Product--action[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:space-between}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]   .BodyProduct--item[_ngcontent-%COMP%]   .Product--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;width:90px;height:35px;border:none;border-radius:6px;background:#46a358}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]   .BodyProduct--item[_ngcontent-%COMP%]:hover{scale:1.1;transition:.3s}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]   .Products--Info[_ngcontent-%COMP%]{text-align:left;width:90%}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]   .Products--Info[_ngcontent-%COMP%]   .Products--Name[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:400;text-align:left}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]   .Products--Info[_ngcontent-%COMP%]   .Products--Price[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;text-align:left}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--main[_ngcontent-%COMP%]:hover > [_ngcontent-%COMP%]:not(:hover){opacity:.7}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--pagination-ul[_ngcontent-%COMP%]{text-decoration:none;list-style:none;padding:0;margin:20px 0 0;display:flex;justify-content:center;gap:10px}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--pagination-ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:35px;height:35px;box-sizing:border-box;border:1px solid rgb(229,229,229);border-radius:4px;cursor:pointer}.BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--pagination-ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover, .BodyProduct--wrapper[_ngcontent-%COMP%]   .BodyProduct--pagination-ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{color:#fff;background:#46a358}.BodyProduct--wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{align-self:center}"]});let t=e;return t})();var EI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-cartfindmore"]],decls:26,vars:0,consts:[[1,"container"],[1,"cart-item-main"],[1,"cart--item"],[1,"cart-item-img"],["src","./assets/Icons/image14.png","alt",""],["src","./assets/Icons/circle.png","alt",""],[1,"cart-item-text-info"],[1,"cart-item-TI-title"],[1,"cart-item-TI-subtitle"],[1,"cart-item-TI-action"],["src","./assets/IconsProduct/product3.png","alt",""]],template:function(r,s){r&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),I(4,"img",4)(5,"img",5),h(),d(6,"div",6)(7,"div",7),m(8," Summer cactus & succulents "),h(),d(9,"div",8),m(10," We are an online plant shop offering a wide range of cheap and trendy plants "),h(),d(11,"div",9)(12,"button"),m(13,"Find More "),h()()()(),d(14,"div",2)(15,"div",3),I(16,"img",10)(17,"img",5),h(),d(18,"div",6)(19,"div",7),m(20," Summer cactus & succulents "),h(),d(21,"div",8),m(22," We are an online plant shop offering a wide range of cheap and trendy plants "),h(),d(23,"div",9)(24,"button"),m(25,"Find More "),h()()()()()())},styles:[".cart-item-main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-bottom:135px}.cart-item-main[_ngcontent-%COMP%]   .cart--item[_ngcontent-%COMP%]:first-child   .cart-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-bottom:40px}.cart-item-main[_ngcontent-%COMP%]   .cart--item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fbfbfb;width:36.625rem;height:15.625rem;position:relative;overflow:hidden}.cart-item-main[_ngcontent-%COMP%]   .cart--item[_ngcontent-%COMP%]   .cart-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-child(2){position:absolute;top:170px;left:-190px}.cart-item-main[_ngcontent-%COMP%]   .cart--item[_ngcontent-%COMP%]   .cart-item-text-info[_ngcontent-%COMP%]{padding-right:30px;height:167px;display:flex;flex-direction:column;justify-content:space-evenly;text-align:right}.cart-item-main[_ngcontent-%COMP%]   .cart--item[_ngcontent-%COMP%]   .cart-item-text-info[_ngcontent-%COMP%]   .cart-item-TI-title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:900;line-height:24px;letter-spacing:0%;text-align:right;text-transform:uppercase}.cart-item-main[_ngcontent-%COMP%]   .cart--item[_ngcontent-%COMP%]   .cart-item-text-info[_ngcontent-%COMP%]   .cart-item-TI-subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:24px;letter-spacing:0%;text-align:right}.cart-item-main[_ngcontent-%COMP%]   .cart--item[_ngcontent-%COMP%]   .cart-item-text-info[_ngcontent-%COMP%]   .cart-item-TI-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;width:140px;height:35px;border:none;border-radius:6px;background:#46a358}"]});let t=e;return t})();var MI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-our-blog-posts"]],decls:72,vars:0,consts:[[1,"container"],[1,"cart-blog-item-main"],[1,"CBIM-Info"],[1,"CBIM-title"],[1,"CBIM-subtitle"],[1,"CBIM-cart--main"],[1,"CBIM-C-item"],[1,"CBIM-C-item-img"],["src","assets/Icons/ourblog.png","alt",""],[1,"CBIM-C-I-main"],[1,"CBIM-C-item-date"],[1,"CBIM-C-item-title"],[1,"CBIM-C-item-subtitle"],[1,"CBIM-C-item-action"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"arrow-icon"],["d","M5 12h14M12 5l7 7-7 7"],["src","assets/Icons/ourblog2.png","alt",""],["src","assets/Icons/ourblog3.png","alt",""],["src","assets/Icons/ourblog4.png","alt",""]],template:function(r,s){r&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4," Our Blog Posts "),h(),d(5,"div",4),m(6," We are an online plant shop offering a wide range of cheap and trendy plants. "),h()(),d(7,"div",5)(8,"div",6)(9,"div",7),I(10,"img",8),h(),d(11,"div",9)(12,"div",10),m(13," September 12 I Read in 6 minutes "),h(),d(14,"div",11),m(15," Cactus & Succulent"),I(16,"br"),m(17," Care Tips "),h(),d(18,"div",12),m(19," Cacti are succulents are easy care plants for any home or patio. "),h(),d(20,"div",13),m(21," Read More "),en(),d(22,"svg",14),I(23,"path",15),h()()()(),un(),d(24,"div",6)(25,"div",7),I(26,"img",16),h(),d(27,"div",9)(28,"div",10),m(29," September 13 I Read in 2 minutes "),h(),d(30,"div",11),m(31," Top 10 Succulents for "),I(32,"br"),m(33," Your Home "),h(),d(34,"div",12),m(35," Best in hanging baskets. Prefers medium to high light. "),h(),d(36,"div",13),m(37," Read More "),en(),d(38,"svg",14),I(39,"path",15),h()()()(),un(),d(40,"div",6)(41,"div",7),I(42,"img",17),h(),d(43,"div",9)(44,"div",10),m(45," September 15 I Read in 3 minutes "),h(),d(46,"div",11),m(47," Cacti & Succulent"),I(48,"br"),m(49," Care Tips "),h(),d(50,"div",12),m(51," Cacti and succulents thrive in containers and because most are.. "),h(),d(52,"div",13),m(53," Read More "),en(),d(54,"svg",14),I(55,"path",15),h()()()(),un(),d(56,"div",6)(57,"div",7),I(58,"img",18),h(),d(59,"div",9)(60,"div",10),m(61," September 15 I Read in 2 minutes "),h(),d(62,"div",11),m(63," Best Houseplants"),I(64,"br"),m(65," Room by Room "),h(),d(66,"div",12),m(67," The benefits of houseplants are endless. In addition to.. "),h(),d(68,"div",13),m(69," Read More "),en(),d(70,"svg",14),I(71,"path",15),h()()()()()()())},styles:[".container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]{padding-bottom:100px}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-Info[_ngcontent-%COMP%]   .CBIM-title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:30px;font-weight:700;line-height:16px;text-align:center;padding-bottom:15px}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-Info[_ngcontent-%COMP%]   .CBIM-subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:24px;text-align:center;padding-bottom:35px}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:20px}@media (max-width: 1200px){.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (max-width: 900px){.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 600px){.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]{grid-template-columns:1fr}}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]{background:#fbfbfb;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-item-img[_ngcontent-%COMP%]{width:100%;padding-bottom:4px}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-item-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-I-main[_ngcontent-%COMP%]{padding:9px 13px 12px;display:flex;flex-direction:column;justify-content:space-between;height:167px}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-I-main[_ngcontent-%COMP%]   .CBIM-C-item-date[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:14px;font-weight:500;line-height:16px;text-align:left;padding-bottom:4px}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-I-main[_ngcontent-%COMP%]   .CBIM-C-item-title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:20px;font-weight:700;line-height:26px;text-align:left;padding-bottom:4px}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-I-main[_ngcontent-%COMP%]   .CBIM-C-item-subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:22px;text-align:left;padding-bottom:9px}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-I-main[_ngcontent-%COMP%]   .CBIM-C-item-action[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:14px;font-weight:500;line-height:16px;text-align:left;cursor:pointer;transition:color .3s}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-I-main[_ngcontent-%COMP%]   .CBIM-C-item-action[_ngcontent-%COMP%]:hover{color:#46a358}.container[_ngcontent-%COMP%]   .cart-blog-item-main[_ngcontent-%COMP%]   .CBIM-cart--main[_ngcontent-%COMP%]   .CBIM-C-item[_ngcontent-%COMP%]   .CBIM-C-I-main[_ngcontent-%COMP%]   .CBIM-C-item-action[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]:hover{filter:green}"]});let t=e;return t})();var Mf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-footer"]],decls:137,vars:0,consts:[[1,"container"],[1,"footer--main"],[1,"footer--stage-1"],[1,"fs1-item--info"],[1,"fs1-item--info--img"],["src","assets/Icons/cactus.png","height","90","alt","#"],[1,"fs1-item--info--title"],[1,"fs1-item--info--subtitle"],["src","assets/Icons/cactus2.png","height","90","alt","#"],["src","assets/Icons/cactus3.png","height","90","alt","#"],[1,"fs1-item-action"],[1,"fs1-item--info--action"],["type","text","placeholder","enter your email address..."],[1,"footer--stage-2"],[1,"fs2-item--logo"],["width","151.000000","height","35.000000","viewBox","0 0 151 35","fill","none","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","Vector","d","M17.15 0C7.67 0 0 7.67 0 17.15C0 26.02 6.73 33.31 15.37 34.2C14.84 29.91 15.04 26.4 15.7 23.51C15.33 21.72 14.48 19.07 12.57 17.18C12.57 17.18 13.83 19.07 14.51 21.62C14.51 21.62 14.52 21.62 14.52 21.63C14.59 21.9 14.65 22.17 14.71 22.46C14.72 22.52 14.74 22.59 14.75 22.66C14.8 22.95 14.85 23.24 14.88 23.54C5.19 22.35 3.12 13.65 3.35 10.37C13.66 10.94 15.77 17.82 16.08 22.09C19.45 11.04 30.18 10.4 31.06 10.37C31.45 18.87 25.15 25.5 17.61 26.08C17.66 25.85 17.71 25.61 17.77 25.39C17.79 25.32 17.81 25.26 17.83 25.19C17.87 25.02 17.92 24.86 17.97 24.7C17.99 24.63 18.01 24.56 18.03 24.49C18.09 24.31 18.15 24.14 18.21 23.96C18.23 23.92 18.24 23.88 18.26 23.84C18.33 23.63 18.41 23.43 18.5 23.23C18.5 23.21 18.51 23.19 18.52 23.17C18.52 23.17 18.52 23.17 18.52 23.17C20.45 18.5 24.02 15.44 24.02 15.44C17.02 19.48 15.84 29.99 15.65 34.22C16.15 34.26 16.64 34.29 17.15 34.29C26.62 34.29 34.3 26.62 34.3 17.15C34.3 7.67 26.62 0 17.15 0Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M46.7 10.74C48.97 10.74 50.82 11.71 52.02 13.49L49.77 15.41C48.97 14.28 47.99 13.7 46.64 13.7C44.56 13.7 43.27 15.07 43.27 17.15C43.27 19.27 44.64 20.69 46.83 20.69C48.01 20.69 48.95 20.28 49.55 19.59L49.55 19L46.66 19L46.66 16.23L52.77 16.23L52.77 20.13C52.19 21.16 51.36 21.98 50.3 22.62C49.23 23.24 48.03 23.56 46.7 23.56C42.99 23.61 39.92 20.73 39.97 17.15C39.91 13.59 42.99 10.68 46.7 10.74Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M61.95 23.33L59.16 19.49L57.83 19.49L57.83 23.33L54.61 23.33L54.61 10.96L59.46 10.96C62.22 10.96 64.24 12.65 64.24 15.22C64.24 16.73 63.51 17.99 62.29 18.74L65.55 23.33L61.95 23.33ZM57.83 16.68L59.48 16.68C60.38 16.68 60.96 16.09 60.96 15.22C60.96 14.34 60.38 13.77 59.48 13.77L57.83 13.77L57.83 16.68Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M66.83 10.96L75.41 10.96L75.41 13.87L70.05 13.87L70.05 15.57L73.87 15.57L73.87 18.27L70.05 18.27L70.05 20.42L75.63 20.42L75.63 23.33L66.83 23.33L66.83 10.96Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M77.64 10.96L86.22 10.96L86.22 13.87L80.86 13.87L80.86 15.57L84.68 15.57L84.68 18.27L80.86 18.27L80.86 20.42L86.44 20.42L86.44 23.33L77.64 23.33L77.64 10.96Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M99.41 10.96L99.41 23.55L98.38 23.55L91.68 17.05L91.68 23.33L88.45 23.33L88.45 10.74L89.48 10.74L96.19 17.15L96.19 10.96L99.41 10.96Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M103.26 19.13C103.99 20.1 104.76 20.72 106.01 20.72C106.86 20.72 107.29 20.42 107.29 19.82C107.29 19.28 107 19.11 106.03 18.68L104.76 18.12C102.71 17.21 101.63 16.05 101.63 14.39C101.63 12.2 103.43 10.73 105.95 10.73C107.99 10.73 109.44 11.71 110.18 13.22L108.03 14.87C107.43 13.98 106.87 13.56 105.99 13.56C105.31 13.56 104.88 13.83 104.88 14.35C104.88 14.8 105.15 15.05 105.95 15.36L107.38 15.96C109.53 16.86 110.54 17.95 110.54 19.69C110.54 22.09 108.57 23.55 106 23.55C103.78 23.55 101.98 22.48 101.08 20.78L103.26 19.13Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M112.39 10.96L115.61 10.96L115.61 15.48L120.13 15.48L120.13 10.96L123.35 10.96L123.35 23.33L120.13 23.33L120.13 18.38L115.61 18.38L115.61 23.33L112.39 23.33L112.39 10.96Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M131.84 10.74C135.44 10.66 138.6 13.6 138.53 17.15C138.6 20.72 135.44 23.61 131.84 23.55C128.22 23.61 125.11 20.72 125.19 17.15C125.11 13.6 128.22 10.66 131.84 10.74ZM131.85 13.7C129.87 13.7 128.48 15.1 128.48 17.15C128.48 18.18 128.8 19.02 129.42 19.66C130.04 20.27 130.86 20.59 131.85 20.59C133.77 20.59 135.23 19.21 135.23 17.15C135.23 15.1 133.77 13.7 131.85 13.7Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],["id","Vector","d","M140.37 10.96L145.22 10.96C147.97 10.96 150 12.65 150 15.22C150 17.75 147.92 19.49 145.22 19.49L143.59 19.49L143.59 23.33L140.37 23.33L140.37 10.96ZM145.24 16.68C146.13 16.68 146.72 16.09 146.72 15.22C146.72 14.34 146.13 13.77 145.24 13.77L143.59 13.77L143.59 16.68L145.24 16.68Z","fill","#46A358","fill-opacity","1.000000","fill-rule","nonzero"],[1,"fs2-item--location"],["src","assets/Icons/location.png","width","20","height","20","alt","location"],[1,"fs2-item--contact"],["src","assets/Icons/message.png","width","20","height","20","alt","message"],[1,"fs2-item--phone"],["src","assets/Icons/calling.png","width","20","height","20","alt","calling"],[1,"footer--stage-3"],[1,"footer--stage-3--main"],[1,"fs3-item--info--account"],[1,"fs3-item--info--account--title"],[1,"fs3-item--info--account--list"],[1,"fs3-item--info--help"],[1,"fs3-item--info--help--title"],[1,"fs3-item--info--help--list"],[1,"fs3-item--info--categories"],[1,"fs3-item--info--categories--title"],[1,"fs3-item--info--categories--list"],[1,"fs3-item--info--social-and-accept"],[1,"fs3-item--info--social-and-accept--Social"],[1,"fs3-item--info--social-and-accept--Social--title"],[1,"fs3-item--info--social-and-accept--Social--img"],["href",""],["src","assets/Icons/facebook.png","alt","facebook"],["src","assets/Icons/inst.png","alt","inst"],["src","assets/Icons/twitter.png","alt","twitter"],["src","assets/Icons/link.png","alt","link"],["src","assets/Icons/union.png","alt","union"],[1,"fs3-item--info--social-and-accept--Accept"],[1,"fs3-item--info--social-and-accept--Accept--title"],[1,"fs3-item--info--social-and-accept--Accept--img"],["src","assets/Icons/payment.png","alt","payment"],[1,"footer--stage-4"],[1,"fs4-reserved"]],template:function(r,s){r&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),I(5,"img",5),h(),d(6,"div",6),m(7," Garden Care "),h(),d(8,"div",7),m(9," We are an online plant shop "),I(10,"br"),m(11," offering a wide range of cheap"),I(12,"br"),m(13," and trendy plants. "),h()(),d(14,"div",3)(15,"div",4),I(16,"img",8),h(),d(17,"div",6),m(18," Plant Renovation "),h(),d(19,"div",7),m(20," We are an online plant shop "),I(21,"br"),m(22," offering a wide range of cheap"),I(23,"br"),m(24," and trendy plants. "),h()(),d(25,"div",3)(26,"div",4),I(27,"img",9),h(),d(28,"div",6),m(29," Watering Graden "),h(),d(30,"div",7),m(31," We are an online plant shop "),I(32,"br"),m(33," offering a wide range of cheap"),I(34,"br"),m(35," and trendy plants. "),h()(),d(36,"div",10)(37,"div",6),m(38," Watering Graden "),h(),d(39,"div",11),I(40,"input",12),d(41,"button"),m(42,"Join"),h()(),d(43,"div",7),m(44," We usually post offers and challenges in newsletter. We\u2019re your online houseplant destination. We offer a wide range of houseplants and accessories shipped directly from our (green)house to yours! "),h()()(),d(45,"div",13)(46,"div",14),en(),d(47,"svg",15),I(48,"defs")(49,"path",16)(50,"path",17)(51,"path",18)(52,"path",19)(53,"path",20)(54,"path",21)(55,"path",22)(56,"path",23)(57,"path",24)(58,"path",25),h()(),un(),d(59,"div",26),I(60,"img",27),m(61," 70 West Buckingham Ave. "),I(62,"br"),m(63," Farmingdale, NY 11735 "),h(),d(64,"div",28),I(65,"img",29),m(66," contact greenshop.com "),h(),d(67,"div",30),I(68,"img",31),m(69," +88 01911 717 490 "),h()(),d(70,"div",32)(71,"div",33)(72,"div",34)(73,"div",35),m(74," My Account "),h(),d(75,"div",36)(76,"li"),m(77,"My Account"),h(),d(78,"li"),m(79,"Our stores"),h(),d(80,"li"),m(81,"Contact us"),h(),d(82,"li"),m(83,"Career"),h(),d(84,"li"),m(85,"Specials"),h()()(),d(86,"div",37)(87,"div",38),m(88," Help & Guide "),h(),d(89,"div",39)(90,"li"),m(91,"Help Center"),h(),d(92,"li"),m(93,"How to Buy"),h(),d(94,"li"),m(95,"Shipping & Delivery"),h(),d(96,"li"),m(97,"Product Policy"),h(),d(98,"li"),m(99,"How to Return"),h()()(),d(100,"div",40)(101,"div",41),m(102," Categories "),h(),d(103,"div",42)(104,"li"),m(105,"House Plants"),h(),d(106,"li"),m(107,"Potter Plants"),h(),d(108,"li"),m(109,"Seeds"),h(),d(110,"li"),m(111,"Small Plants"),h(),d(112,"li"),m(113,"Accessories"),h()()(),d(114,"div",43)(115,"div",44)(116,"div",45),m(117," Social Media "),h(),d(118,"div",46)(119,"a",47),I(120,"img",48),h(),d(121,"a",47),I(122,"img",49),h(),d(123,"a",47),I(124,"img",50),h(),d(125,"a",47),I(126,"img",51),h(),d(127,"a",47),I(128,"img",52),h()()(),d(129,"div",53)(130,"div",54),m(131," We accept "),h(),d(132,"div",55),I(133,"img",56),h()()()()(),d(134,"div",57)(135,"div",58),m(136," \xA9 2021 GreenShop. All Rights Reserved. "),h()()()())},styles:[".footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]{min-height:250px;display:flex;justify-content:space-between;padding:30px 25px;background:#fbfbfb}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item--info[_ngcontent-%COMP%]{max-width:204px;min-height:196px}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item--info[_ngcontent-%COMP%]   .fs1-item--info--img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-bottom:15px}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item--info[_ngcontent-%COMP%]   .fs1-item--info--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:17px;font-weight:700;line-height:16px;text-align:left;padding-bottom:9px}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item--info[_ngcontent-%COMP%]   .fs1-item--info--subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:22px;text-align:left}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item-action[_ngcontent-%COMP%]{max-width:354px}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item-action[_ngcontent-%COMP%]   .fs1-item--info--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;text-align:left;padding-bottom:18px}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item-action[_ngcontent-%COMP%]   .fs1-item--info--action[_ngcontent-%COMP%]{display:flex;padding-bottom:17px}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item-action[_ngcontent-%COMP%]   .fs1-item--info--action[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#acacac;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;width:100%;border:none;outline:none;padding-left:11px}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item-action[_ngcontent-%COMP%]   .fs1-item--info--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:85px;min-height:40px;border-radius:0 6px 6px 0;background:#46a358;border:none;color:#fff;font-family:Oswald,sans-serif;font-size:18px;font-weight:700}.footer--main[_ngcontent-%COMP%]   .footer--stage-1[_ngcontent-%COMP%]   .fs1-item-action[_ngcontent-%COMP%]   .fs1-item--info--subtitle[_ngcontent-%COMP%]{color:#727272;font-family:Oswald,sans-serif;font-size:13px;font-weight:400;line-height:22px;text-align:left}.footer--main[_ngcontent-%COMP%]   .footer--stage-2[_ngcontent-%COMP%]{min-height:90px;display:flex;align-items:center;justify-content:space-between;padding:26px 230px 20px 23px;background:#ecf6ee}.footer--main[_ngcontent-%COMP%]   .footer--stage-2[_ngcontent-%COMP%]   .fs2-item--logo[_ngcontent-%COMP%]{display:flex;justify-content:center}.footer--main[_ngcontent-%COMP%]   .footer--stage-2[_ngcontent-%COMP%]   .fs2-item--location[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.footer--main[_ngcontent-%COMP%]   .footer--stage-2[_ngcontent-%COMP%]   .fs2-item--location[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.footer--main[_ngcontent-%COMP%]   .footer--stage-2[_ngcontent-%COMP%]   .fs2-item--contact[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.footer--main[_ngcontent-%COMP%]   .footer--stage-2[_ngcontent-%COMP%]   .fs2-item--contact[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.footer--main[_ngcontent-%COMP%]   .footer--stage-2[_ngcontent-%COMP%]   .fs2-item--phone[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.footer--main[_ngcontent-%COMP%]   .footer--stage-2[_ngcontent-%COMP%]   .fs2-item--phone[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]{min-height:236px;background:#fbfbfb;border-bottom:1px solid rgba(70,163,88,.2)}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:33px 155px 27px 23px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--account[_ngcontent-%COMP%]   .fs3-item--info--account--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left;padding-bottom:9px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--account[_ngcontent-%COMP%]   .fs3-item--info--account--list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:8px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--help[_ngcontent-%COMP%]   .fs3-item--info--help--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left;padding-bottom:9px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--help[_ngcontent-%COMP%]   .fs3-item--info--help--list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:8px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--categories[_ngcontent-%COMP%]   .fs3-item--info--categories--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left;padding-bottom:9px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--categories[_ngcontent-%COMP%]   .fs3-item--info--categories--list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:8px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept--Social[_ngcontent-%COMP%]{padding-bottom:33px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept--Social[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept--Social--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left;padding-bottom:20px}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept--Social[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept--Social--img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding-right:10px;cursor:pointer}.footer--main[_ngcontent-%COMP%]   .footer--stage-3[_ngcontent-%COMP%]   .footer--stage-3--main[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept--Accept[_ngcontent-%COMP%]   .fs3-item--info--social-and-accept--Accept--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left;padding-bottom:13px}.footer--main[_ngcontent-%COMP%]   .footer--stage-4[_ngcontent-%COMP%]{padding-top:10px;display:flex;justify-content:center}.footer--main[_ngcontent-%COMP%]   .footer--stage-4[_ngcontent-%COMP%]   .fs4-reserved[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:30px;letter-spacing:0%;text-align:left}"]});let t=e;return t})();var DI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-home"]],decls:8,vars:0,consts:[[1,"sidebar-body","container"]],template:function(r,s){r&1&&(I(0,"app-header")(1,"app-main-banner"),d(2,"div",0),I(3,"app-sidebar")(4,"app-productsbody"),h(),I(5,"app-cartfindmore")(6,"app-our-blog-posts")(7,"app-footer"))},dependencies:[Tf,wI,SI,TI,EI,MI,Mf],styles:[".sidebar-body[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:135px}"]});let t=e;return t})();function Zz(t,e){if(t&1){let n=ue();d(0,"div",15)(1,"div",16)(2,"img",17),q("click",function(){let r=H(n).$implicit,s=N(2);return W(s.goToProductDetails(r.id))}),h()(),d(3,"div",18)(4,"div",19),m(5),h(),d(6,"div",20),m(7),h()()()}if(t&2){let n=e.$implicit;y(2),Tn("alt",n.name),L("src",n.img,Pt),y(3),Ve(n.name),y(2),ge(" $",n.price," ")}}function eq(t,e){if(t&1&&(d(0,"div",12)(1,"div",13),ie(2,Zz,8,4,"div",14),h()()),t&2){let n=e.$implicit,i=N();ji("transform","translateX(-"+i.currentPage*100+"%)"),y(2),L("ngForOf",n)}}function tq(t,e){if(t&1){let n=ue();d(0,"button",21),q("click",function(){let r=H(n).index,s=N();return W(s.setPage(r))}),h()}if(t&2){let n=e.index,i=N();dt("active",n===i.currentPage)}}var PI=(()=>{let e=class e{constructor(){this.productsService=U(ns),this.renderer=U(fr),this.el=U(Ge),this.router=U(_i),this.products=this.productsService.products,this.paginatedProducts=[],this.currentPage=0,this.itemsPerPage=5,this.touchStartX=0,this.touchEndX=0}ngOnInit(){this.paginateProducts(),this.addSwipeListeners()}goToProductDetails(i){console.log("Attempting to navigate to product:",i),this.router.navigate(["/shop/product",i]).then(r=>console.log("Navigation success:",r),r=>console.error("Navigation error:",r))}paginateProducts(){this.paginatedProducts=[];for(let i=0;i<this.products.length;i+=this.itemsPerPage)this.paginatedProducts.push(this.products.slice(i,i+this.itemsPerPage))}setPage(i){i>=0&&i<this.paginatedProducts.length&&(this.currentPage=i)}nextPage(){this.currentPage<this.paginatedProducts.length-1&&this.setPage(this.currentPage+1)}prevPage(){this.currentPage>0&&this.setPage(this.currentPage-1)}addSwipeListeners(){let i=this.el.nativeElement.querySelector(".reletedProducts--slider");this.renderer.listen(i,"touchstart",r=>{this.touchStartX=r.touches[0].clientX}),this.renderer.listen(i,"touchmove",r=>{this.touchEndX=r.touches[0].clientX}),this.renderer.listen(i,"touchend",()=>{this.handleSwipe()})}handleSwipe(){let r=this.touchStartX-this.touchEndX;r>50?this.nextPage():r<-50&&this.prevPage()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-reletedproducts"]],decls:14,vars:2,consts:[[1,"container"],[1,"reletedProducts--main"],[1,"reletedProducts--main--title"],[1,"reletedProducts--slider"],["class","reletedProducts--slider--page",3,"transform",4,"ngFor","ngForOf"],[1,"arrow","prev",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","32","viewBox","0 0 16 16","fill","#000"],["d","M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"],[1,"arrow","next",3,"click"],["d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"],[1,"slider-navigation-dots"],[3,"active","click",4,"ngFor","ngForOf"],[1,"reletedProducts--slider--page"],[1,"reletedProducts--main--block"],["class","reletedProducts--main--block--item",4,"ngFor","ngForOf"],[1,"reletedProducts--main--block--item"],[1,"reletedProducts--body"],["width","258","height","250",3,"click","src","alt"],[1,"reletedProducts--Info"],[1,"reletedProducts--Name"],[1,"reletedProducts--Price"],[3,"click"]],template:function(r,s){r&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),m(3," Related Products "),h(),d(4,"div",3),ie(5,eq,3,3,"div",4),d(6,"button",5),q("click",function(){return s.prevPage()}),en(),d(7,"svg",6),I(8,"path",7),h()(),un(),d(9,"button",8),q("click",function(){return s.nextPage()}),en(),d(10,"svg",6),I(11,"path",9),h()()(),un(),d(12,"div",10),ie(13,tq,1,2,"button",11),h()()()),r&2&&(y(5),L("ngForOf",s.paginatedProducts),y(8),L("ngForOf",s.paginatedProducts))},dependencies:[nn],styles:[".reletedProducts--slider[_ngcontent-%COMP%]{display:flex;width:100%;position:relative}.reletedProducts--main--title[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:17px;font-weight:700;line-height:16px;padding-bottom:11px;margin-bottom:44px;border-bottom:.3px solid rgba(70,163,88,.5)}.reletedProducts--slider--page[_ngcontent-%COMP%]{width:100%;display:flex;transition:transform .5s ease}.reletedProducts--main[_ngcontent-%COMP%]{padding-bottom:128px}.reletedProducts--main--block[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:25px;width:100%}.reletedProducts--main--block--item[_ngcontent-%COMP%]{width:220px;height:300px;text-align:center}.reletedProducts--body[_ngcontent-%COMP%]{background:#fbfbfb}.reletedProducts--body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer}.reletedProducts--body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:212px;height:212px;border-radius:10px}.reletedProducts--Info[_ngcontent-%COMP%]{margin-top:10px;color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;line-height:16px}.reletedProducts--Info[_ngcontent-%COMP%]   .reletedProducts--Name[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;line-height:16px;margin-bottom:5px}.reletedProducts--Info[_ngcontent-%COMP%]   .reletedProducts--Price[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:16px;font-weight:700;line-height:16px}.slider-navigation-dots[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.slider-navigation-dots[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:12px;height:12px;border:none;background-color:#ccc;border-radius:50%;margin:0 5px;cursor:pointer;outline:none}.slider-navigation-dots[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:green}.slider-navigation-dots[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#006400}.arrow[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);color:#fff;border:none;font-size:24px;padding:10px;cursor:pointer;z-index:10;background-color:transparent;height:100%}.arrow.next[_ngcontent-%COMP%]{right:10px}"]});let t=e;return t})();var II=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-shop"]],decls:4,vars:0,template:function(r,s){r&1&&I(0,"app-header")(1,"router-outlet")(2,"app-reletedproducts")(3,"app-footer")},dependencies:[Lc,Tf,Mf,PI]});let t=e;return t})();function iq(t,e){if(t&1){let n=ue();d(0,"div",21)(1,"div",22)(2,"div",23),I(3,"img",24),h(),d(4,"div",25)(5,"div",26),m(6),h(),d(7,"div",27),m(8," SKU: 1995751877966 "),h()()(),d(9,"div",28),m(10),jt(11,"currency"),h(),d(12,"div",29)(13,"button",19),q("click",function(){let r=H(n).$implicit,s=N();return W(s.decrementQuantity(r.id))}),m(14,"-"),h(),d(15,"span"),m(16),h(),d(17,"button",19),q("click",function(){let r=H(n).$implicit,s=N();return W(s.incrementQuantity(r.id))}),m(18,"+"),h()(),d(19,"div",30),m(20),jt(21,"currency"),h(),d(22,"div",31)(23,"button",32),q("click",function(){let r=H(n).$implicit,s=N();return W(s.removeFromCart(r.id))}),I(24,"img",33),h()()()}if(t&2){let n=e.$implicit,i=N();y(3),Tn("alt",n.name),L("src",n.img,Pt),y(3),ge(" ",n.name," "),y(4),ge(" ",tn(11,6,n.price)," "),y(6),Ve(n.quantity),y(4),ge(" ",tn(21,8,i.getItemTotal(n.id))," ")}}function rq(t,e){if(t&1){let n=ue();d(0,"button",19),q("click",function(){H(n);let r=N();return W(r.applyCoupon())}),m(1,"Apply"),h()}}function sq(t,e){if(t&1){let n=ue();d(0,"div",34)(1,"button",35),q("click",function(){H(n);let r=N();return W(r.applyCoupon())}),m(2," Apply "),h(),d(3,"span",36),m(4,"\u0412\u043E\u0439\u0434\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C \u043A\u0443\u043F\u043E\u043D"),h()()}t&2&&(y(),L("disabled",!0))}var xI=(()=>{let e=class e{constructor(){this.cartService=U(rs),this.router=U(_i),this.authService=U(is),this.couponCode="",this.discount=0,this.shipping=10,this.validCoupons={DISCOUNT100:100,SAVE100:100},this.user$=this.authService.user$}ngOnInit(){}get cartItems(){return this.cartService.getCartItems()}get cartTotal(){return this.cartService.getTotalAmount()-this.discount}getItemTotal(i){return this.cartService.getTotalItem(i)}proceedToCheckout(){this.router.navigate(["/shop/check-out"],{state:{cartItems:this.cartItems,discount:this.discount,couponCode:this.couponCode}})}incrementQuantity(i){let r=this.cartItems.find(s=>s.id===i);r&&this.cartService.updateQuantity(i,r.quantity+1)}decrementQuantity(i){let r=this.cartItems.find(s=>s.id===i);r&&this.cartService.updateQuantity(i,r.quantity-1)}removeFromCart(i){this.cartService.removeFromCart(i)}applyCoupon(){this.validCoupons[this.couponCode]?this.discount=this.validCoupons[this.couponCode]:alert("Invalid coupon code")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-shopping-cart"]],decls:53,vars:11,consts:[["notLoggedIn",""],[1,"container"],[1,"shoppingCart--main--block"],[1,"shoppingCart--products--main--block"],[1,"shoppingCart--products--title"],[1,"shoppingCart--products--item--main"],["class","shoppingCart--products--item",4,"ngFor","ngForOf"],[1,"shoppingCart--cartTotals--main--block"],[1,"shoppingCart--cartTotals--main--title"],[1,"shoppingCart--cartTotals--main--coupon"],[1,"shoppingCart--cartTotals--main--coupon--title"],[1,"shoppingCart--cartTotals--main--coupon--action"],["type","text","placeholder","Enter coupon code here...",3,"ngModelChange","ngModel"],[3,"click",4,"ngIf","ngIfElse"],[1,"shoppingCart--cartTotals--main--info-priceshop"],[1,"shoppingCart--cartTotals--main--info-priceshop--item"],[1,"shoppingCart--cartTotals--main--info-priceshop--item-title"],[1,"shoppingCart--cartTotals--main--info-priceshop--item--title-price"],[1,"shoppingCart--cartTotals--main--checkout-action"],[3,"click"],[3,"routerLink"],[1,"shoppingCart--products--item"],[1,"shoppingCart--products--item--imgAndTitle"],[1,"shoppingCart--products--item--img"],["width","50","height","50",3,"src","alt"],[1,"shoppingCart--products--item--title"],[1,"shoppingCart--products--item--name"],[1,"shoppingCart--products--item--sku"],[1,"shoppingCart--products--item--price"],[1,"shoppingCart--products--item--quantity"],[1,"shoppingCart--products--item--total"],[1,"shoppingCart--products--item--deleteItem"],[1,"remove-item",3,"click"],["src","assets/Icons/Delete.png","alt",""],[1,"tooltip-container"],[1,"disabled",3,"click","disabled"],[1,"tooltip-text"]],template:function(r,s){if(r&1){let o=ue();d(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div"),m(5,"Products"),h(),d(6,"div"),m(7,"Price"),h(),d(8,"div"),m(9,"Quantity"),h(),d(10,"div"),m(11,"Total"),h()(),d(12,"div",5),ie(13,iq,25,10,"div",6),h()(),d(14,"div",7)(15,"div",8),m(16," Cart Totals "),h(),d(17,"div",9)(18,"div",10),m(19," Coupon Apply "),h(),d(20,"div",11),ds(21),d(22,"input",12),nt("ngModelChange",function(l){return H(o),tt(s.couponCode,l)||(s.couponCode=l),W(l)}),h(),ie(23,rq,2,0,"button",13),jt(24,"async"),hs(),ie(25,sq,5,1,"ng-template",null,0,mi),h(),d(27,"div",14)(28,"div",15)(29,"div",16),m(30," Subtotal "),h(),d(31,"div",17),m(32),h()(),d(33,"div",15)(34,"div",16),m(35," Coupon Discount "),h(),d(36,"div",17),m(37),h()(),d(38,"div",15)(39,"div",16),m(40," Shiping "),h(),d(41,"div",17),m(42),h()(),d(43,"div",15)(44,"div",16),m(45," Total "),h(),d(46,"div",17),m(47),h()()(),d(48,"div",18)(49,"button",19),q("click",function(){return H(o),W(s.proceedToCheckout())}),m(50,"Proceed To Checkout"),h(),d(51,"p",20),m(52,"Continue Shopping"),h()()()()()()}if(r&2){let o=pi(26);y(13),L("ngForOf",s.cartItems),y(9),et("ngModel",s.couponCode),y(),L("ngIf",tn(24,9,s.user$))("ngIfElse",o),y(9),ge(" $",s.cartTotal+s.discount," "),y(5),ge(" (-) $",s.discount," "),y(5),ge(" $",s.shipping," "),y(5),ge(" $",s.cartTotal+s.shipping," "),y(4),L("routerLink","")}},dependencies:[nn,On,mr,rn,In,Qn,so,Rc],styles:[".shoppingCart--main--block[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]{min-width:782px;display:flex;flex-direction:column;gap:10px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--title[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:500;line-height:16px;letter-spacing:0%;text-align:left;border-bottom:.3px solid rgba(70,163,88,.5)}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){padding-right:273px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){padding-right:95px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--title[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){padding-right:93px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #f0f0f0;font-size:14px;color:#555;background:#fbfbfb}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;flex:2}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]   .shoppingCart--products--item--img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;border:1px solid #ddd}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]   .shoppingCart--products--item--title[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]   .shoppingCart--products--item--title[_ngcontent-%COMP%]   .shoppingCart--products--item--name[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:500;line-height:16px;letter-spacing:0%}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]   .shoppingCart--products--item--title[_ngcontent-%COMP%]   .shoppingCart--products--item--sku[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:16px;letter-spacing:0%}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--price[_ngcontent-%COMP%]{flex:1;color:#727272;font-family:Oswald,sans-serif;font-size:16px;font-weight:500;line-height:16px;letter-spacing:0%;text-align:center}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;justify-content:center}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;font-size:18px;border:none;background-color:#4caf50;color:#fff;border-radius:50%;cursor:pointer;transition:background-color .2s}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#388e3c}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--quantity[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--total[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:16px;font-weight:700;color:#388e3c}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--deleteItem[_ngcontent-%COMP%]{flex:.5;text-align:center}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--products--main--block[_ngcontent-%COMP%]   .shoppingCart--products--item--main[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--deleteItem[_ngcontent-%COMP%]   .remove-item[_ngcontent-%COMP%]{border:none;cursor:pointer}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]{width:328px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--title[_ngcontent-%COMP%]{padding:12px 12px 12px 0;color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;letter-spacing:0%;text-align:left;border-bottom:.3px solid rgba(70,163,88,.5);margin-bottom:10px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;line-height:16px;letter-spacing:0%;text-align:left;padding-bottom:8px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--action[_ngcontent-%COMP%]{display:flex;padding-bottom:30px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--action[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;color:#acacac;font-family:Oswald,sans-serif;font-size:14px;font-weight:400;width:100%;outline:none;padding-left:11px;border-radius:5px 0 0 5px;border:1px solid rgb(70,163,88)}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--action[_ngcontent-%COMP%]   .tooltip-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--action[_ngcontent-%COMP%]   .tooltip-text[_ngcontent-%COMP%]{visibility:hidden;background-color:green;color:#fff;text-align:center;padding:5px 10px;border-radius:5px;position:absolute;bottom:100%;left:50%;transform:translate(-50%);opacity:0;transition:opacity .3s;white-space:nowrap}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--action[_ngcontent-%COMP%]   .tooltip-container[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:105px;min-height:40px;border-radius:0 6px 6px 0;background:#46a358;border:none;color:#fff;font-family:Oswald,sans-serif;font-size:18px;font-weight:700}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled:hover{cursor:not-allowed}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item[_ngcontent-%COMP%]:last-child{padding-bottom:30px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:15px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item-title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;line-height:16px;letter-spacing:0%;text-align:left}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item--title-price[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:500;line-height:16px;letter-spacing:0%;text-align:right}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--checkout-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:3px;border:none;background:#46a358;color:#fff;font-family:Oswald,sans-serif;font-size:15px;font-weight:700;line-height:16px;letter-spacing:0%;margin-bottom:15px}.shoppingCart--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--checkout-action[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;line-height:16px;letter-spacing:0%;text-align:center;cursor:pointer}"]});let t=e;return t})();var oq=(t,e)=>({"enabled-button":t,"disabled-button":e}),aq=t=>({"last-item":t});function lq(t,e){if(t&1&&(d(0,"div",44)(1,"div",45)(2,"div",46),I(3,"img",47),h(),d(4,"div",48)(5,"div",49),m(6),h(),d(7,"div",50),m(8,"SKU: 1995751877966"),h()()(),d(9,"div",51),m(10),h(),d(11,"div",52),m(12),jt(13,"currency"),h()()),t&2){let n=e.$implicit,i=e.last;L("ngClass",Uf(8,aq,i)),y(3),Tn("alt",n.name),L("src",n.img,Pt),y(3),Ve(n.name),y(4),ge("(x ",n.quantity,")"),y(2),Ve(tn(13,6,n.price*n.quantity))}}function cq(t,e){if(t&1&&(d(0,"div"),ie(1,lq,14,10,"div",43),h()),t&2){let n=N();y(),L("ngForOf",n.cartItems)}}function uq(t,e){t&1&&(d(0,"div"),m(1,"No items in the cart"),h())}var AI=(()=>{let e=class e{constructor(i){this.route=i,this.cartItems=[],this.discount=0,this.couponCode="",this.shipping=10,this.checkoutForm=new Jc({firstName:new Ht("",pn.required),lastName:new Ht("",pn.required),country:new Ht("",pn.required),city:new Ht("",pn.required),streetAddress:new Ht("",pn.required),apartment:new Ht(""),state:new Ht("",pn.required),email:new Ht("",[pn.required,pn.email]),phoneNumber:new Ht("",pn.required),differentAddress:new Ht(!1),orderNotes:new Ht(""),paymentMethod:new Ht("",pn.required)})}ngOnInit(){if(typeof window<"u"&&window.history){let i=window.history.state;console.log("Navigation data:",i),i&&(this.cartItems=i.cartItems||[],this.discount=i.discount||0,this.couponCode=i.couponCode||"")}else console.warn("History is not available!")}getSubtotal(){return this.cartItems.reduce((i,r)=>i+r.price*r.quantity,0)}getTotal(){return this.getSubtotal()-this.discount+this.shipping}onSubmit(){this.checkoutForm.valid?(console.log("\u0424\u043E\u0440\u043C\u0430 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430:",this.checkoutForm.value),console.log("\u0412\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0439 \u0441\u043F\u043E\u0441\u043E\u0431 \u043E\u043F\u043B\u0430\u0442\u044B:",this.checkoutForm.value.paymentMethod),console.log("\u041A\u043E\u0440\u0437\u0438\u043D\u0430 \u0442\u043E\u0432\u0430\u0440\u043E\u0432:",this.cartItems)):console.log("\u0424\u043E\u0440\u043C\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u0442 \u043E\u0448\u0438\u0431\u043A\u0438! \u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043F\u043E\u0441\u043E\u0431 \u043E\u043F\u043B\u0430\u0442\u044B.")}};e.\u0275fac=function(r){return new(r||e)($(Fc))},e.\u0275cmp=de({type:e,selectors:[["app-product-checkout"]],decls:114,vars:18,consts:[["noItems",""],[1,"container"],[1,"checkout-container"],[3,"ngSubmit","formGroup"],[1,"form--main"],["type","text","formControlName","firstName"],["type","text","formControlName","lastName"],["formControlName","country"],["value",""],["value","USA"],["value","UK"],["type","text","formControlName","city"],[1,"streetAdrees"],[1,"streetAdressLabel"],[1,"streetAdressInput"],["type","text","formControlName","streetAddress","placeholder","House number and street name"],["type","text","formControlName","apartment","placeholder","Apartment, suite, unit, etc. (optional)"],["formControlName","state"],["value","CA"],["value","NY"],["type","email","formControlName","email"],["type","text","formControlName","phoneNumber"],["formControlName","orderNotes"],[1,"shoppingCart--cartTotals--main--block"],[1,"shoppingCart--cartTotals--main--title"],[1,"shoppingCart--cartTotals--main--subtitles"],[1,"shoppingCart--cartTotals--main--subtitle"],[1,"shoppingCart--cartTotals--main--coupon"],[1,"shoppingCart--cartTotals--main--info-priceshop"],[4,"ngIf","ngIfElse"],[1,"shoppingCart--cartTotals--main--info-priceshop--item"],[1,"shoppingCart--cartTotals--main--info-priceshop--item-title"],[1,"shoppingCart--cartTotals--main--info-priceshop--item--title-price"],[1,"shoppingCart--cartTotals--main--info-payment--item"],[1,"shoppingCart--cartTotals--main--info-payment--item-title"],[1,"shoppingCart--cartTotals--main--info-payment--item--title-price"],[1,"shoppingCart--cartTotals--main--info-payment--item--title-price--item"],["type","radio","formControlName","paymentMethod","value","card","name","paymentMethod"],["src","assets/Icons/payment.png","alt","Card Payment"],["type","radio","formControlName","paymentMethod","value","bank","name","paymentMethod"],["type","radio","formControlName","paymentMethod","value","cod","name","paymentMethod"],[1,"shoppingCart--cartTotals--main--checkout-action"],[3,"click","ngClass","disabled"],["class","shoppingCart--products--item",3,"ngClass",4,"ngFor","ngForOf"],[1,"shoppingCart--products--item",3,"ngClass"],[1,"shoppingCart--products--item--imgAndTitle"],[1,"shoppingCart--products--item--img"],["width","70","height","70",3,"src","alt"],[1,"shoppingCart--products--item--title"],[1,"shoppingCart--products--item--name"],[1,"shoppingCart--products--item--sku"],[1,"shoppingCart--products--item--quantity"],[1,"shoppingCart--products--item--total"]],template:function(r,s){if(r&1){let o=ue();d(0,"div",1)(1,"div",2)(2,"form",3),q("ngSubmit",function(){return H(o),W(s.onSubmit())}),d(3,"div",4)(4,"h2"),m(5,"Billing Address"),h(),d(6,"div")(7,"label"),m(8,"First Name *"),h(),I(9,"input",5),h(),d(10,"div")(11,"label"),m(12,"Last Name *"),h(),I(13,"input",6),h(),d(14,"div")(15,"label"),m(16,"Country / Region *"),h(),d(17,"select",7)(18,"option",8),m(19,"Select a country / region"),h(),d(20,"option",9),m(21,"USA"),h(),d(22,"option",10),m(23,"UK"),h()()(),d(24,"div")(25,"label"),m(26,"Town / City *"),h(),I(27,"input",11),h(),d(28,"div",12)(29,"div",13)(30,"label"),m(31,"Street Address *"),h()(),d(32,"div",14),I(33,"input",15)(34,"input",16),h(),I(35,"div",14),h(),d(36,"div")(37,"label"),m(38,"State *"),h(),d(39,"select",17)(40,"option",8),m(41,"Select a state"),h(),d(42,"option",18),m(43,"California"),h(),d(44,"option",19),m(45,"New York"),h()()(),d(46,"div")(47,"label"),m(48,"Email Address *"),h(),I(49,"input",20),h(),d(50,"div")(51,"label"),m(52,"Phone Number *"),h(),I(53,"input",21),h(),d(54,"div")(55,"label"),m(56,"Order notes (optional)"),h(),I(57,"textarea",22),h()(),d(58,"div",23)(59,"div",24),m(60,"Your Order"),h(),d(61,"div",25)(62,"div",26),m(63,"Products"),h(),d(64,"div",26),m(65,"Subtotal"),h()(),d(66,"div",27)(67,"div",28),ie(68,cq,2,1,"div",29)(69,uq,2,0,"ng-template",null,0,mi),d(71,"div",30)(72,"div",31),m(73,"Subtotal"),h(),d(74,"div",32),m(75),jt(76,"currency"),h()(),d(77,"div",30)(78,"div",31),m(79,"Coupon Discount"),h(),d(80,"div",32)(81,"span"),m(82),h()()(),d(83,"div",30)(84,"div",31),m(85,"Shipping:"),h(),d(86,"div",32),m(87),jt(88,"currency"),h()(),d(89,"div",30)(90,"div",31),m(91,"Total"),h(),d(92,"div",32),m(93),jt(94,"currency"),h()(),d(95,"div",33)(96,"div",34),m(97,"Payment Method"),h(),d(98,"div",35)(99,"div",36),I(100,"input",37),d(101,"label"),I(102,"img",38),h()(),d(103,"div",36),I(104,"input",39),d(105,"label"),m(106,"Direct bank transfer"),h()(),d(107,"div",36),I(108,"input",40),d(109,"label"),m(110,"Cash on delivery"),h()()()()(),d(111,"div",41)(112,"button",42),q("click",function(){return H(o),W(s.onSubmit())}),m(113," Place Order "),h()()()()()()()}if(r&2){let o=pi(70);y(2),L("formGroup",s.checkoutForm),y(66),L("ngIf",s.cartItems.length>0)("ngIfElse",o),y(7),Ve(tn(76,9,s.getSubtotal())),y(7),ge("Coupon (",s.couponCode,"):"),y(5),Ve(tn(88,11,s.shipping)),y(6),Ve(tn(94,13,s.getTotal())),y(19),L("ngClass",zf(15,oq,!s.checkoutForm.invalid,s.checkoutForm.invalid))("disabled",s.checkoutForm.invalid)}},dependencies:[P1,nn,On,zC,GC,WC,rn,nu,mp,In,RC,gp,_p,Rc],styles:['.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;width:100%}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form--main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;max-width:722px;min-width:722px;flex-wrap:wrap}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .streetAdrees[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-direction:column;width:100%}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .streetAdrees[_ngcontent-%COMP%]   .streetAdressInput[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .streetAdrees[_ngcontent-%COMP%]   .streetAdressLabel[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:5px;border:1px solid #ccc;border-radius:5px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:41.6px;width:350px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:350px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:350px;height:225px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;padding:10px;border:none;cursor:pointer;width:100%}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]{width:328px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--title[_ngcontent-%COMP%]{padding:12px 12px 12px 0;color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:700;line-height:16px;text-align:left;margin-bottom:10px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--subtitles[_ngcontent-%COMP%]{display:flex;justify-content:space-between;border-bottom:.3px solid rgba(70,163,88,.5);padding-bottom:10px;margin-bottom:20px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--subtitles[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--subtitle[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:500;line-height:16px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--subtitles[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--subtitle[_ngcontent-%COMP%]:last-child{margin-right:20px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:30px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:14px;color:#555;padding-bottom:10px;background:#fbfbfb}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item.last-item[_ngcontent-%COMP%]{margin-bottom:40px!important}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;flex:2}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]   .shoppingCart--products--item--img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:8px;border:1px solid #ddd}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]   .shoppingCart--products--item--title[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:3px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]   .shoppingCart--products--item--title[_ngcontent-%COMP%]   .shoppingCart--products--item--name[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:16px;font-weight:500}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--imgAndTitle[_ngcontent-%COMP%]   .shoppingCart--products--item--title[_ngcontent-%COMP%]   .shoppingCart--products--item--sku[_ngcontent-%COMP%]{font-family:Oswald,sans-serif;font-size:14px;font-weight:400}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--quantity[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;justify-content:center}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--quantity[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#333}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]   .shoppingCart--products--item--total[_ngcontent-%COMP%]{flex:1;text-align:center;font-size:16px;font-weight:700;color:#388e3c}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--products--item[_ngcontent-%COMP%]:last-child{margin-bottom:50px!important}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:15px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item-title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;line-height:16px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop--item--title-price[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:18px;font-weight:500;line-height:16px;text-align:right}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:20px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item-title[_ngcontent-%COMP%]{color:#3d3d3d;font-family:Oswald,sans-serif;font-size:17px;font-weight:700;line-height:16px;text-align:left}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;color:#3d3d3d;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;line-height:16px;letter-spacing:0%;text-align:left}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price--item[_ngcontent-%COMP%]{display:flex;align-items:center;padding-left:11px;box-sizing:border-box;border:1px solid rgb(234,234,234);border-radius:3px;width:321px;height:45px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price--item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{width:16px!important;height:16px!important;appearance:none;border-radius:50%;border:2px solid #333;outline:none;cursor:pointer;position:relative;margin-right:10px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price--item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked{background-color:#4caf50;border:2px solid #4CAF50}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price--item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:before{content:"";position:absolute;width:10px!important;height:10px!important;background:#fff;border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0;transition:opacity .2s ease-in-out}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-priceshop[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--info-payment--item--title-price--item[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked:before{opacity:1}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--checkout-action[_ngcontent-%COMP%]   .enabled-button[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:3px;border:none;background:#46a358;color:#fff;font-family:Oswald,sans-serif;font-size:15px;font-weight:700;line-height:16px;margin-bottom:15px}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--checkout-action[_ngcontent-%COMP%]   .disabled-button[_ngcontent-%COMP%]{width:100%;height:40px;border-radius:3px;border:none;background:#46a358;color:#fff;font-family:Oswald,sans-serif;font-size:15px;font-weight:700;line-height:16px;margin-bottom:15px;background-color:gray;color:#a9a9a9;cursor:not-allowed}.container[_ngcontent-%COMP%]   .checkout-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--block[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--coupon[_ngcontent-%COMP%]   .shoppingCart--cartTotals--main--checkout-action[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#46a358;font-family:Oswald,sans-serif;font-size:15px;font-weight:400;line-height:16px;text-align:center;cursor:pointer}']});let t=e;return t})();var dq=[{path:"",component:DI},{path:"shop",component:II,children:[{path:"",component:xI},{path:"product/:id",component:yI},{path:"check-out",component:AI}]}],kI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e}),e.\u0275inj=Z({imports:[Hf.forRoot(dq),Hf]});let t=e;return t})();var Of=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=de({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,s){r&1&&I(0,"router-outlet")},dependencies:[Lc],styles:[".sidebar-body[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]});let t=e;return t})();var RI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e,bootstrap:[Of]}),e.\u0275inj=Z({providers:[F1(),zP(),kc],imports:[N1,kI,$1(()=>K1({projectId:"flowershop-15faa",appId:"1:541465629622:web:dd3219fdfd714a830c6717",storageBucket:"flowershop-15faa.appspot.com",apiKey:"AIzaSyDwZ18TS6Am9awxZIKh6clCSxUJXDAQVfg",authDomain:"flowershop-15faa.firebaseapp.com",messagingSenderId:"541465629622"})),ib(()=>rb()),vP(()=>wP()),OP.initializeApp(gI.firebaseConfig),UP,KC,pI,tb,L1,k1,QC]});let t=e;return t})();var hq=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ee({type:e,bootstrap:[Of]}),e.\u0275inj=Z({imports:[RI,B1]});let t=e;return t})();export{hq as a};
